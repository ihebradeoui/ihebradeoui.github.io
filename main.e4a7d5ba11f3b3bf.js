"use strict";(self.webpackChunkthe_project=self.webpackChunkthe_project||[]).push([[179],{2011:(gt,xe,V)=>{V.d(xe,{Dh:()=>me,GT:()=>we,cc:()=>Le,hO:()=>Ge,on:()=>Y,pX:()=>he,xv:()=>Ee});var h=V(4650),G=V(127),O=V(5813);gt=V.hmd(gt);const le=["ngOnDestroy"],he=(ve,nt,Je,Ve={})=>new Proxy(ve,{get:(ke,Se)=>Je.runOutsideAngular(()=>{var Ke;if(ve[Se])return!(null===(Ke=Ve?.spy)||void 0===Ke)&&Ke.get&&Ve.spy.get(Se,ve[Se]),ve[Se];if(le.indexOf(Se)>-1)return()=>{};const ae=nt.toPromise().then(fe=>{const Ie=fe&&fe[Se];return"function"==typeof Ie?Ie.bind(fe):Ie&&Ie.then?Ie.then(ee=>Je.run(()=>ee)):Je.run(()=>Ie)});return new Proxy(()=>{},{get:(fe,Ie)=>ae[Ie],apply:(fe,Ie,ee)=>ae.then(re=>{var _e;const ue=re&&re(...ee);return!(null===(_e=Ve?.spy)||void 0===_e)&&_e.apply&&Ve.spy.apply(Se,ee,ue),ue})})})}),we=(ve,nt)=>{nt.forEach(Je=>{Object.getOwnPropertyNames(Je.prototype||Je).forEach(Ve=>{Object.defineProperty(ve.prototype,Ve,Object.getOwnPropertyDescriptor(Je.prototype||Je,Ve))})})};class ge{constructor(nt){return nt}}const me=new h.OlP("angularfire2.app.options"),Ee=new h.OlP("angularfire2.app.name");function Y(ve,nt,Je){const ke="object"==typeof Je&&Je||{};ke.name=ke.name||"string"==typeof Je&&Je||"[DEFAULT]";const Ke=G.Z.apps.filter(ae=>ae&&ae.name===ke.name)[0]||nt.runOutsideAngular(()=>G.Z.initializeApp(ve,ke));try{JSON.stringify(ve)!==JSON.stringify(Ke.options)&&q("error",`${Ke.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ge(Ke)}const q=(ve,...nt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ve](...nt)},te={provide:ge,useFactory:Y,deps:[me,h.R0b,[new h.FiY,Ee]]};let Ge=(()=>{class ve{constructor(Je){G.Z.registerVersion("angularfire",O.q4.full,"core"),G.Z.registerVersion("angularfire",O.q4.full,"app-compat"),G.Z.registerVersion("angular",h.q4F.full,Je.toString())}static initializeApp(Je,Ve){return{ngModule:ve,providers:[{provide:me,useValue:Je},{provide:Ee,useValue:Ve}]}}}return ve.\u0275fac=function(Je){return new(Je||ve)(h.LFG(h.Lbi))},ve.\u0275mod=h.oAB({type:ve}),ve.\u0275inj=h.cJS({providers:[te]}),ve})();function Le(ve,nt,Je,Ve,ke){const[,Se,Ke]=globalThis.\u0275AngularfireInstanceCache.find(ae=>ae[0]===ve)||[];if(Se)return function Ae(ve,nt){try{return ve.toString()===nt.toString()}catch{return ve===nt}}(ke,Ke)||(Ce("error",`${nt} was already initialized on the ${Je} Firebase App with different settings.${ot?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:ke,was:Ke})),Se;{const ae=Ve();return globalThis.\u0275AngularfireInstanceCache.push([ve,ae,ke]),ae}}const ot=!!gt.hot,Ce=(ve,...nt)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ve](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(gt,xe,V)=>{V.d(xe,{q4:()=>ac,iC:()=>Xn,HU:()=>To,vb:()=>rs,JM:()=>Da,u3:()=>Di});var h=V(4650),G=V(5867),O=V(5861),le=V(9681),he=V(2090),we=V(4859),ge=V(1877),me=V(8766);const Ee="@firebase/installations",Y="0.5.16",te=`w:${Y}`,Ge="FIS_v2",nt=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Je(D){return D instanceof he.ZR&&D.code.includes("request-failed")}function Ve({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ke(D){return{token:D.token,requestStatus:2,expiresIn:re(D.expiresIn),creationTime:Date.now()}}function Se(D,S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(D,S){const $=(yield S.json()).error;return nt.create("request-failed",{requestName:D,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function ae({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function fe(D,{refreshToken:S}){const P=ae(D);return P.append("Authorization",function _e(D){return`${Ge} ${D}`}(S)),P}function Ie(D){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function re(D){return Number(D.replace("s","000"))}function ue(D,S){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:P}){const $=Ve(D),X=ae(D),ce=S.getImmediate({optional:!0});if(ce){const At=yield ce.getHeartbeatsHeader();At&&X.append("x-firebase-client",At)}const ze={method:"POST",headers:X,body:JSON.stringify({fid:P,authVersion:Ge,appId:D.appId,sdkVersion:te})},vt=yield Ie(()=>fetch($,ze));if(vt.ok){const At=yield vt.json();return{fid:At.fid||P,registrationStatus:2,refreshToken:At.refreshToken,authToken:ke(At.authToken)}}throw yield Se("Create Installation",vt)})).apply(this,arguments)}function je(D){return new Promise(S=>{setTimeout(S,D)})}const dn=/^[cdef][\w-]{21}$/;function Ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const P=function En(D){return function mt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return dn.test(P)?P:""}catch{return""}}function kn(D){return`${D.appName}!${D.appId}`}const an=new Map;function ln(D,S){const P=kn(D);Ur(P,S),function qi(D,S){const P=function Gn(){return!Jr&&"BroadcastChannel"in self&&(Jr=new BroadcastChannel("[Firebase] FID Change"),Jr.onmessage=D=>{Ur(D.data.key,D.data.fid)}),Jr}();P&&P.postMessage({key:D,fid:S}),function Ki(){0===an.size&&Jr&&(Jr.close(),Jr=null)}()}(P,S)}function Ur(D,S){const P=an.get(D);if(P)for(const $ of P)$(S)}let Jr=null;const Zn="firebase-installations-store";let Vi=null;function Yi(){return Vi||(Vi=(0,me.X3)("firebase-installations-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(Zn)}})),Vi}function Xe(D,S){return dr.apply(this,arguments)}function dr(){return(dr=(0,O.Z)(function*(D,S){const P=kn(D),X=(yield Yi()).transaction(Zn,"readwrite"),ce=X.objectStore(Zn),be=yield ce.get(P);return yield ce.put(S,P),yield X.done,(!be||be.fid!==S.fid)&&ln(D,S.fid),S})).apply(this,arguments)}function ir(D){return xn.apply(this,arguments)}function xn(){return(xn=(0,O.Z)(function*(D){const S=kn(D),$=(yield Yi()).transaction(Zn,"readwrite");yield $.objectStore(Zn).delete(S),yield $.done})).apply(this,arguments)}function Tr(D,S){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(D,S){const P=kn(D),X=(yield Yi()).transaction(Zn,"readwrite"),ce=X.objectStore(Zn),be=yield ce.get(P),ze=S(be);return void 0===ze?yield ce.delete(P):yield ce.put(ze,P),yield X.done,ze&&(!be||be.fid!==ze.fid)&&ln(D,ze.fid),ze})).apply(this,arguments)}function Mn(D){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(D){let S;const P=yield Tr(D.appConfig,$=>{const X=Tn($),ce=_t(D,X);return S=ce.registrationPromise,ce.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function Tn(D){return xt(D||{fid:Ze(),registrationStatus:0})}function _t(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(nt.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},$=function yt(D,S){return kt.apply(this,arguments)}(D,P);return{installationEntry:P,registrationPromise:$}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ei(D)}:{installationEntry:S}}function kt(){return(kt=(0,O.Z)(function*(D,S){try{const P=yield ue(D,S);return Xe(D.appConfig,P)}catch(P){throw Je(P)&&409===P.customData.serverCode?yield ir(D.appConfig):yield Xe(D.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function ei(D){return sr.apply(this,arguments)}function sr(){return(sr=(0,O.Z)(function*(D){let S=yield Wr(D.appConfig);for(;1===S.registrationStatus;)yield je(100),S=yield Wr(D.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:$}=yield Mn(D);return $||P}return S})).apply(this,arguments)}function Wr(D){return Tr(D,S=>{if(!S)throw nt.create("installation-not-found");return xt(S)})}function xt(D){return function Gr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Bt(D,S){return ai.apply(this,arguments)}function ai(){return(ai=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:S},P){const $=nn(D,P),X=fe(D,P),ce=S.getImmediate({optional:!0});if(ce){const At=yield ce.getHeartbeatsHeader();At&&X.append("x-firebase-client",At)}const ze={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},vt=yield Ie(()=>fetch($,ze));if(vt.ok)return ke(yield vt.json());throw yield Se("Generate Auth Token",vt)})).apply(this,arguments)}function nn(D,{fid:S}){return`${Ve(D)}/${S}/authTokens:generate`}function Ir(D){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(D,S=!1){let P;const $=yield Tr(D.appConfig,ce=>{if(!sn(ce))throw nt.create("not-registered");const be=ce.authToken;if(!S&&K(be))return ce;if(1===be.requestStatus)return P=rt(D,S),ce;{if(!navigator.onLine)throw nt.create("app-offline");const ze=J(ce);return P=Dt(D,ze),ze}});return P?yield P:$.authToken})).apply(this,arguments)}function rt(D,S){return Re.apply(this,arguments)}function Re(){return(Re=(0,O.Z)(function*(D,S){let P=yield it(D.appConfig);for(;1===P.authToken.requestStatus;)yield je(100),P=yield it(D.appConfig);const $=P.authToken;return 0===$.requestStatus?Ir(D,S):$})).apply(this,arguments)}function it(D){return Tr(D,S=>{if(!sn(S))throw nt.create("not-registered");return function W(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Dt(D,S){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,O.Z)(function*(D,S){try{const P=yield Bt(D,S),$=Object.assign(Object.assign({},S),{authToken:P});return yield Xe(D.appConfig,$),P}catch(P){if(!Je(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const $=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Xe(D.appConfig,$)}else yield ir(D.appConfig);throw P}})).apply(this,arguments)}function sn(D){return void 0!==D&&2===D.registrationStatus}function K(D){return 2===D.requestStatus&&!function z(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function J(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function H(){return(H=(0,O.Z)(function*(D){const S=D,{installationEntry:P,registrationPromise:$}=yield Mn(S);return $?$.catch(console.error):Ir(S).catch(console.error),P.fid})).apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*(D,S=!1){const P=D;return yield lt(P),(yield Ir(P,S)).token})).apply(this,arguments)}function lt(D){return ut.apply(this,arguments)}function ut(){return(ut=(0,O.Z)(function*(D){const{registrationPromise:S}=yield Mn(D);S&&(yield S)})).apply(this,arguments)}function uo(D){return nt.create("missing-app-config-values",{valueName:D})}const Zo="installations",co=D=>{const S=D.getProvider("app").getImmediate(),P=function Ln(D){if(!D||!D.options)throw uo("App Configuration");if(!D.name)throw uo("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!D.options[P])throw uo(P);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:P,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},ho=D=>{const S=D.getProvider("app").getImmediate(),P=(0,le._getProvider)(S,Zo).getImmediate();return{getId:()=>function N(D){return H.apply(this,arguments)}(P),getToken:X=>function se(D){return Fe.apply(this,arguments)}(P,X)}};(function jl(){(0,le._registerComponent)(new we.wA(Zo,co,"PUBLIC")),(0,le._registerComponent)(new we.wA("installations-internal",ho,"PRIVATE"))})(),(0,le.registerVersion)(Ee,Y),(0,le.registerVersion)(Ee,Y,"esm2017");const hs="@firebase/remote-config",ar=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Za{constructor(S,P,$,X){this.client=S,this.storage=P,this.storageCache=$,this.logger=X}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-P,X=$<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${X}.`),X}fetch(S){var P=this;return(0,O.Z)(function*(){const[$,X]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(X&&P.isCachedDataFresh(S.cacheMaxAgeMillis,$))return X;S.eTag=X&&X.eTag;const ce=yield P.client.fetch(S),be=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&be.push(P.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(be),ce})()}}function mo(D=navigator){return D.languages&&D.languages[0]||D.language}class _o{constructor(S,P,$,X,ce,be){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=$,this.projectId=X,this.apiKey=ce,this.appId=be}fetch(S){var P=this;return(0,O.Z)(function*(){var $,X,ce;const[be,ze]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),At=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,jt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Et={sdk_version:P.sdkVersion,app_instance_id:be,app_instance_id_token:ze,app_id:P.appId,language_code:mo()},lr={method:"POST",headers:jt,body:JSON.stringify(Et)},Kr=fetch(At,lr),Ro=new Promise((Zs,Rr)=>{S.signal.addEventListener(()=>{const Ad=new Error("The operation was aborted.");Ad.name="AbortError",Rr(Ad)})});let Wt;try{yield Promise.race([Kr,Ro]),Wt=yield Kr}catch(Zs){let Rr="fetch-client-network";throw"AbortError"===(null===($=Zs)||void 0===$?void 0:$.name)&&(Rr="fetch-timeout"),ar.create(Rr,{originalErrorMessage:null===(X=Zs)||void 0===X?void 0:X.message})}let Hr=Wt.status;const xo=Wt.headers.get("ETag")||void 0;let Ks,ou;if(200===Wt.status){let Zs;try{Zs=yield Wt.json()}catch(Rr){throw ar.create("fetch-client-parse",{originalErrorMessage:null===(ce=Rr)||void 0===ce?void 0:ce.message})}Ks=Zs.entries,ou=Zs.state}if("INSTANCE_STATE_UNSPECIFIED"===ou?Hr=500:"NO_CHANGE"===ou?Hr=304:("NO_TEMPLATE"===ou||"EMPTY_CONFIG"===ou)&&(Ks={}),304!==Hr&&200!==Hr)throw ar.create("fetch-status",{httpStatus:Hr});return{status:Hr,eTag:xo,config:Ks}})()}}class gs{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,O.Z)(function*(){const $=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,$)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:$}){var X=this;return(0,O.Z)(function*(){yield function wi(D,S){return new Promise((P,$)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(P,X);D.addEventListener(()=>{clearTimeout(ce),$(ar.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const ce=yield X.client.fetch(S);return yield X.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function ag(D){if(!(D instanceof he.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ce))throw ce;const be={throttleEndTimeMillis:Date.now()+(0,he.$s)($),backoffCount:$+1};return yield X.storage.setThrottleMetadata(be),X.attemptFetch(S,be)}})()}}class ug{constructor(S,P,$,X,ce){this.app=S,this._client=P,this._storageCache=$,this._storage=X,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ya(D,S){var P;const $=D.target.error||void 0;return ar.create(S,{originalErrorMessage:$&&(null===(P=$)||void 0===P?void 0:P.message)})}const Qo="app_namespace_store";class id{constructor(S,P,$,X=function dg(){return new Promise((D,S)=>{var P;try{const $=indexedDB.open("firebase_remote_config",1);$.onerror=X=>{S(Ya(X,"storage-open"))},$.onsuccess=X=>{D(X.target.result)},$.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(Qo,{keyPath:"compositeKey"})}}catch($){S(ar.create("storage-open",{originalErrorMessage:null===(P=$)||void 0===P?void 0:P.message}))}})}()){this.appId=S,this.appName=P,this.namespace=$,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,O.Z)(function*(){const $=yield P.openDbPromise;return new Promise((X,ce)=>{var be;const vt=$.transaction([Qo],"readonly").objectStore(Qo),At=P.createCompositeKey(S);try{const jt=vt.get(At);jt.onerror=Et=>{ce(Ya(Et,"storage-get"))},jt.onsuccess=Et=>{const lr=Et.target.result;X(lr?lr.value:void 0)}}catch(jt){ce(ar.create("storage-get",{originalErrorMessage:null===(be=jt)||void 0===be?void 0:be.message}))}})})()}set(S,P){var $=this;return(0,O.Z)(function*(){const X=yield $.openDbPromise;return new Promise((ce,be)=>{var ze;const At=X.transaction([Qo],"readwrite").objectStore(Qo),jt=$.createCompositeKey(S);try{const Et=At.put({compositeKey:jt,value:P});Et.onerror=lr=>{be(Ya(lr,"storage-set"))},Et.onsuccess=()=>{ce()}}catch(Et){be(ar.create("storage-set",{originalErrorMessage:null===(ze=Et)||void 0===ze?void 0:ze.message}))}})})()}delete(S){var P=this;return(0,O.Z)(function*(){const $=yield P.openDbPromise;return new Promise((X,ce)=>{var be;const vt=$.transaction([Qo],"readwrite").objectStore(Qo),At=P.createCompositeKey(S);try{const jt=vt.delete(At);jt.onerror=Et=>{ce(Ya(Et,"storage-delete"))},jt.onsuccess=()=>{X()}}catch(jt){ce(ar.create("storage-delete",{originalErrorMessage:null===(be=jt)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Jo{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const P=S.storage.getLastFetchStatus(),$=S.storage.getLastSuccessfulFetchTimestampMillis(),X=S.storage.getActiveConfig(),ce=yield P;ce&&(S.lastFetchStatus=ce);const be=yield $;be&&(S.lastSuccessfulFetchTimestampMillis=be);const ze=yield X;ze&&(S.activeConfig=ze)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function gy(){return $l.apply(this,arguments)}function $l(){return($l=(0,O.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function sd(){(0,le._registerComponent)(new we.wA("remote-config",function D(S,{instanceIdentifier:P}){const $=S.getProvider("app").getImmediate(),X=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ar.create("registration-window");if(!(0,he.hl)())throw ar.create("indexed-db-unavailable");const{projectId:ce,apiKey:be,appId:ze}=$.options;if(!ce)throw ar.create("registration-project-id");if(!be)throw ar.create("registration-api-key");if(!ze)throw ar.create("registration-app-id");const vt=new id(ze,$.name,P=P||"firebase"),At=new Jo(vt),jt=new ge.Yd(hs);jt.logLevel=ge.in.ERROR;const Et=new _o(X,le.SDK_VERSION,P,ce,be,ze),lr=new gs(Et,vt),Kr=new Za(lr,vt,At,jt),Ro=new ug($,Kr,At,vt,jt);return function zn(D){const S=(0,he.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ro),Ro},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(hs,"0.3.15"),(0,le.registerVersion)(hs,"0.3.15","esm2017")}();const Br="/firebase-messaging-sw.js",ea="/firebase-cloud-messaging-push-scope",Vs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wl="google.c.a.c_id",Wu="google.c.a.c_l",ld="google.c.a.ts",ta="google.c.a.e";var Ei=(()=>{return(D=Ei||(Ei={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ei;var D})();function ms(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ci(D){const P=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(P),X=new Uint8Array($.length);for(let ce=0;ce<$.length;++ce)X[ce]=$.charCodeAt(ce);return X}const yo="fcm_token_details_db",na="fcm_token_object_Store";function hg(D){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(yo))return null;let S=null;return(yield(0,me.X3)(yo,5,{upgrade:($=(0,O.Z)(function*(X,ce,be,ze){var vt;if(ce<2||!X.objectStoreNames.contains(na))return;const At=ze.objectStore(na),jt=yield At.index("fcmSenderId").get(D);if(yield At.clear(),jt)if(2===ce){const Et=jt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;S={token:Et.fcmToken,createTime:null!==(vt=Et.createTime)&&void 0!==vt?vt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:ms(Et.vapidKey)}}}else if(3===ce){const Et=jt;S={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ms(Et.auth),p256dh:ms(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ms(Et.vapidKey)}}}else if(4===ce){const Et=jt;S={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ms(Et.auth),p256dh:ms(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ms(Et.vapidKey)}}}}),function(ce,be,ze,vt){return $.apply(this,arguments)})})).close(),yield(0,me.Lj)(yo),yield(0,me.Lj)("fcm_vapid_details_db"),yield(0,me.Lj)("undefined"),qn(S)?S:null;var $}),Gu.apply(this,arguments)}function qn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ui="firebase-messaging-store";let Sr=null;function Gl(){return Sr||(Sr=(0,me.X3)("firebase-messaging-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(Ui)}})),Sr}function ra(D){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,O.Z)(function*(D){const S=bi(D),$=yield(yield Gl()).transaction(Ui).objectStore(Ui).get(S);if($)return $;{const X=yield hg(D.appConfig.senderId);if(X)return yield hn(D,X),X}})).apply(this,arguments)}function hn(D,S){return zu.apply(this,arguments)}function zu(){return(zu=(0,O.Z)(function*(D,S){const P=bi(D),X=(yield Gl()).transaction(Ui,"readwrite");return yield X.objectStore(Ui).put(S,P),yield X.done,S})).apply(this,arguments)}function Us(D){return qu.apply(this,arguments)}function qu(){return(qu=(0,O.Z)(function*(D){const S=bi(D),$=(yield Gl()).transaction(Ui,"readwrite");yield $.objectStore(Ui).delete(S),yield $.done})).apply(this,arguments)}function bi({appConfig:D}){return D.appId}const Yn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vt(D,S){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,O.Z)(function*(D,S){var P;const $=yield nl(D),X=Ne(S),ce={method:"POST",headers:$,body:JSON.stringify(X)};let be;try{be=yield(yield fetch(vo(D.appConfig),ce)).json()}catch(ze){throw Yn.create("token-subscribe-failed",{errorInfo:null===(P=ze)||void 0===P?void 0:P.toString()})}if(be.error)throw Yn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw Yn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function fg(D,S){return el.apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(D,S){var P;const $=yield nl(D),X=Ne(S.subscriptionOptions),ce={method:"PATCH",headers:$,body:JSON.stringify(X)};let be;try{be=yield(yield fetch(`${vo(D.appConfig)}/${S.token}`,ce)).json()}catch(ze){throw Yn.create("token-update-failed",{errorInfo:null===(P=ze)||void 0===P?void 0:P.toString()})}if(be.error)throw Yn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw Yn.create("token-update-no-token");return be.token})).apply(this,arguments)}function cd(D,S){return tl.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(D,S){var P;const X={method:"DELETE",headers:yield nl(D)};try{const be=yield(yield fetch(`${vo(D.appConfig)}/${S}`,X)).json();if(be.error)throw Yn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ce){throw Yn.create("token-unsubscribe-failed",{errorInfo:null===(P=ce)||void 0===P?void 0:P.toString()})}})).apply(this,arguments)}function vo({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function nl(D){return ia.apply(this,arguments)}function ia(){return(ia=(0,O.Z)(function*({appConfig:D,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Ne({p256dh:D,auth:S,endpoint:P,vapidKey:$}){const X={web:{endpoint:P,auth:S,p256dh:D}};return $!==Vs&&(X.web.applicationPubKey=$),X}const en=6048e5;function Uh(D){return sa.apply(this,arguments)}function sa(){return(sa=(0,O.Z)(function*(D){const S=yield Bh(D.swRegistration,D.vapidKey),P={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:ms(S.getKey("auth")),p256dh:ms(S.getKey("p256dh"))},$=yield ra(D.firebaseDependencies);if($){if(pg($.subscriptionOptions,P))return Date.now()>=$.createTime+en?zl(D,{token:$.token,createTime:Date.now(),subscriptionOptions:P}):$.token;try{yield cd(D.firebaseDependencies,$.token)}catch(X){console.warn(X)}return ql(D.firebaseDependencies,P)}return ql(D.firebaseDependencies,P)})).apply(this,arguments)}function fr(D){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(D){const S=yield ra(D.firebaseDependencies);S&&(yield cd(D.firebaseDependencies,S.token),yield Us(D.firebaseDependencies));const P=yield D.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function zl(D,S){return ti.apply(this,arguments)}function ti(){return(ti=(0,O.Z)(function*(D,S){try{const P=yield fg(D.firebaseDependencies,S),$=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield hn(D.firebaseDependencies,$),P}catch(P){throw yield fr(D),P}})).apply(this,arguments)}function ql(D,S){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(D,S){const $={token:yield Vt(D,S),createTime:Date.now(),subscriptionOptions:S};return yield hn(D,$),$.token})).apply(this,arguments)}function Bh(D,S){return rl.apply(this,arguments)}function rl(){return(rl=(0,O.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ci(S)})})).apply(this,arguments)}function pg(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function wo(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function pr(D,S){if(!S.notification)return;D.notification={};const P=S.notification.title;P&&(D.notification.title=P);const $=S.notification.body;$&&(D.notification.body=$);const X=S.notification.image;X&&(D.notification.image=X);const ce=S.notification.icon;ce&&(D.notification.icon=ce)}(S,D),function Ji(D,S){!S.data||(D.data=S.data)}(S,D),function il(D,S){var P,$,X,ce,be;if(!(S.fcmOptions||null!==(P=S.notification)&&void 0!==P&&P.click_action))return;D.fcmOptions={};const ze=null!==(X=null===($=S.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==X?X:null===(ce=S.notification)||void 0===ce?void 0:ce.click_action;ze&&(D.fcmOptions.link=ze);const vt=null===(be=S.fcmOptions)||void 0===be?void 0:be.analytics_label;vt&&(D.fcmOptions.analyticsLabel=vt)}(S,D),S}function sl(D){return"object"==typeof D&&!!D&&Wl in D}function _s(D,S){const P=[];for(let $=0;$<D.length;$++)P.push(D.charAt($)),$<S.length&&P.push(S.charAt($));return P.join("")}function Ku(D){return Yn.create("missing-app-config-values",{valueName:D})}_s("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_s("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hd{constructor(S,P,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function dd(D){if(!D||!D.options)throw Ku("App Configuration Object");if(!D.name)throw Ku("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=D;for(const $ of S)if(!P[$])throw Ku($);return{appName:D.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:X,installations:P,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Hh(D){return la.apply(this,arguments)}function la(){return(la=(0,O.Z)(function*(D){var S;try{D.swRegistration=yield navigator.serviceWorker.register(Br,{scope:ea}),D.swRegistration.update().catch(()=>{})}catch(P){throw Yn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=P)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Zu(D,S){return ol.apply(this,arguments)}function ol(){return(ol=(0,O.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield Hh(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Yn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Yu(D,S){return al.apply(this,arguments)}function al(){return(al=(0,O.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=Vs)})).apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,S){if(!navigator)throw Yn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Yn.create("permission-blocked");return yield Yu(D,S?.vapidKey),yield Zu(D,S?.serviceWorkerRegistration),Uh(D)})).apply(this,arguments)}function jh(D,S,P){return ll.apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(D,S,P){const $=$h(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:P[Wl],message_name:P[Wu],message_time:P[ld],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $h(D){switch(D){case Ei.NOTIFICATION_CLICKED:return"notification_open";case Ei.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bs(){return(Bs=(0,O.Z)(function*(D,S){const P=S.data;if(!P.isFirebaseMessaging)return;D.onMessageHandler&&P.messageType===Ei.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(wo(P)):D.onMessageHandler.next(wo(P)));const $=P.data;sl($)&&"1"===$[ta]&&(yield jh(D,P.messageType,$))})).apply(this,arguments)}const Hs="@firebase/messaging",Wn=D=>{const S=new hd(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function pd(D,S){return Bs.apply(this,arguments)}(S,P)),S},ys=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:$=>function fd(D,S){return ua.apply(this,arguments)}(S,$)}};function md(){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,O.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bn(){(0,le._registerComponent)(new we.wA("messaging",Wn,"PUBLIC")),(0,le._registerComponent)(new we.wA("messaging-internal",ys,"PRIVATE")),(0,le.registerVersion)(Hs,"0.11.0"),(0,le.registerVersion)(Hs,"0.11.0","esm2017")}();const ha="analytics",yd="firebase_id",tc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vd="https://www.googletagmanager.com/gtag/js",Qn=new ge.Yd("@firebase/analytics");function Zl(D){return Promise.all(D.map(S=>S.catch(P=>P)))}function Yl(D,S){const P=document.createElement("script");P.src=`${vd}?l=${D}&id=${S}`,P.async=!0,document.head.appendChild(P)}function Gh(D,S,P,$,X,ce){return ul.apply(this,arguments)}function ul(){return(ul=(0,O.Z)(function*(D,S,P,$,X,ce){const be=$[X];try{if(be)yield S[be];else{const vt=(yield Zl(P)).find(At=>At.measurementId===X);vt&&(yield S[vt.appId])}}catch(ze){Qn.error(ze)}D("config",X,ce)})).apply(this,arguments)}function vs(D,S,P,$,X){return cl.apply(this,arguments)}function cl(){return(cl=(0,O.Z)(function*(D,S,P,$,X){try{let ce=[];if(X&&X.send_to){let be=X.send_to;Array.isArray(be)||(be=[be]);const ze=yield Zl(P);for(const vt of be){const At=ze.find(Et=>Et.measurementId===vt),jt=At&&S[At.appId];if(!jt){ce=[];break}ce.push(jt)}}0===ce.length&&(ce=Object.values(S)),yield Promise.all(ce),D("event",$,X||{})}catch(ce){Qn.error(ce)}})).apply(this,arguments)}function wd(D){const S=window.document.getElementsByTagName("script");for(const P of Object.values(S))if(P.src&&P.src.includes(vd)&&P.src.includes(D))return P;return null}const gr=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),hl=new class rc{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function fa(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Kh(D){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,O.Z)(function*(D){var S;const{appId:P,apiKey:$}=D,X={method:"GET",headers:fa($)},ce=tc.replace("{app-id}",P),be=yield fetch(ce,X);if(200!==be.status&&304!==be.status){let ze="";try{const vt=yield be.json();null!==(S=vt.error)&&void 0!==S&&S.message&&(ze=vt.error.message)}catch{}throw gr.create("config-fetch-failed",{httpStatus:be.status,responseMessage:ze})}return be.json()})).apply(this,arguments)}function Ed(D){return di.apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(D,S=hl,P){const{appId:$,apiKey:X,measurementId:ce}=D.options;if(!$)throw gr.create("no-app-id");if(!X){if(ce)return{measurementId:ce,appId:$};throw gr.create("no-api-key")}const be=S.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new fl;return setTimeout((0,O.Z)(function*(){ze.abort()}),void 0!==P?P:6e4),Id({appId:$,apiKey:X,measurementId:ce},be,ze,S)})).apply(this,arguments)}function Id(D,S,P){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:P},$,X=hl){var ce,be;const{appId:ze,measurementId:vt}=D;try{yield ic($,S)}catch(At){if(vt)return Qn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vt} provided in the "measurementId" field in the local Firebase config. [${null===(ce=At)||void 0===ce?void 0:ce.message}]`),{appId:ze,measurementId:vt};throw At}try{const At=yield Kh(D);return X.deleteThrottleMetadata(ze),At}catch(At){const jt=At;if(!Jl(jt)){if(X.deleteThrottleMetadata(ze),vt)return Qn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${vt} provided in the "measurementId" field in the local Firebase config. [${jt?.message}]`),{appId:ze,measurementId:vt};throw At}const Et=503===Number(null===(be=jt?.customData)||void 0===be?void 0:be.httpStatus)?(0,he.$s)(P,X.intervalMillis,30):(0,he.$s)(P,X.intervalMillis),lr={throttleEndTimeMillis:Date.now()+Et,backoffCount:P+1};return X.setThrottleMetadata(ze,lr),Qn.debug(`Calling attemptFetch again in ${Et} millis`),Id(D,lr,$,X)}})).apply(this,arguments)}function ic(D,S){return new Promise((P,$)=>{const X=Math.max(S-Date.now(),0),ce=setTimeout(P,X);D.addEventListener(()=>{clearTimeout(ce),$(gr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Jl(D){if(!(D instanceof he.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class fl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Eo,eu;function pa(){return(pa=(0,O.Z)(function*(D,S,P,$,X){if(X&&X.global)D("event",P,$);else{const ce=yield S;D("event",P,Object.assign(Object.assign({},$),{send_to:ce}))}})).apply(this,arguments)}function _a(D){eu=D}function sc(D){Eo=D}function $s(){return ya.apply(this,arguments)}function ya(){return(ya=(0,O.Z)(function*(){var D;if(!(0,he.hl)())return Qn.warn(gr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(S){return Qn.warn(gr.create("indexeddb-unavailable",{errorInfo:null===(D=S)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function va(){return(va=(0,O.Z)(function*(D,S,P,$,X,ce,be){var ze;const vt=Ed(D);vt.then(Kr=>{P[Kr.measurementId]=Kr.appId,D.options.measurementId&&Kr.measurementId!==D.options.measurementId&&Qn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Kr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kr=>Qn.error(Kr)),S.push(vt);const At=$s().then(Kr=>{if(Kr)return $.getId()}),[jt,Et]=yield Promise.all([vt,At]);wd(ce)||Yl(ce,jt.measurementId),eu&&(X("consent","default",eu),_a(void 0)),X("js",new Date);const lr=null!==(ze=be?.config)&&void 0!==ze?ze:{};return lr.origin="firebase",lr.update=!0,null!=Et&&(lr[yd]=Et),X("config",jt.measurementId,lr),Eo&&(X("set",Eo),sc(void 0)),jt.measurementId})).apply(this,arguments)}class tu{constructor(S){this.app=S}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},wa=[];const bo={};let Ia,es,Ea="dataLayer",Cd=!1;function Qh(D,S,P){!function gg(){const D=[];if((0,he.ru)()&&D.push("This is a browser extension environment."),(0,he.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map(($,X)=>`(${X+1}) ${$}`).join(" "),P=gr.create("invalid-analytics-context",{errorInfo:S});Qn.warn(P.message)}}();const $=D.options.appId;if(!$)throw gr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw gr.create("no-api-key");Qn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[$])throw gr.create("already-exists",{id:$});if(!Cd){!function Ql(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(Ea);const{wrappedGtag:ce,gtagCore:be}=function dl(D,S,P,$,X){let ce=function(...be){window[$].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ce=window[X]),window[X]=function nc(D,S,P,$){function ce(){return(ce=(0,O.Z)(function*(be,ze,vt){try{"event"===be?yield vs(D,S,P,ze,vt):"config"===be?yield Gh(D,S,P,$,ze,vt):"consent"===be?D("consent","update",vt):D("set",ze)}catch(At){Qn.error(At)}})).apply(this,arguments)}return function X(be,ze,vt){return ce.apply(this,arguments)}}(ce,D,S,P),{gtagCore:ce,wrappedGtag:window[X]}}(zr,wa,bo,Ea,"gtag");es=ce,Ia=be,Cd=!0}return zr[$]=function Yh(D,S,P,$,X,ce,be){return va.apply(this,arguments)}(D,wa,bo,S,Ia,Ea,P),new tu(D)}function _y(){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,O.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const ft="@firebase/analytics";!function Vn(){(0,le._registerComponent)(new we.wA(ha,(S,{options:P})=>Qh(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,le._registerComponent)(new we.wA("analytics-internal",function D(S){try{const P=S.getProvider(ha).getImmediate();return{logEvent:($,X,ce)=>function yn(D,S,P,$){D=(0,he.m9)(D),function pl(D,S,P,$,X){return pa.apply(this,arguments)}(es,zr[D.app.options.appId],S,P,$).catch(X=>Qn.error(X))}(P,$,X,ce)}}catch(P){throw gr.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,le.registerVersion)(ft,"0.8.4"),(0,le.registerVersion)(ft,"0.8.4","esm2017")}();var Es=V(4408),mr=V(7565);const Dd=new class Do extends mr.v{}(class Co extends Es.o{constructor(S,P){super(S,P),this.scheduler=S,this.work=P}schedule(S,P=0){return P>0?super.schedule(S,P):(this.delay=P,this.state=S,this.scheduler.flush(this),this)}execute(S,P){return P>0||this.closed?super.execute(S,P):this._execute(S,P)}requestAsyncId(S,P,$=0){return null!=$&&$>0||null==$&&this.delay>0?super.requestAsyncId(S,P,$):(S.flush(this),0)}});var Xh=V(4986),Ws=V(9751),Sd=V(8505),Gs=V(9468),at=V(5363);const ac=new h.GfV("7.5.0"),ns="__angularfire_symbol__analyticsIsSupportedValue",nu="__angularfire_symbol__analyticsIsSupported",ml="__angularfire_symbol__remoteConfigIsSupportedValue",Hn="__angularfire_symbol__remoteConfigIsSupported",_l="__angularfire_symbol__messagingIsSupportedValue",ru="__angularfire_symbol__messagingIsSupported";function Da(D,S,P){if(S){if(1===S.length)return S[0];const ce=S.filter(be=>be.app===P);if(1===ce.length)return ce[0]}return P.container.getProvider(D).getImmediate({optional:!0})}globalThis[nu]||(globalThis[nu]=_y().then(D=>globalThis[ns]=D).catch(()=>globalThis[ns]=!1)),globalThis[ru]||(globalThis[ru]=md().then(D=>globalThis[_l]=D).catch(()=>globalThis[_l]=!1)),globalThis[Hn]||(globalThis[Hn]=gy().then(D=>globalThis[ml]=D).catch(()=>globalThis[ml]=!1));const rs=(D,S)=>{const P=S?[S]:(0,G.C6)(),$=[];return P.forEach(X=>{X.container.getProvider(D).instances.forEach(be=>{$.includes(be)||$.push(be)})}),$};function Hi(){}class su{constructor(S,P=Dd){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,$){const X=this.zone;return this.delegate.schedule(function(be){X.runGuarded(()=>{S.apply(this,[be])})},P,$)}}class zs{constructor(S){this.zone=S,this.task=null}call(S,P){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hi,{},Hi,Hi)),P.pipe((0,Sd.b)({next:$,complete:$,error:$})).subscribe(S).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let To=(()=>{class D{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new su(Zone.current)),this.insideAngular=P.run(()=>new su(Zone.current,Xh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(P){return new(P||D)(h.LFG(h.R0b))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function qr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function qs(D){return qr().ngZone.runOutsideAngular(()=>D())}function Sn(D){return qr().ngZone.run(()=>D())}function Xn(D){return qr(),function Pn(D){return function(P){return(P=P.lift(new zs(D.ngZone))).pipe((0,Gs.R)(D.outsideAngular),(0,at.Q)(D.insideAngular))}}(qr())(D)}const Is=(D,S)=>function(){const $=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),Sn(()=>D.apply(void 0,$))},Di=(D,S)=>function(){let P;const $=arguments;for(let ce=0;ce<arguments.length;ce++)"function"==typeof $[ce]&&(S&&(P||(P=Sn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hi,{},Hi,Hi)))),$[ce]=Is($[ce],P));const X=qs(()=>D.apply(this,$));if(!S){if(X instanceof Ws.y){const ce=qr();return X.pipe((0,Gs.R)(ce.outsideAngular),(0,at.Q)(ce.insideAngular))}return Sn(()=>X)}return X instanceof Ws.y?X.pipe(Xn):X instanceof Promise?Sn(()=>new Promise((ce,be)=>X.then(ze=>Sn(()=>ce(ze)),ze=>Sn(()=>be(ze))))):"function"==typeof X&&P?function(){return setTimeout(()=>{P&&"scheduled"===P.state&&P.invoke()},10),X.apply(this,arguments)}:Sn(()=>X)}},8247:(gt,xe,V)=>{V.d(xe,{$:()=>vo,A:()=>q,B:()=>Le,G:()=>ho,H:()=>li,J:()=>gs,L:()=>K,M:()=>$l,N:()=>ad,P:()=>Xh,Q:()=>Wl,R:()=>mg,T:()=>Wu,U:()=>Vs,V:()=>Ei,W:()=>ms,X:()=>hg,Y:()=>Ja,Z:()=>Vt,_:()=>fg,a:()=>js,a0:()=>Uh,a1:()=>fr,a2:()=>zl,a3:()=>ql,a4:()=>Bh,a5:()=>pg,a6:()=>pr,a7:()=>Ji,a8:()=>sl,a9:()=>_s,aA:()=>z,aB:()=>ze,aC:()=>Sn,aD:()=>qs,aE:()=>wt,aI:()=>fa,aL:()=>ta,aa:()=>Hh,ab:()=>Zu,ac:()=>Yu,af:()=>jh,ag:()=>$h,ah:()=>pd,ak:()=>Ui,al:()=>Ju,an:()=>vd,ao:()=>ul,ap:()=>Ie,aq:()=>Be,ar:()=>lt,as:()=>Je,at:()=>vl,au:()=>Hr,av:()=>Ot,aw:()=>Ve,ax:()=>ae,ay:()=>lr,az:()=>re,b:()=>gr,c:()=>Hn,d:()=>ef,e:()=>ru,f:()=>Xn,g:()=>P,h:()=>Di,i:()=>ya,j:()=>ce,k:()=>is,l:()=>pn,m:()=>lf,n:()=>uf,o:()=>me,r:()=>Es,s:()=>ts,u:()=>Dd});var h=V(5861),G=V(2090),O=V(9681),le=V(1877),he=V(655),we=V(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Le=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ae=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ot=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new le.Yd("@firebase/auth");function nt(w,...m){ve.logLevel<=le.in.ERROR&&ve.error(`Auth (${O.SDK_VERSION}): ${w}`,...m)}function Je(w,...m){throw Ke(w,...m)}function Ve(w,...m){return Ke(w,...m)}function ke(w,m,_){const I=Object.assign(Object.assign({},Ae()),{[m]:_});return new G.LL("auth","Firebase",I).create(m,{appName:w.name})}function Se(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Je(w,"argument-error"),ke(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(w,...m){if("string"!=typeof w){const _=m[0],I=[...m.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return ot.create(w,...m)}function ae(w,m,..._){if(!w)throw Ke(m,..._)}function fe(w){const m="INTERNAL ASSERTION FAILED: "+w;throw nt(m),new Error(m)}function Ie(w,m){w||fe(m)}const ee=new Map;function re(w){Ie(w instanceof Function,"Expected a class definition");let m=ee.get(w);return m?(Ie(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,ee.set(w,m),m)}function He(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function je(){return"http:"===mt()||"https:"===mt()}function mt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ze{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ie(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return function dn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,G.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function En(w,m){Ie(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class kn{static initialize(m,_,I){this.fetchImpl=m,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void fe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void fe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void fe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const an={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ln=new Ze(3e4,6e4);function Jt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function $t(w,m,_,I){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(w,m,_,I,M={}){return qi(w,M,(0,h.Z)(function*(){let L={},ie={};I&&("GET"===m?ie=I:L={body:JSON.stringify(I)});const Pe=(0,G.xO)(Object.assign({key:w.config.apiKey},ie)).slice(1),st=yield w._getAdditionalHeaders();return st["Content-Type"]="application/json",w.languageCode&&(st["X-Firebase-Locale"]=w.languageCode),kn.fetch()(Zi(w,w.config.apiHost,_,Pe),Object.assign({method:m,headers:st,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function qi(w,m,_){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(w,m,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},an),m);try{const M=new Xr(w),L=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const ie=yield L.json();if("needConfirmation"in ie)throw Zn(w,"account-exists-with-different-credential",ie);if(L.ok&&!("errorMessage"in ie))return ie;{const Pe=L.ok?ie.errorMessage:ie.error.message,[st,Ct]=Pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw Zn(w,"credential-already-in-use",ie);if("EMAIL_EXISTS"===st)throw Zn(w,"email-already-in-use",ie);if("USER_DISABLED"===st)throw Zn(w,"user-disabled",ie);const Xt=I[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(Ct)throw ke(w,Xt,Ct);Je(w,Xt)}}catch(M){if(M instanceof G.ZR)throw M;Je(w,"network-request-failed")}})).apply(this,arguments)}function Gn(w,m,_,I){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,h.Z)(function*(w,m,_,I,M={}){const L=yield $t(w,m,_,I,M);return"mfaPendingCredential"in L&&Je(w,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Zi(w,m,_,I){const M=`${m}${_}?${I}`;return w.config.emulator?En(w.config,M):`${w.config.apiScheme}://${M}`}class Xr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Ve(this.auth,"network-request-failed")),ln.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(w,m,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const M=Ve(w,m,I);return M.customData._tokenResponse=_,M}function Yi(){return(Yi=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Xe(w,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ir(w,m){return xn.apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Tr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function On(){return(On=(0,h.Z)(function*(w,m=!1){const _=(0,G.m9)(w),I=yield _.getIdToken(m),M=_t(I);ae(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const L="object"==typeof M.firebase?M.firebase:void 0,ie=L?.sign_in_provider;return{claims:M,token:I,authTime:Tr(Tn(M.auth_time)),issuedAtTime:Tr(Tn(M.iat)),expirationTime:Tr(Tn(M.exp)),signInProvider:ie||null,signInSecondFactor:L?.sign_in_second_factor||null}})).apply(this,arguments)}function Tn(w){return 1e3*Number(w)}function _t(w){var m;const[_,I,M]=w.split(".");if(void 0===_||void 0===I||void 0===M)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,G.tV)(I);return L?JSON.parse(L):(nt("Failed to decode base64 JWT payload"),null)}catch(L){return nt("Caught error parsing JWT payload as JSON",null===(m=L)||void 0===m?void 0:m.toString()),null}}function kt(w,m){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(I){throw I instanceof G.ZR&&sr(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function sr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Wr{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(m);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),I)}iteration(){var m=this;return(0,h.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(_=I)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class xt{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tr(this.lastLoginAt),this.creationTime=Tr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gr(w){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,h.Z)(function*(w){var m;const _=w.auth,I=yield w.getIdToken(),M=yield kt(w,ir(_,{idToken:I}));ae(M?.users.length,_,"internal-error");const L=M.users[0];w._notifyReloadListener(L);const ie=null!==(m=L.providerUserInfo)&&void 0!==m&&m.length?Un(L.providerUserInfo):[],Pe=Ir(w.providerData,ie),Xt=!!w.isAnonymous&&!(w.email&&L.passwordHash||Pe?.length),An={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Pe,metadata:new xt(L.createdAt,L.lastLoginAt),isAnonymous:Xt};Object.assign(w,An)})).apply(this,arguments)}function nn(){return(nn=(0,h.Z)(function*(w){const m=(0,G.m9)(w);yield Gr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Ir(w,m){return[...w.filter(I=>!m.some(M=>M.providerId===I.providerId)),...m]}function Un(w){return w.map(m=>{var{providerId:_}=m,I=(0,he._T)(m,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Re(){return(Re=(0,h.Z)(function*(w,m){const _=yield qi(w,{},(0,h.Z)(function*(){const I=(0,G.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:L}=w.config,ie=Zi(w,M,"/v1/token",`key=${L}`),Pe=yield w._getAdditionalHeaders();return Pe["Content-Type"]="application/x-www-form-urlencoded",kn.fetch()(ie,{method:"POST",headers:Pe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class it{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ae(m.idToken,"internal-error"),ae(typeof m.idToken<"u","internal-error"),ae(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function yt(w){const m=_t(w);return ae(m,"internal-error"),ae(typeof m.exp<"u","internal-error"),ae(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var I=this;return(0,h.Z)(function*(){return ae(!I.accessToken||I.refreshToken,m,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(m,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var I=this;return(0,h.Z)(function*(){const{accessToken:M,refreshToken:L,expiresIn:ie}=yield function rt(w,m){return Re.apply(this,arguments)}(m,_);I.updateTokensAndExpiration(M,L,Number(ie))})()}updateTokensAndExpiration(m,_,I){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(m,_){const{refreshToken:I,accessToken:M,expirationTime:L}=_,ie=new it;return I&&(ae("string"==typeof I,"internal-error",{appName:m}),ie.refreshToken=I),M&&(ae("string"==typeof M,"internal-error",{appName:m}),ie.accessToken=M),L&&(ae("number"==typeof L,"internal-error",{appName:m}),ie.expirationTime=L),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new it,this.toJSON())}_performRefresh(){return fe("not implemented")}}function Dt(w,m){ae("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class Tt{constructor(m){var{uid:_,auth:I,stsTokenManager:M}=m,L=(0,he._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new xt(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,h.Z)(function*(){const I=yield kt(_,_.stsTokenManager.getToken(_.auth,m));return ae(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(m){return function Mn(w){return On.apply(this,arguments)}(this,m)}reload(){return function ai(w){return nn.apply(this,arguments)}(this)}_assign(m){this!==m&&(ae(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Tt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var I=this;return(0,h.Z)(function*(){let M=!1;m.idToken&&m.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield Gr(I)),yield I.auth._persistUserIfCurrent(I),M&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var m=this;return(0,h.Z)(function*(){const _=yield m.getIdToken();return yield kt(m,function Vi(w,m){return Yi.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var I,M,L,ie,Pe,st,Ct,Xt;const An=null!==(I=_.displayName)&&void 0!==I?I:void 0,Ti=null!==(M=_.email)&&void 0!==M?M:void 0,ji=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,El=null!==(ie=_.photoURL)&&void 0!==ie?ie:void 0,dc=null!==(Pe=_.tenantId)&&void 0!==Pe?Pe:void 0,Md=null!==(st=_._redirectEventId)&&void 0!==st?st:void 0,Ta=null!==(Ct=_.createdAt)&&void 0!==Ct?Ct:void 0,Cg=null!==(Xt=_.lastLoginAt)&&void 0!==Xt?Xt:void 0,{uid:Il,emailVerified:cf,isAnonymous:Dg,providerData:bl,stsTokenManager:Sa}=_;ae(Il&&Sa,m,"internal-error");const Tg=it.fromJSON(this.name,Sa);ae("string"==typeof Il,m,"internal-error"),Dt(An,m.name),Dt(Ti,m.name),ae("boolean"==typeof cf,m,"internal-error"),ae("boolean"==typeof Dg,m,"internal-error"),Dt(ji,m.name),Dt(El,m.name),Dt(dc,m.name),Dt(Md,m.name),Dt(Ta,m.name),Dt(Cg,m.name);const Pd=new Tt({uid:Il,auth:m,email:Ti,emailVerified:cf,displayName:An,isAnonymous:Dg,photoURL:El,phoneNumber:ji,tenantId:dc,stsTokenManager:Tg,createdAt:Ta,lastLoginAt:Cg});return bl&&Array.isArray(bl)&&(Pd.providerData=bl.map(hu=>Object.assign({},hu))),Md&&(Pd._redirectEventId=Md),Pd}static _fromIdTokenResponse(m,_,I=!1){return(0,h.Z)(function*(){const M=new it;M.updateFromServerResponse(_);const L=new Tt({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:I});return yield Gr(L),L})()}}const K=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,I){var M=this;return(0,h.Z)(function*(){M.storage[_]=I})()}_get(_){var I=this;return(0,h.Z)(function*(){const M=I.storage[_];return void 0===M?null:M})()}_remove(_){var I=this;return(0,h.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function z(w,m,_){return`firebase:${w}:${m}:${_}`}class J{constructor(m,_,I){this.persistence=m,this.auth=_,this.userKey=I;const{config:M,name:L}=this.auth;this.fullUserKey=z(this.userKey,M.apiKey,L),this.fullPersistenceKey=z("persistence",M.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,h.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Tt._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,h.Z)(function*(){if(_.persistence===m)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,I="authUser"){return(0,h.Z)(function*(){if(!_.length)return new J(re(K),m,I);const M=(yield Promise.all(_.map(function(){var Ct=(0,h.Z)(function*(Xt){if(yield Xt._isAvailable())return Xt});return function(Xt){return Ct.apply(this,arguments)}}()))).filter(Ct=>Ct);let L=M[0]||re(K);const ie=z(I,m.config.apiKey,m.name);let Pe=null;for(const Ct of _)try{const Xt=yield Ct._get(ie);if(Xt){const An=Tt._fromJSON(m,Xt);Ct!==L&&(Pe=An),L=Ct;break}}catch{}const st=M.filter(Ct=>Ct._shouldAllowMigration);return L._shouldAllowMigration&&st.length?(L=st[0],Pe&&(yield L._set(ie,Pe.toJSON())),yield Promise.all(_.map(function(){var Ct=(0,h.Z)(function*(Xt){if(Xt!==L)try{yield Xt._remove(ie)}catch{}});return function(Xt){return Ct.apply(this,arguments)}}())),new J(L,m,I)):new J(L,m,I)})()}}function W(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Fe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(N(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(ut(m))return"Blackberry";if(Me(m))return"Webos";if(H(m))return"Safari";if((m.includes("chrome/")||se(m))&&!m.includes("edge/"))return"Chrome";if(lt(m))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function N(w=(0,G.z$)()){return/firefox\//i.test(w)}function H(w=(0,G.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function se(w=(0,G.z$)()){return/crios\//i.test(w)}function Fe(w=(0,G.z$)()){return/iemobile/i.test(w)}function lt(w=(0,G.z$)()){return/android/i.test(w)}function ut(w=(0,G.z$)()){return/blackberry/i.test(w)}function Me(w=(0,G.z$)()){return/webos/i.test(w)}function Be(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Ot(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function bn(w=(0,G.z$)()){return Be(w)||lt(w)||Me(w)||ut(w)||/windows phone/i.test(w)||Fe(w)}function Ln(w,m=[]){let _;switch(w){case"Browser":_=W((0,G.z$)());break;case"Worker":_=`${W((0,G.z$)())}-${w}`;break;default:_=w}const I=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${I}`}class uo{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const I=L=>new Promise((ie,Pe)=>{try{ie(m(L))}catch(st){Pe(st)}});I.onAbort=_,this.queue.push(I);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,h.Z)(function*(){var I;if(_.auth.currentUser===m)return;const M=[];try{for(const L of _.queue)yield L(m),L.onAbort&&M.push(L.onAbort)}catch(L){M.reverse();for(const ie of M)try{ie()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=L)||void 0===I?void 0:I.message})}})()}}class Zo{constructor(m,_,I){this.app=m,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new co(this),this.idTokenSubscription=new co(this),this.beforeStateQueue=new uo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ot,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(m,_){var I=this;return _&&(this._popupRedirectResolver=re(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var M,L;if(!I._deleted&&(I.persistenceManager=yield J.create(I,m),!I._deleted)){if(null!==(M=I._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(L=I.currentUser)||void 0===L?void 0:L.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,h.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,h.Z)(function*(){var I;const M=yield _.assertedPersistence.getCurrentUser();let L=M,ie=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Pe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,st=L?._redirectEventId,Ct=yield _.tryRedirectSignIn(m);(!Pe||Pe===st)&&Ct?.user&&(L=Ct.user,ie=!0)}if(!L)return _.directlySetCurrentUser(null);if(!L._redirectEventId){if(ie)try{yield _.beforeStateQueue.runMiddleware(L)}catch(Pe){L=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Pe))}return L?_.reloadAndSetCurrentUserOrClear(L):_.directlySetCurrentUser(null)}return ae(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===L._redirectEventId?_.directlySetCurrentUser(L):_.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(m){var _=this;return(0,h.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,h.Z)(function*(){var I;try{yield Gr(m)}catch(M){if("auth/network-request-failed"!==(null===(I=M)||void 0===I?void 0:I.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Kt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,h.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,h.Z)(function*(){const I=m?(0,G.m9)(m):null;return I&&ae(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(m,_=!1){var I=this;return(0,h.Z)(function*(){if(!I._deleted)return m&&ae(I.tenantId===m.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(m)),I.queue((0,h.Z)(function*(){yield I.directlySetCurrentUser(m),I.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,h.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(re(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new G.LL("auth","Firebase",m())}onAuthStateChanged(m,_,I){return this.registerStateListener(this.authStateSubscription,m,_,I)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,I){return this.registerStateListener(this.idTokenSubscription,m,_,I)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var I=this;return(0,h.Z)(function*(){const M=yield I.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const I=m&&re(m)||_._popupRedirectResolver;ae(I,_,"argument-error"),_.redirectPersistenceManager=yield J.create(_,[re(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,h.Z)(function*(){var I,M;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,h.Z)(function*(){if(m===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,I,M){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),ie=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(ie,this,"internal-error"),ie.then(()=>L(this.currentUser)),"function"==typeof _?m.addObserver(_,I,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==m&&_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh(),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Ln(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,h.Z)(function*(){var _;const I={"X-Client-Version":m.clientVersion};m.app.options.appId&&(I["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(I["X-Firebase-Client"]=M),I})()}}function wt(w){return(0,G.m9)(w)}class co{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,G.ne)(_=>this.observer=_)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ho(w,m,_){const I=wt(w);ae(I._canInitEmulator,I,"emulator-config-failed"),ae(/^https?:\/\//.test(m),I,"invalid-emulator-scheme");const M=!!_?.disableWarnings,L=jl(m),{host:ie,port:Pe}=function hs(w){const m=jl(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(I);if(M){const L=M[1];return{host:L,port:or(I.substr(L.length+1))}}{const[L,ie]=I.split(":");return{host:L,port:or(ie)}}}(m);I.config.emulator={url:`${L}//${ie}${null===Pe?"":`:${Pe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ie,port:Pe,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function fo(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function jl(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function or(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class li{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return fe("not implemented")}_getIdTokenResponse(m){return fe("not implemented")}_linkToIdToken(m,_){return fe("not implemented")}_getReauthenticationResolver(m){return fe("not implemented")}}function yi(w,m){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:resetPassword",Jt(w,m))})).apply(this,arguments)}function Hu(w,m){return mn.apply(this,arguments)}function mn(){return(mn=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Lh(w,m){return za.apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:update",Jt(w,m))})).apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signInWithPassword",Jt(w,m))})).apply(this,arguments)}function fs(w,m){return go.apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:sendOobCode",Jt(w,m))})).apply(this,arguments)}function ps(w,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,h.Z)(function*(w,m){return fs(w,m)})).apply(this,arguments)}function Fh(w,m){return hr.apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(w,m){return fs(w,m)})).apply(this,arguments)}function vi(w,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(w,m){return fs(w,m)})).apply(this,arguments)}function ju(w,m){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(w,m){return fs(w,m)})).apply(this,arguments)}function $u(){return($u=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signInWithEmailLink",Jt(w,m))})).apply(this,arguments)}function Za(){return(Za=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signInWithEmailLink",Jt(w,m))})).apply(this,arguments)}class mo extends li{constructor(m,_,I,M=null){super("password",I),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new mo(m,_,"password")}static _fromEmailAndCode(m,_,I=null){return new mo(m,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return function qa(w,m){return po.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ui(w,m){return $u.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Je(m,"internal-error")}})()}_linkToIdToken(m,_){var I=this;return(0,h.Z)(function*(){switch(I.signInMethod){case"password":return Hu(m,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function og(w,m){return Za.apply(this,arguments)}(m,{idToken:_,email:I._email,oobCode:I._password});default:Je(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function _o(w,m){return wi.apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signInWithIdp",Jt(w,m))})).apply(this,arguments)}class gs extends li{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new gs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Je("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M}=_,L=(0,he._T)(_,["providerId","signInMethod"]);if(!I||!M)return null;const ie=new gs(I,M);return ie.idToken=L.idToken||void 0,ie.accessToken=L.accessToken||void 0,ie.secret=L.secret,ie.nonce=L.nonce,ie.pendingToken=L.pendingToken||null,ie}_getIdTokenResponse(m){return _o(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,_o(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,_o(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,G.xO)(_)}return m}}function lg(w,m){return nd.apply(this,arguments)}function nd(){return(nd=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:sendVerificationCode",Jt(w,m))})).apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,m))})).apply(this,arguments)}function rd(){return(rd=(0,h.Z)(function*(w,m){const _=yield Gn(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,m));if(_.temporaryProof)throw Zn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const cg={USER_NOT_FOUND:"user-not-found"};function id(){return(id=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signInWithPhoneNumber",Jt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),cg)})).apply(this,arguments)}class Jo extends li{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Jo({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Jo({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function ug(w,m){return Ya.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Qo(w,m){return rd.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function dg(w,m){return id.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:I,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:I,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:L}=m;return I||_||M||L?new Jo({verificationId:_,verificationCode:I,phoneNumber:M,temporaryProof:L}):null}}class Xo{constructor(m){var _,I,M,L,ie,Pe;const st=(0,G.zd)((0,G.pd)(m)),Ct=null!==(_=st.apiKey)&&void 0!==_?_:null,Xt=null!==(I=st.oobCode)&&void 0!==I?I:null,An=function sd(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=st.mode)&&void 0!==M?M:null);ae(Ct&&Xt&&An,"argument-error"),this.apiKey=Ct,this.operation=An,this.code=Xt,this.continueUrl=null!==(L=st.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ie=st.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(Pe=st.tenantId)&&void 0!==Pe?Pe:null}static parseLink(m){const _=function od(w){const m=(0,G.zd)((0,G.pd)(w)).link,_=m?(0,G.zd)((0,G.pd)(m)).deep_link_id:null,I=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(I?(0,G.zd)((0,G.pd)(I)).link:null)||I||_||m||w}(m);try{return new Xo(_)}catch{return null}}}let $l=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return mo._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const M=Xo.parseLink(I);return ae(M,"argument-error"),mo._fromEmailAndCode(_,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Br{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class ea extends Br{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Vs extends ea{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return ae("providerId"in _&&"signInMethod"in _,"argument-error"),gs._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ae(m.idToken||m.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Vs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Vs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:M,pendingToken:L,nonce:ie,providerId:Pe}=m;if(!I&&!M&&!_&&!L||!Pe)return null;try{return new Vs(Pe)._credential({idToken:_,accessToken:I,nonce:ie,pendingToken:L})}catch{return null}}}let ad=(()=>{class w extends ea{constructor(){super("facebook.com")}static credential(_){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Wl=(()=>{class w extends ea{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:M}=_;if(!I&&!M)return null;try{return w.credential(I,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Wu=(()=>{class w extends ea{constructor(){super("github.com")}static credential(_){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ta extends li{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return _o(m,this.buildRequest())}_linkToIdToken(m,_){const I=this.buildRequest();return I.idToken=_,_o(m,I)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,_o(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:I,signInMethod:M,pendingToken:L}=_;return I&&M&&L&&I===M?new ta(I,L):null}static _create(m,_){return new ta(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ei extends Br{constructor(m){ae(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Ei.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Ei.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=ta.fromJSON(m);return ae(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:I}=m;if(!_||!I)return null;try{return ta._create(I,_)}catch{return null}}}let ms=(()=>{class w extends ea{constructor(){super("twitter.com")}static credential(_,I){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:M}=_;if(!I||!M)return null;try{return w.credential(I,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ci(w,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signUp",Jt(w,m))})).apply(this,arguments)}class Ii{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,I,M=!1){return(0,h.Z)(function*(){const L=yield Tt._fromIdTokenResponse(m,I,M),ie=na(I);return new Ii({user:L,providerId:ie,_tokenResponse:I,operationType:_})})()}static _forOperation(m,_,I){return(0,h.Z)(function*(){yield m._updateTokensIfNecessary(I,!0);const M=na(I);return new Ii({user:m,providerId:M,_tokenResponse:I,operationType:_})})()}}function na(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function hg(w){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,h.Z)(function*(w){var m;const _=wt(w);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Ii({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield ci(_,{returnSecureToken:!0}),M=yield Ii._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class qn extends G.ZR{constructor(m,_,I,M){var L;super(_.code,_.message),this.operationType=I,this.user=M,Object.setPrototypeOf(this,qn.prototype),this.customData={appName:m.name,tenantId:null!==(L=m.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(m,_,I,M){return new qn(m,_,I,M)}}function ud(w,m,_,I){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?qn._fromErrorAndOperation(w,L,m,I):L})}function Vh(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Ui(w,m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(w,m){const _=(0,G.m9)(w);yield Qi(!0,_,m);const{providerUserInfo:I}=yield Xe(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=Vh(I||[]);return _.providerData=_.providerData.filter(L=>M.has(L.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Gl(w,m){return ra.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(w,m,_=!1){const I=yield kt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return Ii._forOperation(w,"link",I)})).apply(this,arguments)}function Qi(w,m,_){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(w,m,_){yield Gr(m);const M=!1===w?"provider-already-linked":"no-such-provider";ae(Vh(m.providerData).has(_)===w,m.auth,M)})).apply(this,arguments)}function zu(w,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(w,m,_=!1){var I;const{auth:M}=w,L="reauthenticate";try{const ie=yield kt(w,ud(M,L,m,w),_);ae(ie.idToken,M,"internal-error");const Pe=_t(ie.idToken);ae(Pe,M,"internal-error");const{sub:st}=Pe;return ae(w.uid===st,M,"user-mismatch"),Ii._forOperation(w,L,ie)}catch(ie){throw"auth/user-not-found"===(null===(I=ie)||void 0===I?void 0:I.code)&&Je(M,"user-mismatch"),ie}})).apply(this,arguments)}function qu(w,m){return bi.apply(this,arguments)}function bi(){return(bi=(0,h.Z)(function*(w,m,_=!1){const I="signIn",M=yield ud(w,I,m),L=yield Ii._fromIdTokenResponse(w,I,M);return _||(yield w._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Ja(w,m){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,h.Z)(function*(w,m){return qu(wt(w),m)})).apply(this,arguments)}function Vt(w,m){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(w,m){const _=(0,G.m9)(w);return yield Qi(!1,_,m.providerId),Gl(_,m)})).apply(this,arguments)}function fg(w,m){return el.apply(this,arguments)}function el(){return(el=(0,h.Z)(function*(w,m){return zu((0,G.m9)(w),m)})).apply(this,arguments)}function cd(w,m){return tl.apply(this,arguments)}function tl(){return(tl=(0,h.Z)(function*(w,m){return Gn(w,"POST","/v1/accounts:signInWithCustomToken",Jt(w,m))})).apply(this,arguments)}function vo(w,m){return nl.apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(w,m){const _=wt(w),I=yield cd(_,{token:m,returnSecureToken:!0}),M=yield Ii._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class ia{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Ne._fromServerResponse(m,_):Je(m,"internal-error")}}class Ne extends ia{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Ne(_)}}function en(w,m,_){var I;ae((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ae(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ae(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(ae(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Uh(w,m,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w),M={requestType:"PASSWORD_RESET",email:m};_&&en(I,M,_),yield Fh(I,M)})).apply(this,arguments)}function fr(w,m,_){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(w,m,_){yield yi((0,G.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function zl(w,m){return ti.apply(this,arguments)}function ti(){return(ti=(0,h.Z)(function*(w,m){yield Lh((0,G.m9)(w),{oobCode:m})})).apply(this,arguments)}function ql(w,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(w,m){const _=(0,G.m9)(w),I=yield yi(_,{oobCode:m}),M=I.requestType;switch(ae(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(I.mfaInfo,_,"internal-error");default:ae(I.email,_,"internal-error")}let L=null;return I.mfaInfo&&(L=ia._fromServerResponse(wt(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:L},operation:M}})).apply(this,arguments)}function Bh(w,m){return rl.apply(this,arguments)}function rl(){return(rl=(0,h.Z)(function*(w,m){const{data:_}=yield ql((0,G.m9)(w),m);return _.email})).apply(this,arguments)}function pg(w,m,_){return wo.apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(w,m,_){const I=wt(w),M=yield ci(I,{returnSecureToken:!0,email:m,password:_}),L=yield Ii._fromIdTokenResponse(I,"signIn",M);return yield I._updateCurrentUser(L.user),L})).apply(this,arguments)}function pr(w,m,_){return Ja((0,G.m9)(w),$l.credential(m,_))}function Ji(w,m,_){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w),M={requestType:"EMAIL_SIGNIN",email:m};ae(_.handleCodeInApp,I,"argument-error"),_&&en(I,M,_),yield vi(I,M)})).apply(this,arguments)}function sl(w,m){return"EMAIL_SIGNIN"===Xo.parseLink(m)?.operation}function _s(w,m,_){return dd.apply(this,arguments)}function dd(){return(dd=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w),M=$l.credentialWithLink(m,_||He());return ae(M._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Ja(I,M)})).apply(this,arguments)}function Ku(w,m){return hd.apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:createAuthUri",Jt(w,m))})).apply(this,arguments)}function Hh(w,m){return la.apply(this,arguments)}function la(){return(la=(0,h.Z)(function*(w,m){const I={identifier:m,continueUri:je()?He():"http://localhost"},{signinMethods:M}=yield Ku((0,G.m9)(w),I);return M||[]})).apply(this,arguments)}function Zu(w,m){return ol.apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(w,m){const _=(0,G.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&en(_.auth,M,m);const{email:L}=yield ps(_.auth,M);L!==w.email&&(yield w.reload())})).apply(this,arguments)}function Yu(w,m,_){return al.apply(this,arguments)}function al(){return(al=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&en(I.auth,L,_);const{email:ie}=yield ju(I.auth,L);ie!==w.email&&(yield w.reload())})).apply(this,arguments)}function fd(w,m){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(w,m){return $t(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function jh(w,m){return ll.apply(this,arguments)}function ll(){return(ll=(0,h.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const I=(0,G.m9)(w),L={idToken:yield I.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ie=yield kt(I,fd(I.auth,L));I.displayName=ie.displayName||null,I.photoURL=ie.photoUrl||null;const Pe=I.providerData.find(({providerId:st})=>"password"===st);Pe&&(Pe.displayName=I.displayName,Pe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ie)})).apply(this,arguments)}function $h(w,m){return Bs((0,G.m9)(w),m,null)}function pd(w,m){return Bs((0,G.m9)(w),null,m)}function Bs(w,m,_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,h.Z)(function*(w,m,_){const{auth:I}=w,L={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(L.email=m),_&&(L.password=_);const ie=yield kt(w,Hu(I,L));yield w._updateTokensIfNecessary(ie,!0)})).apply(this,arguments)}class Wn{constructor(m,_,I={}){this.isNewUser=m,this.providerId=_,this.profile=I}}class ys extends Wn{constructor(m,_,I,M){super(m,_,I),this.username=M}}class Bn extends Wn{constructor(m,_){super(m,"facebook.com",_)}}class md extends ys{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Qu extends Wn{constructor(m,_){super(m,"google.com",_)}}class Wh extends ys{constructor(m,_,I){super(m,"twitter.com",_,I)}}function Ju(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function gd(w){var m,_;if(!w)return null;const{providerId:I}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},L=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const ie=null===(_=null===(m=_t(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ie)return new Wn(L,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!I)return null;switch(I){case"facebook.com":return new Bn(L,M);case"github.com":return new md(L,M);case"google.com":return new Qu(L,M);case"twitter.com":return new Wh(L,M,w.screenName||null);case"custom":case"anonymous":return new Wn(L,null);default:return new Wn(L,I,M)}}(_)}class Ci{constructor(m,_,I){this.type=m,this.credential=_,this.auth=I}static _fromIdtoken(m,_){return new Ci("enroll",m,_)}static _fromMfaPendingCredential(m){return new Ci("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,I;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Ci._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(I=m.multiFactorSession)&&void 0!==I&&I.idToken)return Ci._fromIdtoken(m.multiFactorSession.idToken)}return null}}class tc{constructor(m,_,I){this.session=m,this.hints=_,this.signInResolver=I}static _fromError(m,_){const I=wt(m),M=_.customData._serverResponse,L=(M.mfaInfo||[]).map(Pe=>ia._fromServerResponse(I,Pe));ae(M.mfaPendingCredential,I,"internal-error");const ie=Ci._fromMfaPendingCredential(M.mfaPendingCredential);return new tc(ie,L,function(){var Pe=(0,h.Z)(function*(st){const Ct=yield st._process(I,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const Xt=Object.assign(Object.assign({},M),{idToken:Ct.idToken,refreshToken:Ct.refreshToken});switch(_.operationType){case"signIn":const An=yield Ii._fromIdTokenResponse(I,_.operationType,Xt);return yield I._updateCurrentUser(An.user),An;case"reauthenticate":return ae(_.user,I,"internal-error"),Ii._forOperation(_.user,_.operationType,Xt);default:Je(I,"internal-error")}});return function(st){return Pe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,h.Z)(function*(){return _.signInResolver(m)})()}}function vd(w,m){var _;const I=(0,G.m9)(w),M=m;return ae(m.customData.operationType,I,"argument-error"),ae(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),tc._fromError(I,M)}function Qn(w,m){return $t(w,"POST","/v2/accounts/mfaEnrollment:start",Jt(w,m))}class Ql{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>ia._fromServerResponse(m.auth,I)))})}static _fromUser(m){return new Ql(m)}getSession(){var m=this;return(0,h.Z)(function*(){return Ci._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,_){var I=this;return(0,h.Z)(function*(){const M=m,L=yield I.getSession(),ie=yield kt(I.user,M._process(I.user.auth,L,_));return yield I.user._updateTokensIfNecessary(ie),I.user.reload()})()}unenroll(m){var _=this;return(0,h.Z)(function*(){var I;const M="string"==typeof m?m:m.uid,L=yield _.user.getIdToken(),ie=yield kt(_.user,function Yl(w,m){return $t(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(w,m))}(_.user.auth,{idToken:L,mfaEnrollmentId:M}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Pe})=>Pe!==M),yield _.user._updateTokensIfNecessary(ie);try{yield _.user.reload()}catch(Pe){if("auth/user-token-expired"!==(null===(I=Pe)||void 0===I?void 0:I.code))throw Pe}})()}}const Gh=new WeakMap;function ul(w){const m=(0,G.m9)(w);return Gh.has(m)||Gh.set(m,Ql._fromUser(m)),Gh.get(m)}const vs="__sak";class cl{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(vs,"1"),this.storage.removeItem(vs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const gr=(()=>{class w extends cl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function nc(){const w=(0,G.z$)();return H(w)||Be(w)}()&&function ds(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=bn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const M=this.storage.getItem(I),L=this.localCache[I];M!==L&&_(I,L,M)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Pe,st,Ct)=>{this.notifyListeners(Pe,Ct)});const M=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Pe=this.storage.getItem(M);if(_.newValue!==Pe)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!I)return}const L=()=>{const Pe=this.storage.getItem(M);!I&&this.localCache[M]===Pe||this.notifyListeners(M,Pe)},ie=this.storage.getItem(M);!function Ht(){return(0,G.w1)()&&10===document.documentMode}()||ie===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const L of Array.from(M))L(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var M=()=>super._set,L=this;return(0,h.Z)(function*(){yield M().call(L,_,I),L.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,M=this;return(0,h.Z)(function*(){const L=yield I().call(M,_);return M.localCache[_]=JSON.stringify(L),L})()}_remove(_){var I=()=>super._remove,M=this;return(0,h.Z)(function*(){yield I().call(M,_),delete M.localCache[_]})()}}return w.type="LOCAL",w})(),js=(()=>{class w extends cl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let hl=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(L=>L.isListeningto(_));if(I)return I;const M=new w(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,h.Z)(function*(){const M=_,{eventId:L,eventType:ie,data:Pe}=M.data,st=I.handlersMap[ie];if(!st?.size)return;M.ports[0].postMessage({status:"ack",eventId:L,eventType:ie});const Ct=Array.from(st).map(function(){var An=(0,h.Z)(function*(Ti){return Ti(M.origin,Pe)});return function(Ti){return An.apply(this,arguments)}}()),Xt=yield function rc(w){return Promise.all(w.map(function(){var m=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return m.apply(this,arguments)}}()))}(Ct);M.ports[0].postMessage({status:"done",eventId:L,eventType:ie,response:Xt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function fa(w="",m=10){let _="";for(let I=0;I<m;I++)_+=Math.floor(10*Math.random());return w+_}class Kh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,I=50){var M=this;return(0,h.Z)(function*(){const L=typeof MessageChannel<"u"?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ie,Pe;return new Promise((st,Ct)=>{const Xt=fa("",20);L.port1.start();const An=setTimeout(()=>{Ct(new Error("unsupported_event"))},I);Pe={messageChannel:L,onMessage(Ti){const ji=Ti;if(ji.data.eventId===Xt)switch(ji.data.status){case"ack":clearTimeout(An),ie=setTimeout(()=>{Ct(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),st(ji.data.response);break;default:clearTimeout(An),clearTimeout(ie),Ct(new Error("invalid_response"))}}},M.handlers.add(Pe),L.port1.addEventListener("message",Pe.onMessage),M.target.postMessage({eventType:m,eventId:Xt,data:_},[L.port2])}).finally(()=>{Pe&&M.removeMessageHandler(Pe)})})()}}function Jn(){return window}function di(){return typeof Jn().WorkerGlobalScope<"u"&&"function"==typeof Jn().importScripts}function ws(){return(ws=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fl="firebaseLocalStorageDb",pl="firebaseLocalStorage",pa="fbase_key";class Io{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ga(w,m){return w.transaction([pl],m?"readwrite":"readonly").objectStore(pl)}function Xl(){const w=indexedDB.open(fl,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(pl,{keyPath:pa})}catch(M){_(M)}}),w.addEventListener("success",(0,h.Z)(function*(){const I=w.result;I.objectStoreNames.contains(pl)?m(I):(I.close(),yield function bd(){const w=indexedDB.deleteDatabase(fl);return new Io(w).toPromise()}(),m(yield Xl()))}))})}function gl(w,m,_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,h.Z)(function*(w,m,_){const I=ga(w,!0).put({[pa]:m,value:_});return new Io(I).toPromise()})).apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(w,m){const _=ga(w,!1).get(m),I=yield new Io(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function eu(w,m){const _=ga(w,!0).delete(m);return new Io(_).toPromise()}const ya=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield Xl()),_.db})()}_withRetries(_){var I=this;return(0,h.Z)(function*(){let M=0;for(;;)try{const L=yield I._openDb();return yield _(L)}catch(L){if(M++>3)throw L;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return di()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=hl._getInstance(function Jl(){return di()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,h.Z)(function*(M,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(M,L){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,h.Z)(function*(M,L){return["keyChanged"]});return function(M,L){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var I,M;if(_.activeServiceWorker=yield function Id(){return ws.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Kh(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);!L||(null===(I=L[0])||void 0===I?void 0:I.fulfilled)&&(null===(M=L[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,h.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function ic(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Xl();return yield gl(_,vs,"1"),yield eu(_,vs),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,h.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var M=this;return(0,h.Z)(function*(){return M._withPendingWrite((0,h.Z)(function*(){return yield M._withRetries(L=>gl(L,_,I)),M.localCache[_]=I,M.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,h.Z)(function*(){const M=yield I._withRetries(L=>function Zh(w,m){return ma.apply(this,arguments)}(L,_));return I.localCache[_]=M,M})()}_remove(_){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries(M=>eu(M,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const I=yield _._withRetries(ie=>{const Pe=ga(ie,!1).getAll();return new Io(Pe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const M=[],L=new Set;for(const{fbase_key:ie,value:Pe}of I)L.add(ie),JSON.stringify(_.localCache[ie])!==JSON.stringify(Pe)&&(_.notifyListeners(ie,Pe),M.push(ie));for(const ie of Object.keys(_.localCache))_.localCache[ie]&&!L.has(ie)&&(_.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(_,I){this.localCache[_]=I;const M=this.listeners[_];if(M)for(const L of Array.from(M))L(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Yh(w,m){return $t(w,"POST","/v2/accounts/mfaSignIn:start",Jt(w,m))}function zr(){return(zr=(0,h.Z)(function*(w){return(yield $t(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bo(w){return new Promise((m,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=m,I.onerror=M=>{const L=Ve("internal-error");L.customData=M,_(L)},I.type="text/javascript",I.charset="UTF-8",function wa(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(I)})}function Ea(w){return`__${w}${Math.floor(1e6*Math.random())}`}const es=1e12;class Cd{constructor(m){this.auth=m,this.counter=es,this._widgets=new Map}render(m,_){const I=this.counter;return this._widgets.set(I,new Fn(m,this.auth.name,_||{})),this.counter++,I}reset(m){var _;const I=m||es;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(m){var _;return(null===(_=this._widgets.get(m||es))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,h.Z)(function*(){var I;return null===(I=_._widgets.get(m||es))||void 0===I||I.execute(),""})()}}class Fn{constructor(m,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;ae(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function gg(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qh=Ea("rcb"),G0=new Ze(3e4,6e4);class _y{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Jn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return ae(function Jh(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Jn().grecaptcha):new Promise((I,M)=>{const L=Jn().setTimeout(()=>{M(Ve(m,"network-request-failed"))},G0.get());Jn()[Qh]=()=>{Jn().clearTimeout(L),delete Jn()[Qh];const Pe=Jn().grecaptcha;if(!Pe)return void M(Ve(m,"internal-error"));const st=Pe.render;Pe.render=(Ct,Xt)=>{const An=st(Ct,Xt);return this.counter++,An},this.hostLanguage=_,I(Pe)},bo(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:Qh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),M(Ve(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Jn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class z0{load(m){return(0,h.Z)(function*(){return new Cd(m)})()}clearedOneInstance(){}}const ba="recaptcha",yy={theme:"light",type:"image"};class mg{constructor(m,_=Object.assign({},yy),I){this.parameters=_,this.type=ba,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(I),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;ae(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new z0:new _y,this.validateStartingState()}verify(){var m=this;return(0,h.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),I=m.getAssertedRecaptcha();return I.getResponse(_)||new Promise(L=>{const ie=Pe=>{!Pe||(m.tokenChangeListeners.delete(ie),L(Pe))};m.tokenChangeListeners.add(ie),m.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof m)m(_);else if("string"==typeof m){const I=Jn()[m];"function"==typeof I&&I(_)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,h.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,h.Z)(function*(){ae(je()&&!di(),m.auth,"internal-error"),yield function Ar(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function tu(w){return zr.apply(this,arguments)}(m.auth);ae(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yn{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Jo._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function ts(w,m,_){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(w,m,_){const I=wt(w),M=yield mr(I,m,(0,G.m9)(_));return new yn(M,L=>Ja(I,L))})).apply(this,arguments)}function pn(w,m,_){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w);yield Qi(!1,I,"phone");const M=yield mr(I.auth,m,(0,G.m9)(_));return new yn(M,L=>Vt(I,L))})).apply(this,arguments)}function Es(w,m,_){return Co.apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w),M=yield mr(I.auth,m,(0,G.m9)(_));return new yn(M,L=>fg(I,L))})).apply(this,arguments)}function mr(w,m,_){return Do.apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(w,m,_){var I;const M=yield _.verify();try{let L;if(ae("string"==typeof M,w,"argument-error"),ae(_.type===ba,w,"argument-error"),L="string"==typeof m?{phoneNumber:m}:m,"session"in L){const ie=L.session;if("phoneNumber"in L)return ae("enroll"===ie.type,w,"internal-error"),(yield Qn(w,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ae("signin"===ie.type,w,"internal-error");const Pe=(null===(I=L.multiFactorHint)||void 0===I?void 0:I.uid)||L.multiFactorUid;return ae(Pe,w,"missing-multi-factor-info"),(yield Yh(w,{mfaPendingCredential:ie.credential,mfaEnrollmentId:Pe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield lg(w,{phoneNumber:L.phoneNumber,recaptchaToken:M});return ie}}finally{_._reset()}})).apply(this,arguments)}function Dd(w,m){return Td.apply(this,arguments)}function Td(){return(Td=(0,h.Z)(function*(w,m){yield Gl((0,G.m9)(w),m)})).apply(this,arguments)}let Xh=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=wt(_)}verifyPhoneNumber(_,I){return mr(this.auth,_,(0,G.m9)(I))}static credential(_,I){return Jo._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:M}=_;return I&&M?Jo._fromTokenResponse(I,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ws(w,m){return m?re(m):(ae(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Sd extends li{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return _o(m,this._buildIdpRequest())}_linkToIdToken(m,_){return _o(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return _o(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Gs(w){return qu(w.auth,new Sd(w),w.bypassAuthState)}function at(w){const{auth:m,user:_}=w;return ae(_,m,"internal-error"),zu(_,new Sd(w),w.bypassAuthState)}function ac(w){return ns.apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(w){const{auth:m,user:_}=w;return ae(_,m,"internal-error"),Gl(_,new Sd(w),w.bypassAuthState)})).apply(this,arguments)}class nu{constructor(m,_,I,M,L=!1){this.auth=m,this.resolver=I,this.user=M,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,h.Z)(function*(I,M){m.pendingPromise={resolve:I,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(L){m.reject(L)}});return function(I,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,h.Z)(function*(){const{urlResponse:I,sessionId:M,postBody:L,tenantId:ie,error:Pe,type:st}=m;if(Pe)return void _.reject(Pe);const Ct={auth:_.auth,requestUri:I,sessionId:M,tenantId:ie||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(st)(Ct))}catch(Xt){_.reject(Xt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Gs;case"linkViaPopup":case"linkViaRedirect":return ac;case"reauthViaPopup":case"reauthViaRedirect":return at;default:Je(this.auth,"internal-error")}}resolve(m){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ml=new Ze(2e3,1e4);function Hn(w,m,_){return _l.apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(w,m,_){const I=wt(w);Se(w,m,Br);const M=Ws(I,_);return new iu(I,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function ru(w,m,_){return yl.apply(this,arguments)}function yl(){return(yl=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w);Se(I.auth,m,Br);const M=Ws(I.auth,_);return new iu(I.auth,"reauthViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}function ef(w,m,_){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w);Se(I.auth,m,Br);const M=Ws(I.auth,_);return new iu(I.auth,"linkViaPopup",m,M,I).executeNotNull()})).apply(this,arguments)}let iu=(()=>{class w extends nu{constructor(_,I,M,L,ie){super(_,I,L,ie),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const I=yield _.execute();return ae(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,h.Z)(function*(){Ie(1===_.filter.length,"Popup operations only handle one event");const I=fa();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Ve(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,M;this.pollId=null!==(M=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ml.get())};_()}}return w.currentPopupAction=null,w})();const rs=new Map;class Hi extends nu{constructor(m,_,I=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,h.Z)(function*(){let I=rs.get(_.auth._key());if(!I){try{const L=(yield function su(w,m){return zs.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;I=()=>Promise.resolve(L)}catch(M){I=()=>Promise.reject(M)}rs.set(_.auth._key(),I)}return _.bypassAuthState||rs.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,I=this;return(0,h.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(I,m);if("unknown"!==m.type){if(m.eventId){const M=yield I.auth._redirectUserForId(m.eventId);if(M)return I.user=M,_().call(I,m);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function zs(){return(zs=(0,h.Z)(function*(w,m){const _=Ao(m),I=So(w);if(!(yield I._isAvailable()))return!1;const M="true"===(yield I._get(_));return yield I._remove(_),M})).apply(this,arguments)}function To(w,m){return qr.apply(this,arguments)}function qr(){return(qr=(0,h.Z)(function*(w,m){return So(w)._set(Ao(m),"true")})).apply(this,arguments)}function qs(){rs.clear()}function Sn(w,m){rs.set(w._key(),m)}function So(w){return re(w._redirectPersistence)}function Ao(w){return z("pendingRedirect",w.config.apiKey,w.name)}function Xn(w,m,_){return function Pn(w,m,_){return Is.apply(this,arguments)}(w,m,_)}function Is(){return(Is=(0,h.Z)(function*(w,m,_){const I=wt(w);Se(w,m,Br);const M=Ws(I,_);return yield To(M,I),M._openRedirect(I,m,"signInViaRedirect")})).apply(this,arguments)}function Di(w,m,_){return function D(w,m,_){return S.apply(this,arguments)}(w,m,_)}function S(){return(S=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w);Se(I.auth,m,Br);const M=Ws(I.auth,_);yield To(M,I.auth);const L=yield At(I);return M._openRedirect(I.auth,m,"reauthViaRedirect",L)})).apply(this,arguments)}function P(w,m,_){return function $(w,m,_){return X.apply(this,arguments)}(w,m,_)}function X(){return(X=(0,h.Z)(function*(w,m,_){const I=(0,G.m9)(w);Se(I.auth,m,Br);const M=Ws(I.auth,_);yield Qi(!1,I,m.providerId),yield To(M,I.auth);const L=yield At(I);return M._openRedirect(I.auth,m,"linkViaRedirect",L)})).apply(this,arguments)}function ce(w,m){return be.apply(this,arguments)}function be(){return(be=(0,h.Z)(function*(w,m){return yield wt(w)._initializationPromise,ze(w,m,!1)})).apply(this,arguments)}function ze(w,m){return vt.apply(this,arguments)}function vt(){return(vt=(0,h.Z)(function*(w,m,_=!1){const I=wt(w),M=Ws(I,m),ie=yield new Hi(I,M,_).execute();return ie&&!_&&(delete ie.user._redirectEventId,yield I._persistUserIfCurrent(ie.user),yield I._setRedirectUser(null,m)),ie})).apply(this,arguments)}function At(w){return jt.apply(this,arguments)}function jt(){return(jt=(0,h.Z)(function*(w){const m=fa(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class lr{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(m,I)&&(_=!0,this.sendToConsumer(m,I),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Wt(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ro(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var I;if(m.error&&!Ro(m)){const M=(null===(I=m.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Ve(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const I=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&I}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kr(m))}saveEventToCache(m){this.cachedEventUids.add(Kr(m)),this.lastProcessedEventTime=Date.now()}}function Kr(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Ro({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Hr(w){return xo.apply(this,arguments)}function xo(){return(xo=(0,h.Z)(function*(w,m={}){return $t(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Ks=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ou=/^https?/;function Rr(){return(Rr=(0,h.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Hr(w);for(const _ of m)try{if(Ad(_))return}catch{}Je(w,"unauthorized-domain")})).apply(this,arguments)}function Ad(w){const m=He(),{protocol:_,hostname:I}=new URL(m);if(w.startsWith("chrome-extension://")){const ie=new URL(w);return""===ie.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ie.hostname===I}if(!ou.test(_))return!1;if(Ks.test(w))return I===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(I)}const _g=new Ze(3e4,6e4);function tf(){const w=Jn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let er=null;function Mo(w){return er=er||function q0(w){return new Promise((m,_)=>{var I,M,L;function ie(){tf(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{tf(),_(Ve(w,"network-request-failed"))},timeout:_g.get()})}if(null!==(M=null===(I=Jn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==M&&M.Iframe)m(gapi.iframes.getContext());else{if(null===(L=Jn().gapi)||void 0===L||!L.load){const Pe=Ea("iframefcb");return Jn()[Pe]=()=>{gapi.load?ie():_(Ve(w,"network-request-failed"))},bo(`https://apis.google.com/js/api.js?onload=${Pe}`).catch(st=>_(st))}ie()}}).catch(m=>{throw er=null,m})}(w),er}const nf=new Ze(5e3,15e3),rf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wy(w){const m=w.config;ae(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?En(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:m.apiKey,appName:w.name,v:O.SDK_VERSION},M=vy.get(w.config.apiHost);M&&(I.eid=M);const L=w._getFrameworks();return L.length&&(I.fw=L.join(",")),`${_}?${(0,G.xO)(I).slice(1)}`}function lc(){return lc=(0,h.Z)(function*(w){const m=yield Mo(w),_=Jn().gapi;return ae(_,w,"internal-error"),m.open({where:document.body,url:wy(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rf,dontclear:!0},I=>new Promise(function(){var M=(0,h.Z)(function*(L,ie){yield I.restyle({setHideOnLeave:!1});const Pe=Ve(w,"network-request-failed"),st=Jn().setTimeout(()=>{ie(Pe)},nf.get());function Ct(){Jn().clearTimeout(st),L(I)}I.ping(Ct).then(Ct,()=>{ie(Pe)})});return function(L,ie){return M.apply(this,arguments)}}()))}),lc.apply(this,arguments)}const Ey={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uc{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vl(w,m,_,I,M,L){ae(w.config.authDomain,w,"auth-domain-config-required"),ae(w.config.apiKey,w,"invalid-api-key");const ie={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:O.SDK_VERSION,eventId:M};if(m instanceof Br){m.setDefaultLanguage(w.languageCode),ie.providerId=m.providerId||"",(0,G.xb)(m.getCustomParameters())||(ie.customParameters=JSON.stringify(m.getCustomParameters()));for(const[st,Ct]of Object.entries(L||{}))ie[st]=Ct}if(m instanceof ea){const st=m.getScopes().filter(Ct=>""!==Ct);st.length>0&&(ie.scopes=st.join(","))}w.tenantId&&(ie.tid=w.tenantId);const Pe=ie;for(const st of Object.keys(Pe))void 0===Pe[st]&&delete Pe[st];return`${function wg({config:w}){return w.emulator?En(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(Pe).slice(1)}`}const wl="webStorageSupport",is=class cu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=js,this._completeRedirectFn=ze,this._overrideRedirectResult=Sn}_openPopup(m,_,I,M){var L=this;return(0,h.Z)(function*(){var ie;Ie(null===(ie=L.eventManagers[m._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const Pe=vl(m,_,I,He(),M);return function Z0(w,m,_,I=500,M=600){const L=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-I)/2,0).toString();let Pe="";const st=Object.assign(Object.assign({},Ey),{width:I.toString(),height:M.toString(),top:L,left:ie}),Ct=(0,G.z$)().toLowerCase();_&&(Pe=se(Ct)?"_blank":_),N(Ct)&&(m=m||"http://localhost",st.scrollbars="yes");const Xt=Object.entries(st).reduce((Ti,[ji,El])=>`${Ti}${ji}=${El},`,"");if(function In(w=(0,G.z$)()){var m;return Be(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Ct)&&"_self"!==Pe)return function uu(w,m){const _=document.createElement("a");_.href=w,_.target=m;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(m||"",Pe),new uc(null);const An=window.open(m||"",Pe,Xt);ae(An,w,"popup-blocked");try{An.focus()}catch{}return new uc(An)}(m,Pe,fa())})()}_openRedirect(m,_,I,M){var L=this;return(0,h.Z)(function*(){return yield L._originValidation(m),function Ed(w){Jn().location.href=w}(vl(m,_,I,He(),M)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:L}=this.eventManagers[_];return M?Promise.resolve(M):(Ie(L,"If manager is not set, promise should be"),L)}const I=this.initAndGetManager(m);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(m){var _=this;return(0,h.Z)(function*(){const I=yield function vg(w){return lc.apply(this,arguments)}(m),M=new lr(m);return I.register("authEvent",L=>(ae(L?.authEvent,m,"invalid-auth-event"),{status:M.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=I,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(wl,{type:wl},M=>{var L;const ie=null===(L=M?.[0])||void 0===L?void 0:L[wl];void 0!==ie&&_(!!ie),Je(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Zs(w){return Rr.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return bn()||H()||Be()}};class af extends class Rd{constructor(m){this.factorId=m}_process(m,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,I);case"signin":return this._finalizeSignIn(m,_.credential);default:return fe("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new af(m)}_finalizeEnroll(m,_,I){return function Zl(w,m){return $t(w,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(w,m))}(m,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function va(w,m){return $t(w,"POST","/v2/accounts/mfaSignIn:finalize",Jt(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let lf=(()=>{class w{constructor(){}static assertion(_){return af._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var du="@firebase/auth",cc="0.20.11";class Eg{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(I=>{var M;m((null===(M=I)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xd=(0,G.Pz)("authIdTokenMaxAge")||300;let bg=null;const hi=w=>function(){var m=(0,h.Z)(function*(_){const I=_&&(yield _.getIdTokenResult()),M=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(M&&M>xd)return;const L=I?.token;bg!==L&&(bg=L,yield fetch(w,{method:L?"POST":"DELETE",headers:L?{Authorization:`Bearer ${L}`}:{}}))});return function(_){return m.apply(this,arguments)}}();function uf(w=(0,O.getApp)()){const m=(0,O._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const _=function _e(w,m){const _=(0,O._getProvider)(w,"auth");if(_.isInitialized()){const M=_.getImmediate(),L=_.getOptions();if((0,G.vZ)(L,m??{}))return M;Je(M,"already-initialized")}return _.initialize({options:m})}(w,{popupRedirectResolver:is,persistence:[ya,gr,js]}),I=(0,G.Pz)("authTokenSyncURL");if(I){const L=hi(I);(function Kl(w,m,_){(0,G.m9)(w).beforeAuthStateChanged(m,_)})(_,L,()=>L(_.currentUser)),function ec(w,m,_,I){(0,G.m9)(w).onIdTokenChanged(m,_,I)}(_,ie=>L(ie))}const M=(0,G.q4)("auth");return M&&ho(_,`http://${M}`),_}!function Dy(w){(0,O._registerComponent)(new we.wA("auth",(m,{options:_})=>{const I=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:L,authDomain:ie}=I.options;return((Pe,st)=>{ae(L&&!L.includes(":"),"invalid-api-key",{appName:Pe.name}),ae(!ie?.includes(":"),"argument-error",{appName:Pe.name});const Ct={apiKey:L,authDomain:ie,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ln(w)},Xt=new Zo(Pe,st,Ct);return function ue(w,m){const _=m?.persistence||[],I=(Array.isArray(_)?_:[_]).map(re);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(I,m?.popupRedirectResolver)}(Xt,_),Xt})(I,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,I)=>{m.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new we.wA("auth-internal",m=>{const _=wt(m.getProvider("auth").getImmediate());return new Eg(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(du,cc,function Cy(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,O.registerVersion)(du,cc,"esm2017")}("Browser")},2090:(gt,xe,V)=>{V.d(xe,{$s:()=>it,BH:()=>Kt,DV:()=>Zn,Dv:()=>ei,G6:()=>Se,GJ:()=>Zi,L:()=>me,LL:()=>an,P0:()=>je,Pz:()=>dn,Sg:()=>Ze,UG:()=>Ae,UI:()=>Yi,US:()=>we,Wj:()=>xt,Wl:()=>Ur,Yr:()=>ke,ZB:()=>q,ZR:()=>kn,aH:()=>mt,b$:()=>ve,cI:()=>$t,dS:()=>Bt,eu:()=>ae,g5:()=>O,gK:()=>sr,gQ:()=>Mn,h$:()=>ge,hl:()=>Ke,hu:()=>G,jU:()=>ot,lb:()=>Gr,m9:()=>sn,ne:()=>On,p$:()=>Y,pd:()=>lo,q4:()=>He,r3:()=>Xr,ru:()=>Ce,tV:()=>Ee,uI:()=>Le,ug:()=>ai,vZ:()=>Xe,w1:()=>Je,w9:()=>Ki,xO:()=>xn,xb:()=>Vi,z$:()=>Ge,zI:()=>fe,zd:()=>Tr});const G=function(K,z){if(!K)throw O(z)},O=function(K){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+K)},le=function(K){const z=[];let J=0;for(let W=0;W<K.length;W++){let N=K.charCodeAt(W);N<128?z[J++]=N:N<2048?(z[J++]=N>>6|192,z[J++]=63&N|128):55296==(64512&N)&&W+1<K.length&&56320==(64512&K.charCodeAt(W+1))?(N=65536+((1023&N)<<10)+(1023&K.charCodeAt(++W)),z[J++]=N>>18|240,z[J++]=N>>12&63|128,z[J++]=N>>6&63|128,z[J++]=63&N|128):(z[J++]=N>>12|224,z[J++]=N>>6&63|128,z[J++]=63&N|128)}return z},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,z){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let N=0;N<K.length;N+=3){const H=K[N],se=N+1<K.length,Fe=se?K[N+1]:0,lt=N+2<K.length,ut=lt?K[N+2]:0;let Ot=(15&Fe)<<2|ut>>6,In=63&ut;lt||(In=64,se||(Ot=64)),W.push(J[H>>2],J[(3&H)<<4|Fe>>4],J[Ot],J[In])}return W.join("")},encodeString(K,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(K):this.encodeByteArray(le(K),z)},decodeString(K,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(K):function(K){const z=[];let J=0,W=0;for(;J<K.length;){const N=K[J++];if(N<128)z[W++]=String.fromCharCode(N);else if(N>191&&N<224){const H=K[J++];z[W++]=String.fromCharCode((31&N)<<6|63&H)}else if(N>239&&N<365){const lt=((7&N)<<18|(63&K[J++])<<12|(63&K[J++])<<6|63&K[J++])-65536;z[W++]=String.fromCharCode(55296+(lt>>10)),z[W++]=String.fromCharCode(56320+(1023&lt))}else{const H=K[J++],se=K[J++];z[W++]=String.fromCharCode((15&N)<<12|(63&H)<<6|63&se)}}return z.join("")}(this.decodeStringToByteArray(K,z))},decodeStringToByteArray(K,z){this.init_();const J=z?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let N=0;N<K.length;){const H=J[K.charAt(N++)],Fe=N<K.length?J[K.charAt(N)]:0;++N;const ut=N<K.length?J[K.charAt(N)]:64;++N;const Be=N<K.length?J[K.charAt(N)]:64;if(++N,null==H||null==Fe||null==ut||null==Be)throw Error();W.push(H<<2|Fe>>4),64!==ut&&(W.push(Fe<<4&240|ut>>2),64!==Be&&W.push(ut<<6&192|Be))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},ge=function(K){const z=le(K);return we.encodeByteArray(z,!0)},me=function(K){return ge(K).replace(/\./g,"")},Ee=function(K){try{return we.decodeString(K,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function Y(K){return q(void 0,K)}function q(K,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return z}for(const J in z)!z.hasOwnProperty(J)||!te(J)||(K[J]=q(K[J],z[J]));return K}function te(K){return"__proto__"!==K}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ot(){return"object"==typeof self&&self.self===self}function Ce(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Je(){const K=Ge();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function ke(){return!1}function Se(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){return"object"==typeof indexedDB}function ae(){return new Promise((K,z)=>{try{let J=!0;const W="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(W);N.onsuccess=()=>{N.result.close(),J||self.indexedDB.deleteDatabase(W),K(!0)},N.onupgradeneeded=()=>{J=!1},N.onerror=()=>{var H;z((null===(H=N.error)||void 0===H?void 0:H.message)||"")}}catch(J){z(J)}})}function fe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ue=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const K=process.env.__FIREBASE_DEFAULTS__;return K?JSON.parse(K):void 0})()||(()=>{if(typeof document>"u")return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=K&&Ee(K[1]);return z&&JSON.parse(z)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},He=K=>{var z,J;return null===(J=null===(z=ue())||void 0===z?void 0:z.emulatorHosts)||void 0===J?void 0:J[K]},je=K=>{const z=He(K);if(!z)return;const J=z.lastIndexOf(":");if(J<=0||J+1===z.length)throw new Error(`Invalid host ${z} with no separate hostname and port!`);const W=parseInt(z.substring(J+1),10);return"["===z[0]?[z.substring(1,J-1),W]:[z.substring(0,J),W]},mt=()=>{var K;return null===(K=ue())||void 0===K?void 0:K.config},dn=K=>{var z;return null===(z=ue())||void 0===z?void 0:z[`_${K}`]};class Kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,J)=>{this.resolve=z,this.reject=J})}wrapCallback(z){return(J,W)=>{J?this.reject(J):this.resolve(W),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(J):z(J,W))}}}function Ze(K,z){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=z||"demo-project",N=K.iat||0,H=K.sub||K.user_id;if(!H)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:N,exp:N+3600,auth_time:N,sub:H,user_id:H,firebase:{sign_in_provider:"custom",identities:{}}},K);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(se)),""].join(".")}class kn extends Error{constructor(z,J,W){super(J),this.code=z,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,an.prototype.create)}}class an{constructor(z,J,W){this.service=z,this.serviceName=J,this.errors=W}create(z,...J){const W=J[0]||{},N=`${this.service}/${z}`,H=this.errors[z],se=H?function ln(K,z){return K.replace(Jt,(J,W)=>{const N=z[W];return null!=N?String(N):`<${W}?>`})}(H,W):"Error";return new kn(N,`${this.serviceName}: ${se} (${N}).`,W)}}const Jt=/\{\$([^}]+)}/g;function $t(K){return JSON.parse(K)}function Ur(K){return JSON.stringify(K)}const qi=function(K){let z={},J={},W={},N="";try{const H=K.split(".");z=$t(Ee(H[0])||""),J=$t(Ee(H[1])||""),N=H[2],W=J.d||{},delete J.d}catch{}return{header:z,claims:J,data:W,signature:N}},Ki=function(K){const J=qi(K).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Zi=function(K){const z=qi(K).claims;return"object"==typeof z&&!0===z.admin};function Xr(K,z){return Object.prototype.hasOwnProperty.call(K,z)}function Zn(K,z){if(Object.prototype.hasOwnProperty.call(K,z))return K[z]}function Vi(K){for(const z in K)if(Object.prototype.hasOwnProperty.call(K,z))return!1;return!0}function Yi(K,z,J){const W={};for(const N in K)Object.prototype.hasOwnProperty.call(K,N)&&(W[N]=z.call(J,K[N],N,K));return W}function Xe(K,z){if(K===z)return!0;const J=Object.keys(K),W=Object.keys(z);for(const N of J){if(!W.includes(N))return!1;const H=K[N],se=z[N];if(dr(H)&&dr(se)){if(!Xe(H,se))return!1}else if(H!==se)return!1}for(const N of W)if(!J.includes(N))return!1;return!0}function dr(K){return null!==K&&"object"==typeof K}function xn(K){const z=[];for(const[J,W]of Object.entries(K))Array.isArray(W)?W.forEach(N=>{z.push(encodeURIComponent(J)+"="+encodeURIComponent(N))}):z.push(encodeURIComponent(J)+"="+encodeURIComponent(W));return z.length?"&"+z.join("&"):""}function Tr(K){const z={};return K.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[N,H]=W.split("=");z[decodeURIComponent(N)]=decodeURIComponent(H)}}),z}function lo(K){const z=K.indexOf("?");if(!z)return"";const J=K.indexOf("#",z);return K.substring(z,J>0?J:void 0)}class Mn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,J){J||(J=0);const W=this.W_;if("string"==typeof z)for(let Be=0;Be<16;Be++)W[Be]=z.charCodeAt(J)<<24|z.charCodeAt(J+1)<<16|z.charCodeAt(J+2)<<8|z.charCodeAt(J+3),J+=4;else for(let Be=0;Be<16;Be++)W[Be]=z[J]<<24|z[J+1]<<16|z[J+2]<<8|z[J+3],J+=4;for(let Be=16;Be<80;Be++){const Ot=W[Be-3]^W[Be-8]^W[Be-14]^W[Be-16];W[Be]=4294967295&(Ot<<1|Ot>>>31)}let ut,Me,N=this.chain_[0],H=this.chain_[1],se=this.chain_[2],Fe=this.chain_[3],lt=this.chain_[4];for(let Be=0;Be<80;Be++){Be<40?Be<20?(ut=Fe^H&(se^Fe),Me=1518500249):(ut=H^se^Fe,Me=1859775393):Be<60?(ut=H&se|Fe&(H|se),Me=2400959708):(ut=H^se^Fe,Me=3395469782);const Ot=(N<<5|N>>>27)+ut+lt+Me+W[Be]&4294967295;lt=Fe,Fe=se,se=4294967295&(H<<30|H>>>2),H=N,N=Ot}this.chain_[0]=this.chain_[0]+N&4294967295,this.chain_[1]=this.chain_[1]+H&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Fe&4294967295,this.chain_[4]=this.chain_[4]+lt&4294967295}update(z,J){if(null==z)return;void 0===J&&(J=z.length);const W=J-this.blockSize;let N=0;const H=this.buf_;let se=this.inbuf_;for(;N<J;){if(0===se)for(;N<=W;)this.compress_(z,N),N+=this.blockSize;if("string"==typeof z){for(;N<J;)if(H[se]=z.charCodeAt(N),++se,++N,se===this.blockSize){this.compress_(H),se=0;break}}else for(;N<J;)if(H[se]=z[N],++se,++N,se===this.blockSize){this.compress_(H),se=0;break}}this.inbuf_=se,this.total_+=J}digest(){const z=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let N=this.blockSize-1;N>=56;N--)this.buf_[N]=255&J,J/=256;this.compress_(this.buf_);let W=0;for(let N=0;N<5;N++)for(let H=24;H>=0;H-=8)z[W]=this.chain_[N]>>H&255,++W;return z}}function On(K,z){const J=new Tn(K,z);return J.subscribe.bind(J)}class Tn{constructor(z,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{z(this)}).catch(W=>{this.error(W)})}next(z){this.forEachObserver(J=>{J.next(z)})}error(z){this.forEachObserver(J=>{J.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,J,W){let N;if(void 0===z&&void 0===J&&void 0===W)throw new Error("Missing Observer.");N=function yt(K,z){if("object"!=typeof K||null===K)return!1;for(const J of z)if(J in K&&"function"==typeof K[J])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:J,complete:W},void 0===N.next&&(N.next=kt),void 0===N.error&&(N.error=kt),void 0===N.complete&&(N.complete=kt);const H=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),H}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,z)}sendOne(z,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{J(this.observers[z])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kt(){}const ei=function(K,z,J,W){let N;if(W<z?N="at least "+z:W>J&&(N=0===J?"none":"no more than "+J),N)throw new Error(K+" failed: Was called with "+W+(1===W?" argument.":" arguments.")+" Expects "+N+".")};function sr(K,z){return`${K} failed: ${z} argument `}function xt(K,z,J,W){if((!W||J)&&"function"!=typeof J)throw new Error(sr(K,z)+"must be a valid function.")}function Gr(K,z,J,W){if((!W||J)&&("object"!=typeof J||null===J))throw new Error(sr(K,z)+"must be a valid context object.")}const Bt=function(K){const z=[];let J=0;for(let W=0;W<K.length;W++){let N=K.charCodeAt(W);if(N>=55296&&N<=56319){const H=N-55296;W++,G(W<K.length,"Surrogate pair missing trail surrogate."),N=65536+(H<<10)+(K.charCodeAt(W)-56320)}N<128?z[J++]=N:N<2048?(z[J++]=N>>6|192,z[J++]=63&N|128):N<65536?(z[J++]=N>>12|224,z[J++]=N>>6&63|128,z[J++]=63&N|128):(z[J++]=N>>18|240,z[J++]=N>>12&63|128,z[J++]=N>>6&63|128,z[J++]=63&N|128)}return z},ai=function(K){let z=0;for(let J=0;J<K.length;J++){const W=K.charCodeAt(J);W<128?z++:W<2048?z+=2:W>=55296&&W<=56319?(z+=4,J++):z+=3}return z};function it(K,z=1e3,J=2){const W=z*Math.pow(J,K),N=Math.round(.5*W*(Math.random()-.5)*2);return Math.min(144e5,W+N)}function sn(K){return K&&K._delegate?K._delegate:K}},6770:(gt,xe,V)=>{var h=V(4650);let G=null;function O(){return G}const ge=new h.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return(0,h.LFG)(q)}()},providedIn:"platform"}),n})();const Y=new h.OlP("Location Initialized");let q=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ge(){return new q((0,h.LFG)(ge))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Le(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ae(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ot(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(nt)},providedIn:"root"}),n})();const ve=new h.OlP("appBaseHref");let nt=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Le(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ot(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+ot(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+ot(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(ve,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Je=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Le(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+ot(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+ot(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(ve,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ae(Ke(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ot(r))}normalize(t){return n.stripTrailingSlash(function Se(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ke(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ot(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ot,n.joinWithSlash=Le,n.stripTrailingSlash=Ae,n.\u0275fac=function(t){return new(t||n)(h.LFG(Ce))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ke(){return new Ve((0,h.LFG)(Ce))}()},providedIn:"root"}),n})();function Ke(n){return n.replace(/\/index.html$/,"")}let mn=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class po{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fs=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new po(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,u),go(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{go(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function go(n,e){n.context.$implicit=e.item}let zn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Fh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Fh{constructor(){this.$implicit=null,this.ngIf=null}}function hr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Za=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),u=-1===i.indexOf("-")?void 0:h.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,u):this._renderer.removeStyle(this._ngEl.nativeElement,i,u)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),mo=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:u}=this;this._viewRef=r.createEmbeddedView(i,s,u?{injector:u}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[h.TTD]}),n})(),Qa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ei="browser";function na(n){return"server"===n}let ud=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Vh((0,h.LFG)(ge),window)}),n})();class Vh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Sr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ui(this.window.history)||Ui(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ui(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Bs extends class pd extends class we{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){G||(G=n)}(new Bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function gd(){return Hs=Hs||document.querySelector("base"),Hs?Hs.getAttribute("href"):null}();return null==t?null:function ys(n){Wn=Wn||document.createElement("a"),Wn.setAttribute("href",n);const e=Wn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Hu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Wn,Hs=null;const Bn=new h.OlP("TRANSITION_ID"),Qu=[{provide:h.ip1,useFactory:function md(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Bn,ge,h.zs3],multi:!0}];let Ju=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Xu=new h.OlP("EventManagerPlugins");let ec=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xu),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Kl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let ca=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),da=(()=>{class n extends ca{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(_d),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(_d))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function _d(n){O().remove(n)}const ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yd=/%COMP%/g;function Yl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Yl(n,i,t):(i=i.replace(yd,n),t.push(i))}return t}function Ql(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ul=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new vs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new wd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new zh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Yl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ec),h.LFG(da),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class vs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ha[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(dl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(dl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ha[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ha[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ql(r)):this.eventManager.addEventListener(e,t,Ql(r))}}function dl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class wd extends vs{constructor(e,t,r,i){super(e),this.component=r;const s=Yl(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Qn(n){return"_ngcontent-%COMP%".replace(yd,n)}(i+"-"+r.id),this.hostAttr=function Zl(n){return"_nghost-%COMP%".replace(yd,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class zh extends vs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Yl(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const d=document.createElement("style");d.textContent=s[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let gr=(()=>{class n extends Kl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const qh=["alt","control","meta","shift"],js={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let hl=(()=>{class n extends Kl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),u="code."),qh.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),u+=y+".")}),u+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(t,r){let i=js[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qh.forEach(u=>{u!==i&&(0,rc[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const fl=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Ei},{provide:h.g9A,useValue:function Id(){Bs.makeCurrent()},multi:!0},{provide:ge,useFactory:function ic(){return(0,h.RDi)(document),document},deps:[]}]),Eo=new h.OlP(""),pl=[{provide:h.rWj,useClass:class Wh{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const d=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],pa=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function ws(){return new h.qLn},deps:[]},{provide:Xu,useClass:gr,multi:!0,deps:[ge,h.R0b,h.Lbi]},{provide:Xu,useClass:hl,multi:!0,deps:[ge]},{provide:ul,useClass:ul,deps:[ec,da,h.AFp]},{provide:h.FYo,useExisting:ul},{provide:ca,useExisting:da},{provide:da,useClass:da,deps:[ge]},{provide:ec,useClass:ec,deps:[Xu,h.R0b]},{provide:class ra{},useClass:Ju,deps:[]},[]];let Io=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Bn,useExisting:h.AFp},Qu]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Eo,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...pa,...pl],imports:[Qa,h.hGG]}),n})(),Xi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function gl(){return new Xi((0,h.LFG)(ge))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let ba=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(mg),r},providedIn:"root"}),n})(),mg=(()=>{class n extends ba{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function yy(n){return new mg(n.get(ge))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var yn=V(8996),ts=V(3269);function ft(...n){const e=(0,ts.yG)(n);return(0,yn.D)(n,e)}var pn=V(7579);class Vn extends pn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Co=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var mr=V(9751);const{isArray:Do}=Array,{getPrototypeOf:Dd,prototype:Td,keys:Xh}=Object;function Ws(n){if(1===n.length){const e=n[0];if(Do(e))return{args:e,keys:null};if(function Sd(n){return n&&"object"==typeof n&&Dd(n)===Td}(e)){const t=Xh(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Gs=V(4671),at=V(4004);const{isArray:ac}=Array;function nu(n){return(0,at.U)(e=>function ns(n,e){return ac(e)?n(...e):n(e)}(n,e))}function ml(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Hn=V(5403),_l=V(9672);function ru(...n){const e=(0,ts.yG)(n),t=(0,ts.jO)(n),{args:r,keys:i}=Ws(n);if(0===r.length)return(0,yn.D)([],e);const s=new mr.y(function yl(n,e,t=Gs.y){return r=>{ef(e,()=>{const{length:i}=n,s=new Array(i);let u=i,d=i;for(let p=0;p<i;p++)ef(e,()=>{const y=(0,yn.D)(n[p],e);let b=!1;y.subscribe((0,Hn.x)(r,T=>{s[p]=T,b||(b=!0,d--),d||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>ml(i,u):Gs.y));return t?s.pipe(nu(t)):s}function ef(n,e,t){n?(0,_l.f)(t,n,e):e()}var Ca=V(8189);function Da(...n){return function iu(){return(0,Ca.J)(1)}()((0,yn.D)(n,(0,ts.yG)(n)))}var rs=V(8421);function Hi(n){return new mr.y(e=>{(0,rs.Xf)(n()).subscribe(e)})}var su=V(9635),zs=V(576);function To(n,e){const t=(0,zs.m)(n)?n:()=>n,r=i=>i.error(t());return new mr.y(e?i=>e.schedule(r,0,i):r)}var qr=V(515),qs=V(727),Sn=V(4482);function So(){return(0,Sn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Hn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ao extends mr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Sn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qs.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Hn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qs.w0.EMPTY)}return e}refCount(){return So()(this)}}function Xn(n,e){return(0,Sn.e)((t,r)=>{let i=null,s=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,Hn.x)(r,p=>{i?.unsubscribe();let y=0;const b=s++;(0,rs.Xf)(n(p,b)).subscribe(i=(0,Hn.x)(r,T=>r.next(e?e(p,T,b,y++):T),()=>{i=null,d()}))},()=>{u=!0,d()}))})}function Pn(n){return n<=0?()=>qr.E:(0,Sn.e)((e,t)=>{let r=0;e.subscribe((0,Hn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Is(...n){const e=(0,ts.yG)(n);return(0,Sn.e)((t,r)=>{(e?Da(n,t,e):Da(n,t)).subscribe(r)})}function Di(n,e){return(0,Sn.e)((t,r)=>{let i=0;t.subscribe((0,Hn.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var D=V(5577);function S(n){return(0,Sn.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function P(n=$){return(0,Sn.e)((e,t)=>{let r=!1;e.subscribe((0,Hn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $(){return new Co}function X(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Di((i,s)=>n(i,s,r)):Gs.y,Pn(1),t?S(e):P(()=>new Co))}function ce(n,e){return(0,zs.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var be=V(8505);function ze(n){return(0,Sn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Hn.x)(t,void 0,void 0,u=>{s=(0,rs.Xf)(n(u,ze(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function vt(n,e,t,r,i){return(s,u)=>{let d=t,p=e,y=0;s.subscribe((0,Hn.x)(u,b=>{const T=y++;p=d?n(p,b,T):(d=!0,b),r&&u.next(p)},i&&(()=>{d&&u.next(p),u.complete()})))}}function At(n,e){return(0,Sn.e)(vt(n,e,arguments.length>=2,!0))}function jt(n){return n<=0?()=>qr.E:(0,Sn.e)((e,t)=>{let r=[];e.subscribe((0,Hn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Et(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Di((i,s)=>n(i,s,r)):Gs.y,jt(1),t?S(e):P(()=>new Co))}function Ro(n){return(0,Sn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Wt="primary",Hr=Symbol("RouteTitle");class xo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ks(n){return new xo(n)}function ou(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],d=n[s];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Rr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Ad(n[i],e[i]))return!1;return!0}function Ad(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function _g(n){return Array.prototype.concat.apply([],n)}function tf(n){return n.length>0?n[n.length-1]:null}function er(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Mo(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,yn.D)(Promise.resolve(n)):ft(n)}const K0={exact:function vg(n,e,t){if(!uu(n.segments,e.segments)||!au(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vg(n.children[r],e.children[r],t))return!1;return!0},subset:Ey},rf={exact:function wy(n,e){return Rr(n,e)},subset:function lc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ad(n[t],e[t]))},ignored:()=>!0};function vy(n,e,t){return K0[t.paths](n.root,e.root,t.matrixParams)&&rf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ey(n,e,t){return Iy(n,e,e.segments,t)}function Iy(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!uu(i,t)||e.hasChildren()||!au(i,t,r))}if(n.segments.length===t.length){if(!uu(n.segments,t)||!au(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ey(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(uu(n.segments,i)&&au(n.segments,i,r)&&n.children[Wt])&&Iy(n.children[Wt],e,s,r)}}function au(n,e,t){return e.every((r,i)=>rf[t](n[i].parameters,r.parameters))}class lu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ks(this.queryParams)),this._queryParamMap}toString(){return wg.serialize(this)}}class on{constructor(e,t){this.segments=e,this.children=t,this.parent=null,er(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wl(this)}}class uc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ks(this.parameters)),this._parameterMap}toString(){return Eg(this)}}function uu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let sf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new vl},providedIn:"root"}),n})();class vl{parse(e){const t=new m(e);return new lu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cu(e.root,!0)}`,r=function Dy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Rd(t)}=${Rd(i)}`).join("&"):`${Rd(t)}=${Rd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function af(n){return encodeURI(n)}(e.fragment)}`:""}`}}const wg=new vl;function wl(n){return n.segments.map(e=>Eg(e)).join("/")}function cu(n,e){if(!n.hasChildren())return wl(n);if(e){const t=n.children[Wt]?cu(n.children[Wt],!1):"",r=[];return er(n.children,(i,s)=>{s!==Wt&&r.push(`${s}:${cu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function by(n,e){let t=[];return er(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),er(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[cu(n.children[Wt],!1)]:[`${i}:${cu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${wl(n)}/${t[0]}`:`${wl(n)}/(${t.join("//")})`}}function is(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rd(n){return is(n).replace(/%3B/gi,";")}function lf(n){return is(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function du(n){return decodeURIComponent(n)}function cc(n){return du(n.replace(/\+/g,"%20"))}function Eg(n){return`${lf(n.path)}${function Cy(n){return Object.keys(n).map(e=>`;${lf(e)}=${lf(n[e])}`).join("")}(n.parameters)}`}const Ig=/^[^\/()?;=#]+/;function xd(n){const e=n.match(Ig);return e?e[0]:""}const bg=/^[^=?&#]+/,uf=/^[^&#]+/;class m{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new on(e,t)),r}parseSegment(){const e=xd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new uc(du(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=xd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=xd(this.remaining);i&&(r=i,this.capture(r))}e[du(t)]=du(r)}parseQueryParam(e){const t=function hi(n){const e=n.match(bg);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function w(n){const e=n.match(uf);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=cc(t),s=cc(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Wt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Wt]:new on([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function _(n){return n.segments.length>0?new on([],{[Wt]:n}):n}function I(n){const e={};for(const r of Object.keys(n.children)){const s=I(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function M(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new on(n.segments.concat(e.segments),e.children)}return n}(new on(n.segments,e))}function L(n){return n instanceof lu}function Xt(n,e,t,r,i){if(0===t.length)return ji(e.root,e.root,e.root,r,i);const s=function Md(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dc(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return er(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new dc(t,e,r)}(t);return s.toRoot()?ji(e.root,e.root,new on([],{}),r,i):function u(p){const y=function Il(n,e,t,r){if(n.isAbsolute)return new Ta(e.root,!0,0);if(-1===r)return new Ta(t,t===e.root,0);return function cf(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new Ta(r,!1,i-s)}(t,r+(An(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),b=y.processChildren?Sa(y.segmentGroup,y.index,s.commands):bl(y.segmentGroup,y.index,s.commands);return ji(e.root,y.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function An(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ti(n){return"object"==typeof n&&null!=n&&n.outlets}function ji(n,e,t,r,i){let u,s={};r&&er(r,(p,y)=>{s[y]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),u=n===e?t:El(n,e,t);const d=_(I(u));return new lu(d,s,i)}function El(n,e,t){const r={};return er(n.children,(i,s)=>{r[s]=i===e?t:El(i,e,t)}),new on(n.segments,r)}class dc{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&An(r[0]))throw new h.vHH(4003,!1);const i=r.find(Ti);if(i&&i!==tf(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ta{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function bl(n,e,t){if(n||(n=new on([],{})),0===n.segments.length&&n.hasChildren())return Sa(n,e,t);const r=function Tg(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],d=t[r];if(Ti(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Ty(p,y,u))return s;r+=2}else{if(!Ty(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new on(n.segments.slice(0,r.pathIndex),{});return s.children[Wt]=new on(n.segments.slice(r.pathIndex),n.children),Sa(s,0,i)}return r.match&&0===i.length?new on(n.segments,{}):r.match&&!n.hasChildren()?Pd(n,e,t):r.match?Sa(n,0,i):Pd(n,e,t)}function Sa(n,e,t){if(0===t.length)return new on(n.segments,{});{const r=function Dg(n){return Ti(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return er(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=bl(n.children[u],e,s))}),er(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new on(n.segments,i)}}function Pd(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Ti(s)){const p=hu(s.outlets);return new on(r,p)}if(0===i&&An(t[0])){r.push(new uc(n.segments[e].path,Sg(t[0]))),i++;continue}const u=Ti(s)?s.outlets[Wt]:`${s}`,d=i<t.length-1?t[i+1]:null;u&&d&&An(d)?(r.push(new uc(u,Sg(d))),i+=2):(r.push(new uc(u,{})),i++)}return new on(r,{})}function hu(n){const e={};return er(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Pd(new on([],{}),0,t))}),e}function Sg(n){const e={};return er(n,(t,r)=>e[r]=`${t}`),e}function Ty(n,e,t){return n==t.path&&Rr(e,t.parameters)}class Cl{constructor(e,t){this.id=e,this.url=t}}class df extends Cl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hc extends Cl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ag extends Cl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Y0 extends Cl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class QT extends Cl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class JT extends Cl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XT extends Cl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q0 extends Cl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sy extends Cl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ay{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eS{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tS{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eI{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ry{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=nI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nI(e,this._root).map(t=>t.value)}}function xy(n,e){if(n===e.value)return e;for(const t of e.children){const r=xy(n,t);if(r)return r}return null}function nI(n,e){if(n===e.value)return[e];for(const t of e.children){const r=nI(n,t);if(r.length)return r.unshift(e),r}return[]}class Ys{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Nd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class My extends Ry{constructor(e,t){super(e),this.snapshot=t,hf(this,e)}toString(){return this.snapshot.toString()}}function Py(n,e){const t=function rI(n,e){const u=new fc([],{},{},"",{},Wt,e,null,n.root,-1,{});return new ky("",new Ys(u,[]))}(n,e),r=new Vn([new uc("",{})]),i=new Vn({}),s=new Vn({}),u=new Vn({}),d=new Vn(""),p=new Dl(r,i,u,d,s,Wt,e,t.root);return p.snapshot=t.root,new My(new Ys(p,[]),t)}class Dl{constructor(e,t,r,i,s,u,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.pipe((0,at.U)(y=>y[Hr]))??ft(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,at.U)(e=>Ks(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,at.U)(e=>Ks(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ny(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function Rg(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fc{constructor(e,t,r,i,s,u,d,p,y,b,T,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=d,this.title=this.data?.[Hr],this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=b,this._correctedLastPathIndex=x??b,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ks(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ks(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ky extends Ry{constructor(e,t){super(t),this.url=e,hf(this,t)}toString(){return xg(this._root)}}function hf(n,e){e.value._routerState=n,e.children.forEach(t=>hf(n,t))}function xg(n){const e=n.children.length>0?` { ${n.children.map(xg).join(", ")} } `:"";return`${n.value}${e}`}function ff(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Rr(e.params,t.params)||n.params.next(t.params),function Zs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Rr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pc(n,e){const t=Rr(n.params,e.params)&&function Z0(n,e){return uu(n,e)&&n.every((t,r)=>Rr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pc(n.parent,e.parent))}function kd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function rS(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return kd(n,r,i);return kd(n,r)})}(n,e,t);return new Ys(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>kd(n,d)),u}}const r=function iS(n){return new Dl(new Vn(n.url),new Vn(n.params),new Vn(n.queryParams),new Vn(n.fragment),new Vn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>kd(n,s));return new Ys(r,i)}}const Mg="ngNavigationCancelingError";function Pg(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=L(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pf(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function pf(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Mg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ng(n){return pu(n)&&L(n.url)}function pu(n){return n&&n[Mg]}class sS{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new gf,this.attachRef=null}}let gf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new sS,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Oy=!1;let Ly=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Oy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Oy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Oy);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,Oy);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new Fy(t,d,i.injector);if(r&&function oS(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(u);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(gf),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Fy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Dl?this.route:e===gf?this.childContexts:this.parent.get(e,t)}}let kg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Ly],encapsulation:2}),n})();function mf(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Vy(n){const e=n.children&&n.children.map(Vy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=kg),t}function Qs(n){return n.outlet||Wt}function Aa(n,e){const t=n.filter(r=>Qs(r)===e);return t.push(...n.filter(r=>Qs(r)!==e)),t}function Ra(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class pS{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ff(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Nd(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),er(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nd(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nd(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Nd(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new eI(s.value.snapshot))}),e.children.length&&this.forwardEvent(new tS(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(ff(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),ff(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=Ra(i.snapshot),p=d?.get(h._Vd)??null;u.attachRef=null,u.route=i,u.resolver=p,u.injector=d,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class sI{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Og{constructor(e,t){this.component=e,this.route=t}}function gS(n,e,t){const r=n._root;return _f(r,e?e._root:null,t,[r.value])}function gc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function _f(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Nd(e);return n.children.forEach(u=>{(function _S(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function yS(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!uu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!uu(n.url,e.url)||!Rr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pc(n,e)||!Rr(n.queryParams,e.queryParams);default:return!pc(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new sI(r)):(s.data=u.data,s._resolvedData=u._resolvedData),_f(n,e,s.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Og(d.outlet.component,u))}else u&&yf(e,d,i),i.canActivateChecks.push(new sI(r)),_f(n,null,s.component?d?d.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),er(s,(u,d)=>yf(u,t.getContext(d),i)),i}function yf(n,e,t){const r=Nd(n),i=n.value;er(r,(s,u)=>{yf(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Og(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function gu(n){return"function"==typeof n}function wf(n){return n instanceof Co||"EmptyError"===n?.name}const Od=Symbol("INITIAL_VALUE");function Ef(){return Xn(n=>ru(n.map(e=>e.pipe(Pn(1),Is(Od)))).pipe((0,at.U)(e=>{for(const t of e)if(!0!==t){if(t===Od)return Od;if(!1===t||t instanceof lu)return t}return!0}),Di(e=>e!==Od),Pn(1)))}function Fg(n){return(0,su.z)((0,be.b)(e=>{if(L(e))throw Pg(0,e)}),(0,at.U)(e=>!0===e))}const _r={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hI(n,e,t,r,i){const s=Uy(n,e,t);return s.matched?function bS(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ft(i.map(u=>{const d=gc(u,n);return Mo(function yk(n){return n&&gu(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(Ef(),Fg()):ft(!0)}(r=mf(e,r),e,t).pipe((0,at.U)(u=>!0===u?s:{..._r})):ft(s)}function Uy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{..._r}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||ou)(t,n,e);if(!i)return{..._r};const s={};er(i.posParams,(d,p)=>{s[p]=d.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function Ld(n,e,t,r,i="corrected"){if(t.length>0&&function DS(n,e,t){return t.some(r=>Vg(n,e,r)&&Qs(r)!==Wt)}(n,t,r)){const u=new on(e,function CS(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Qs(s)!==Wt){const u=new on([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Qs(s)]=u}return i}(n,e,r,new on(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function TS(n,e,t){return t.some(r=>Vg(n,e,r))}(n,t,r)){const u=new on(n.segments,function fI(n,e,t,r,i,s){const u={};for(const d of r)if(Vg(n,t,d)&&!i[Qs(d)]){const p=new on([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[Qs(d)]=p}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new on(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Vg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function pI(n,e,t,r){return!!(Qs(n)===r||r!==Wt&&Vg(e,t,n))&&("**"===n.path||Uy(e,n,t).matched)}function SS(n,e,t){return 0===e.length&&!n.children[t]}const By=!1;class mu{constructor(e){this.segmentGroup=e||null}}class Ug{constructor(e){this.urlTree=e}}function Fd(n){return To(new mu(n))}function Hy(n){return To(new Ug(n))}class _I{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Ld(this.urlTree.root,[],[],this.config).segmentGroup,t=new on(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Wt).pipe((0,at.U)(s=>this.createUrlTree(I(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ze(s=>{if(s instanceof Ug)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof mu?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Wt).pipe((0,at.U)(i=>this.createUrlTree(I(i),e.queryParams,e.fragment))).pipe(ze(i=>{throw i instanceof mu?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,By)}createUrlTree(e,t,r){const i=_(e);return new lu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,at.U)(s=>new on([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,yn.D)(i).pipe(ce(s=>{const u=r.children[s],d=Aa(t,s);return this.expandSegmentGroup(e,d,u,s).pipe((0,at.U)(p=>({segment:p,outlet:s})))}),At((s,u)=>(s[u.outlet]=u.segment,s),{}),Et())}expandSegment(e,t,r,i,s,u){return(0,yn.D)(r).pipe(ce(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,u).pipe(ze(y=>{if(y instanceof mu)return ft(null);throw y}))),X(d=>!!d),ze((d,p)=>{if(wf(d))return SS(t,i,s)?ft(new on([],{})):Fd(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,u,d){return pI(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):Fd(t):Fd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Hy(s):this.lineralizeSegments(r,s).pipe((0,D.z)(u=>{const d=new on(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:b}=Uy(t,i,s);if(!d)return Fd(t);const T=this.applyRedirectCommands(p,i.redirectTo,b);return i.redirectTo.startsWith("/")?Hy(T):this.lineralizeSegments(i,T).pipe((0,D.z)(x=>this.expandSegment(e,t,r,x.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=mf(r,e),r.loadChildren?(r._loadedRoutes?ft({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,at.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new on(i,{})))):ft(new on(i,{}))):hI(t,r,i,e).pipe(Xn(({matched:u,consumedSegments:d,remainingSegments:p})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,D.z)(b=>{const T=b.injector??e,x=b.routes,{segmentGroup:F,slicedSegments:j}=Ld(t,d,p,x),ne=new on(F.segments,F.children);if(0===j.length&&ne.hasChildren())return this.expandChildren(T,x,ne).pipe((0,at.U)(ct=>new on(d,ct)));if(0===x.length&&0===j.length)return ft(new on(d,{}));const de=Qs(r)===s;return this.expandSegment(T,ne,x,j,de?Wt:s,!0).pipe((0,at.U)(tt=>new on(d.concat(tt.segments),tt.children)))})):Fd(t)))}getChildConfig(e,t,r){return t.children?ft({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ft({routes:t._loadedRoutes,injector:t._loadedInjector}):function dI(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ft(!0):ft(i.map(u=>{const d=gc(u,n);return Mo(function vf(n){return n&&gu(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(Ef(),Fg())}(e,t,r).pipe((0,D.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,be.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function AS(n){return To(pf(By,3))}())):ft({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ft(r);if(i.numberOfChildren>1||!i.children[Wt])return To(new h.vHH(4e3,By));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new lu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return er(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return er(t.children,(d,p)=>{u[p]=this.createSegmentGroup(e,d,r,i)}),new on(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,By);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class RS{}class vI{constructor(e,t,r,i,s,u,d,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d,this.urlSerializer=p}recognize(){const e=Ld(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe((0,at.U)(t=>{if(null===t)return null;const r=new fc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ys(r,t),s=new ky(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Ny(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,yn.D)(Object.keys(r.children)).pipe(ce(i=>{const s=r.children[i],u=Aa(t,i);return this.processSegmentGroup(e,u,s,i)}),At((i,s)=>i&&s?(i.push(...s),i):null),function lr(n,e=!1){return(0,Sn.e)((t,r)=>{let i=0;t.subscribe((0,Hn.x)(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(i=>null!==i),S(null),Et(),(0,at.U)(i=>{if(null===i)return null;const s=If(i);return function mc(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,yn.D)(t).pipe(ce(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,s)),X(u=>!!u),ze(u=>{if(wf(u))return SS(r,i,s)?ft([]):ft(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!pI(t,r,i,s))return ft(null);let u;if("**"===t.path){const d=i.length>0?tf(i).parameters:{},p=bf(r)+i.length;u=ft({snapshot:new fc(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zy(t),Qs(t),t.component??t._loadedComponent??null,t,Bg(r),p,Hg(t),p),consumedSegments:[],remainingSegments:[]})}else u=hI(r,t,i,e).pipe((0,at.U)(({matched:d,consumedSegments:p,remainingSegments:y,parameters:b})=>{if(!d)return null;const T=bf(r)+p.length;return{snapshot:new fc(p,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,zy(t),Qs(t),t.component??t._loadedComponent??null,t,Bg(r),T,Hg(t),T),consumedSegments:p,remainingSegments:y}}));return u.pipe(Xn(d=>{if(null===d)return ft(null);const{snapshot:p,consumedSegments:y,remainingSegments:b}=d;e=t._injector??e;const T=t._loadedInjector??e,x=function xS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:F,slicedSegments:j}=Ld(r,y,b,x.filter(de=>void 0===de.redirectTo),this.relativeLinkResolution);if(0===j.length&&F.hasChildren())return this.processChildren(T,x,F).pipe((0,at.U)(de=>null===de?null:[new Ys(p,de)]));if(0===x.length&&0===j.length)return ft([new Ys(p,[])]);const ne=Qs(t)===s;return this.processSegment(T,x,F,j,ne?Wt:s).pipe((0,at.U)(de=>null===de?null:[new Ys(p,de)]))}))}}function Gy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function If(n){const e=[],t=new Set;for(const r of n){if(!Gy(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=If(r.children);e.push(new Ys(r.value,i))}return e.filter(r=>!t.has(r))}function Bg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function bf(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function zy(n){return n.data||{}}function Hg(n){return n.resolve||{}}function EI(n){return"string"==typeof n.title||null===n.title}function qy(n){return Xn(e=>{const t=n(e);return t?(0,yn.D)(t).pipe((0,at.U)(()=>e)):ft(e)})}let jg=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[Hr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(II)},providedIn:"root"}),n})(),II=(()=>{class n extends jg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Xi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FS{}class Ek extends class bI{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const yu=new h.OlP("",{providedIn:"root",factory:()=>({})}),vu=new h.OlP("ROUTES");let _c=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ft(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Mo(t.loadComponent()).pipe((0,be.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ro(()=>{this.componentLoaders.delete(t)})),i=new Ao(r,()=>new pn.x).pipe(So());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ft({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,at.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,b=!1;Array.isArray(d)?y=d:(p=d.create(t).injector,y=_g(p.get(vu,[],h.XFs.Self|h.XFs.Optional)));return{routes:y.map(Vy),injector:p}}),Ro(()=>{this.childrenLoaders.delete(r)})),u=new Ao(s,()=>new pn.x).pipe(So());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Mo(t()).pipe((0,D.z)(r=>r instanceof h.YKP||Array.isArray(r)?ft(r):(0,yn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class US{}class Ik{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function BS(n){throw n}function HS(n,e,t){return e.parse("/")}const jS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function $g(){const n=(0,h.f3M)(sf),e=(0,h.f3M)(gf),t=(0,h.f3M)(Ve),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),s=(0,h.f3M)(vu,{optional:!0})??[],u=(0,h.f3M)(yu,{optional:!0})??{},d=(0,h.f3M)(II),p=(0,h.f3M)(jg,{optional:!0}),y=(0,h.f3M)(US,{optional:!0}),b=(0,h.f3M)(FS,{optional:!0}),T=new br(null,n,e,t,r,i,_g(s));return y&&(T.urlHandlingStrategy=y),b&&(T.routeReuseStrategy=b),T.titleStrategy=p??d,function TI(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,T),T}let br=(()=>{class n{constructor(t,r,i,s,u,d,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pn.x,this.errorHandler=BS,this.malformedUriErrorHandler=HS,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ft(void 0),this.urlHandlingStrategy=new Ik,this.routeReuseStrategy=new Ek,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(_c),this.configLoader.onLoadEndListener=x=>this.triggerEvent(new Ay(x)),this.configLoader.onLoadStartListener=x=>this.triggerEvent(new J0(x)),this.ngModule=u.get(h.h0i),this.console=u.get(h.c2e);const T=u.get(h.R0b);this.isNgZoneEnabled=T instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function yg(){return new lu(new on([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Py(this.currentUrlTree,this.rootComponentType),this.transitions=new Vn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Di(i=>0!==i.id),(0,at.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Xn(i=>{let s=!1,u=!1;return ft(i).pipe((0,be.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Xn(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Wg(d.source)&&(this.browserUrlTree=d.extractedUrl),ft(d).pipe(Xn(T=>{const x=this.transitions.getValue();return r.next(new df(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?qr.E:Promise.resolve(T)}),function jy(n,e,t,r){return Xn(i=>function mI(n,e,t,r,i){return new _I(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,at.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,be.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function PS(n,e,t,r,i,s){return(0,D.z)(u=>function yI(n,e,t,r,i,s,u="emptyOnly",d="legacy"){return new vI(n,e,t,r,i,u,d,s).recognize().pipe(Xn(p=>null===p?function Wy(n){return new mr.y(e=>e.error(n))}(new RS):ft(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,s).pipe((0,at.U)(d=>({...u,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,be.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(F,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new QT(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:F,source:j,restoredState:ne,extras:de}=d,qe=new df(x,this.serializeUrl(F),j,ne);r.next(qe);const tt=Py(F,this.rootComponentType).snapshot;return ft(i={...d,targetSnapshot:tt,urlAfterRedirects:F,extras:{...de,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),qr.E}),(0,be.b)(d=>{const p=new JT(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,at.U)(d=>i={...d,guards:gS(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function wk(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?ft({...t,guardsResult:!0}):function uI(n,e,t,r){return(0,yn.D)(n).pipe((0,D.z)(i=>function Lg(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ft(s.map(d=>{const p=Ra(e)??i,y=gc(d,p);return Mo(function lI(n){return n&&gu(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(X())})).pipe(Ef()):ft(!0)}(i.component,i.route,t,e,r)),X(i=>!0!==i,!0))}(u,r,i,n).pipe((0,D.z)(d=>d&&function Sl(n){return"boolean"==typeof n}(d)?function vS(n,e,t,r){return(0,yn.D)(e).pipe(ce(i=>Da(function ES(n,e){return null!==n&&e&&e(new eS(n)),ft(!0)}(i.route.parent,r),function wS(n,e){return null!==n&&e&&e(new X0(n)),ft(!0)}(i.route,r),function cI(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function mS(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Hi(()=>ft(u.guards.map(p=>{const y=Ra(u.node)??t,b=gc(p,y);return Mo(function aI(n){return n&&gu(n.canActivateChild)}(b)?b.canActivateChild(r,n):y.runInContext(()=>b(r,n))).pipe(X())})).pipe(Ef())));return ft(s).pipe(Ef())}(n,i.path,t),function IS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const i=r.map(s=>Hi(()=>{const u=Ra(e)??t,d=gc(s,u);return Mo(function oI(n){return n&&gu(n.canActivate)}(d)?d.canActivate(e,n):u.runInContext(()=>d(e,n))).pipe(X())}));return ft(i).pipe(Ef())}(n,i.route,t))),X(i=>!0!==i,!0))}(r,s,n,e):ft(d)),(0,at.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,be.b)(d=>{if(i.guardsResult=d.guardsResult,L(d.guardsResult))throw Pg(0,d.guardsResult);const p=new XT(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),Di(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),qy(d=>{if(d.guards.canActivateChecks.length)return ft(d).pipe((0,be.b)(p=>{const y=new Q0(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Xn(p=>{let y=!1;return ft(p).pipe(function NS(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ft(t);let s=0;return(0,yn.D)(i).pipe(ce(u=>function wI(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!EI(i)&&(s[Hr]=i.title),function Vd(n,e,t,r){const i=function kS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ft({});const s={};return(0,yn.D)(i).pipe((0,D.z)(u=>function OS(n,e,t,r){const i=Ra(e)??r,s=gc(n,i);return Mo(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(X(),(0,be.b)(d=>{s[u]=d}))),jt(1),function Kr(n){return(0,at.U)(()=>n)}(s),ze(u=>wf(u)?qr.E:To(u)))}(s,n,e,r).pipe((0,at.U)(u=>(n._resolvedData=u,n.data=Ny(n,t).resolve,i&&EI(i)&&(n.data[Hr]=i.title),null)))}(u.route,r,n,e)),(0,be.b)(()=>s++),jt(1),(0,D.z)(u=>s===i.length?ft(t):qr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,be.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,be.b)(p=>{const y=new Sy(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),qy(d=>{const p=y=>{const b=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,be.b)(T=>{y.component=T}),(0,at.U)(()=>{})));for(const T of y.children)b.push(...p(T));return b};return ru(p(d.targetSnapshot.root)).pipe(S(),Pn(1))}),qy(()=>this.afterPreactivation()),(0,at.U)(d=>{const p=function nS(n,e,t){const r=kd(n,e._root,t?t._root:void 0);return new My(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:p}}),(0,be.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,at.U)(r=>(new pS(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,be.b)({next(){s=!0},complete(){s=!0}}),Ro(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ze(d=>{if(u=!0,pu(d)){Ng(d)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new Ag(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(p),Ng(d)){const y=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Wg(i.source)};this.scheduleNavigation(y,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Y0(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return qr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Vy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:d,preserveFragment:p}=r,y=i||this.routerState.root,b=p?this.currentUrlTree.fragment:u;let T=null;switch(d){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),Xt(y,this.currentUrlTree,t,T,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=L(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function $S(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...jS}:!1===r?{...DI}:r,L(t))return vy(this.currentUrlTree,t,i);const s=this.parseUrl(t);return vy(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new hc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let d,p,y;u?(d=u.resolve,p=u.reject,y=u.promise):y=new Promise((x,F)=>{d=x,p=F});const b=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:b,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:d,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(x=>Promise.reject(x))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new Ag(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return $g()},providedIn:"root"}),n})();function Wg(n){return"imperative"!==n}let wu=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new pn.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(br),h.Y36(Dl),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class SI{}let zS=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(Di(t=>t instanceof hc),ce(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,h.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,d=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,yn.D)(i).pipe((0,Ca.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ft(null);const s=i.pipe((0,D.z)(u=>null===u?ft(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,yn.D)([s,u]).pipe((0,Ca.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(br),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(SI),h.LFG(_c))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eu=new h.OlP("");let xa=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof df?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof hc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new fu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Df(n,e){return{\u0275kind:n,\u0275providers:e}}function zg(n){return[{provide:vu,multi:!0,useValue:n}]}function Zy(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(br),i=n.get(KS);1===n.get(qg)&&r.initialNavigation(),n.get(RI,null,h.XFs.Optional)?.setUpPreloading(),n.get(Eu,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const KS=new h.OlP("",{factory:()=>new pn.x}),qg=new h.OlP("",{providedIn:"root",factory:()=>1});const RI=new h.OlP("");function Po(n){return Df(0,[{provide:RI,useExisting:zS},{provide:SI,useExisting:n}])}const xI=new h.OlP("ROUTER_FORROOT_GUARD"),QS=[Ve,{provide:sf,useClass:vl},{provide:br,useFactory:$g},gf,{provide:Dl,useFactory:function qS(n){return n.routerState.root},deps:[br]},_c];function JS(){return new h.PXZ("Router",br)}let Yy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[QS,[],zg(t),{provide:xI,useFactory:Zt,deps:[[br,new h.FiY,new h.tp0]]},{provide:yu,useValue:r||{}},r?.useHash?{provide:Ce,useClass:Je}:{provide:Ce,useClass:nt},{provide:Eu,useFactory:()=>{const n=(0,h.f3M)(br),e=(0,h.f3M)(ud),t=(0,h.f3M)(yu);return t.scrollOffset&&e.setOffset(t.scrollOffset),new xa(n,e,t)}},r?.preloadingStrategy?Po(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:JS},r?.initialNavigation?MI(r):[],[{provide:Qy,useFactory:Zy},{provide:h.tb,multi:!0,useExisting:Qy}]]}}static forChild(t){return{ngModule:n,providers:[zg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xI,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[kg]}),n})();function Zt(n){return"guarded"}function MI(n){return["disabled"===n.initialNavigation?Df(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(br);return()=>{e.setUpLocationChangeListener()}}},{provide:qg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Df(2,[{provide:qg,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Y,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const u=e.get(br),d=e.get(KS);(function i(s){e.get(br).events.pipe(Di(d=>d instanceof hc||d instanceof Ag||d instanceof Y0),(0,at.U)(d=>d instanceof hc||d instanceof Ag&&(0===d.code||1===d.code)&&null),Di(d=>null!==d),Pn(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),u.afterPreactivation=()=>(s(!0),r||d.closed?ft(void 0):d),u.initialNavigation()}))}}]).\u0275providers:[]]}const Qy=new h.OlP("");let Jy=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),yc=(()=>{class n extends Jy{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Js=new h.OlP("NgValueAccessor"),Rk={provide:Js,useExisting:(0,h.Gpc)(()=>bs),multi:!0},OI=new h.OlP("CompositionEventMode");let bs=(()=>{class n extends Jy{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function kI(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(OI,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[h._Bn([Rk]),h.qOj]}),n})();function Ma(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Kg(n){return null!=n&&"number"==typeof n.length}const Si=new h.OlP("NgValidators"),vc=new h.OlP("NgAsyncValidators"),xk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class xr{static min(e){return function LI(n){return e=>{if(Ma(e.value)||Ma(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Xy(n){return e=>{if(Ma(e.value)||Ma(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function sA(n){return Ma(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function FI(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function wc(n){return Ma(n.value)||xk.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function VI(n){return e=>Ma(e.value)||!Kg(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ev(n){return e=>Kg(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Sf(n){if(!n)return Zg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ma(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return nv(e)}static composeAsync(e){return iv(e)}}function Zg(n){return null}function tv(n){return null!=n}function UI(n){return(0,h.QGY)(n)?(0,yn.D)(n):n}function BI(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function HI(n,e){return e.map(t=>t(n))}function jI(n){return n.map(e=>function oA(n){return!n.validate}(e)?e:t=>e.validate(t))}function nv(n){if(!n)return null;const e=n.filter(tv);return 0==e.length?null:function(t){return BI(HI(t,e))}}function rv(n){return null!=n?nv(jI(n)):null}function iv(n){if(!n)return null;const e=n.filter(tv);return 0==e.length?null:function(t){return function nA(...n){const e=(0,ts.jO)(n),{args:t,keys:r}=Ws(n),i=new mr.y(s=>{const{length:u}=t;if(!u)return void s.complete();const d=new Array(u);let p=u,y=u;for(let b=0;b<u;b++){let T=!1;(0,rs.Xf)(t[b]).subscribe((0,Hn.x)(s,x=>{T||(T=!0,y--),d[b]=x},()=>p--,void 0,()=>{(!p||!T)&&(y||s.next(r?ml(r,d):d),s.complete())}))}});return e?i.pipe(nu(e)):i}(HI(t,e).map(UI)).pipe((0,at.U)(BI))}}function Yg(n){return null!=n?iv(jI(n)):null}function Qg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aA(n){return n._rawValidators}function Jg(n){return n._rawAsyncValidators}function sv(n){return n?Array.isArray(n)?n:[n]:[]}function ov(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ec(n,e){const t=sv(e);return sv(n).forEach(i=>{ov(t,i)||t.push(i)}),t}function av(n,e){return sv(e).filter(t=>!ov(n,t))}class lv{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Yg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ni extends lv{get formDirective(){return null}get path(){return null}}class ri extends lv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class uv{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Cs=(()=>{class n extends uv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ri,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Af=(()=>{class n extends uv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ni,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const tm="VALID",Rf="INVALID",Ic="PENDING",xf="DISABLED";function Mf(n){return(fv(n)?n.validators:n)||null}function cA(n){return Array.isArray(n)?rv(n):n||null}function ZI(n,e){return(fv(e)?e.asyncValidators:n)||null}function dA(n){return Array.isArray(n)?Yg(n):n||null}function fv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function hA(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function fA(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})}class pv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=cA(this._rawValidators),this._composedAsyncValidatorFn=dA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===tm}get invalid(){return this.status===Rf}get pending(){return this.status==Ic}get disabled(){return this.status===xf}get enabled(){return this.status!==xf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=cA(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=dA(e)}addValidators(e){this.setValidators(Ec(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ec(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(av(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(av(e,this._rawAsyncValidators))}hasValidator(e){return ov(this._rawValidators,e)}hasAsyncValidator(e){return ov(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ic,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=tm,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tm||this.status===Ic)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xf:tm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ic,this._hasOwnPendingAsyncValidator=!0;const t=UI(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?xf:this.errors?Rf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ic)?Ic:this._anyControlsHaveStatus(Rf)?Rf:tm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){fv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class nm extends pv{constructor(e,t,r){super(Mf(t),ZI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){fA(this,0,e),Object.keys(e).forEach(r=>{hA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Al extends nm{}function rm(n,e){return[...e.path,n]}function Bd(n,e){mv(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function QI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&JI(n,e)})}(n,e),function XI(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function pA(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&JI(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function gv(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Hd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),No(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Pf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mv(n,e){const t=aA(n);null!==e.validator?n.setValidators(Qg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Jg(n);null!==e.asyncValidator?n.setAsyncValidators(Qg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Pf(e._rawValidators,i),Pf(e._rawAsyncValidators,i)}function No(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=aA(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=Jg(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Pf(e._rawValidators,r),Pf(e._rawAsyncValidators,r),t}function JI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kf(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function om(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===bs?t=s:function sm(n){return Object.getPrototypeOf(n.constructor)===yc}(s)?r=s:i=s}),i||r||t||null}function mA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function rb(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ss=class extends pv{constructor(e=null,t,r){super(Mf(t),ZI(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),fv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=rb(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){rb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Iv={provide:ri,useExisting:(0,h.Gpc)(()=>Of)},bv=(()=>Promise.resolve())();let Of=(()=>{class n extends ri{constructor(t,r,i,s,u){super(),this._changeDetectorRef=u,this.control=new ss,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=om(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),kf(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bv.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);bv.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?rm(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ni,9),h.Y36(Si,10),h.Y36(vc,10),h.Y36(Js,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Iv]),h.qOj,h.TTD]}),n})(),Cv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),ob=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const eo=new h.OlP("NgModelWithFormControlWarning"),IA={provide:ni,useExisting:(0,h.Gpc)(()=>am)};let am=(()=>{class n extends ni{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(No(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Bd(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Hd(t.control||null,t,!1),function vv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function yv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Hd(r||null,t),(n=>n instanceof ss)(i)&&(Bd(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function eb(n,e){mv(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function gA(n,e){return No(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mv(this.form,this),this._oldForm&&No(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Si,10),h.Y36(vc,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([IA]),h.qOj,h.TTD]}),n})();const CA={provide:ri,useExisting:(0,h.Gpc)(()=>um)};let um=(()=>{class n extends ri{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=om(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),kf(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return rm(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(ni,13),h.Y36(Si,10),h.Y36(vc,10),h.Y36(Js,10),h.Y36(eo,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([CA]),h.qOj,h.TTD]}),n})(),wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[ob]}),n})(),RA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[wb]}),n})(),Eb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:eo,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[wb]}),n})();class Ib extends pv{constructor(e,t,r){super(Mf(t),ZI(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){fA(this,0,e),e.forEach((r,i)=>{hA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Iu(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let xA=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return Iu(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new nm(i,s)}record(t,r=null){const i=this._reduceControls(t);return new Al(i,r)}control(t,r,i){let s={};return this.useNonNullable?(Iu(r)?s=r:(s.validators=r,s.asyncValidators=i),new ss(t,{...s,nonNullable:!0})):new ss(t,r,i)}array(t,r,i){const s=t.map(u=>this._createControl(u));return new Ib(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof ss||t instanceof pv?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:Eb}),n})();var ko=V(127);const mm_firebase={projectId:"the-project-be0ce",appId:"1:717332156551:web:ff7cb9d83dda008fcd2822",storageBucket:"the-project-be0ce.appspot.com",apiKey:"AIzaSyDWM-gY_VAzJiNuBV1pIoR-QKxyKf3CnNc",authDomain:"the-project-be0ce.firebaseapp.com",messagingSenderId:"717332156551"};var $i=V(6451),bu=V(5363),Ai=V(6063);class Dc extends pn.x{constructor(e=1/0,t=1/0,r=Ai.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)d=p;d&&r.splice(0,d+1)}}}var Vf=V(3099);function Ds(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Vf.B)({connector:()=>new Dc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _m(n,e){return(0,zs.m)(e)?Xn(()=>n,e):Xn(()=>n)}var Cu=V(9468),Qt=V(5813),jr=V(2011),Ts=V(5867);class Oo{constructor(e){return e}}class Du{constructor(){return(0,Ts.C6)()}}const Tu=new h.OlP("angularfire2._apps"),bb={provide:Oo,useFactory:function $d(n){return n&&1===n.length?n[0]:new Oo((0,Ts.Mq)())},deps:[[new h.FiY,Tu]]},Cb={provide:Du,deps:[[new h.FiY,Tu]]};function Db(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Oo(r)}}let Tb=(()=>{class n{constructor(t){(0,Ts.KN)("angularfire",Qt.q4.full,"core"),(0,Ts.KN)("angularfire",Qt.q4.full,"app"),(0,Ts.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[bb,Cb]}),n})();function Sb(n,...e){return{ngModule:Tb,providers:[{provide:Tu,useFactory:Db(n),multi:!0,deps:[h.R0b,h.zs3,Qt.HU,...e]}]}}const Ab=(0,Qt.u3)(Ts.ZF,!0);var De=V(5861),os=V(9681),Lo=V(4859),U=V(2090),Fo=V(1877);const Wd=new Map,Bf={activated:!1,tokenObservers:[]},Lv={initialized:!1,enabled:!1};function fi(n){return Wd.get(n)||Object.assign({},Bf)}function Tc(){return Lv}class Mb{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,De.Z)(function*(){t.stop();try{t.pending=new U.BH,yield function OA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new U.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ri=new U.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Bv(n){if(!fi(n).activated)throw Ri.create("use-before-activation",{appName:n.name})}function vm(n,e){return wm.apply(this,arguments)}function wm(){return(wm=(0,De.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const F=yield u.getHeartbeatsHeader();F&&(s["X-Firebase-Client"]=F)}const d={method:"POST",body:JSON.stringify(e),headers:s};let p,y;try{p=yield fetch(n,d)}catch(F){throw Ri.create("fetch-network-error",{originalErrorMessage:null===(r=F)||void 0===r?void 0:r.message})}if(200!==p.status)throw Ri.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(F){throw Ri.create("fetch-parse-error",{originalErrorMessage:null===(i=F)||void 0===i?void 0:i.message})}const b=y.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Ri.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(b[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+T,issuedAtTimeMillis:x}})).apply(this,arguments)}function kb(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Gd="firebase-app-check-store";let Wf=null;function Wv(){return Wf||(Wf=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Ri.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Gd,{keyPath:"compositeKey"})}}catch(r){e(Ri.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Wf)}function Mr(){return(Mr=(0,De.Z)(function*(n,e){const r=(yield Wv()).transaction(Gd,"readwrite"),s=r.objectStore(Gd).put({compositeKey:n,value:e});return new Promise((u,d)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var y;d(Ri.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const zd=new Fo.Yd("@firebase/app-check");function Im(n,e){return(0,U.hl)()?function LA(n,e){return function Vb(n,e){return Mr.apply(this,arguments)}(function Ub(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Bb(){return Tc().enabled}function Kv(){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,De.Z)(function*(){const n=Tc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Qk={error:"UNKNOWN_ERROR"};function jb(n){return U.US.encodeString(JSON.stringify(n),!1)}function Kd(n){return to.apply(this,arguments)}function to(){return(to=(0,De.Z)(function*(n,e=!1){const t=n.app;Bv(t);const r=fi(t);let s,i=r.token;if(i&&!Sc(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Sc(p)?i=p:yield Im(t,void 0))}if(!e&&i&&Sc(i))return{token:i.token};let d,u=!1;if(Bb()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vm(kb(t,yield Kv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const p=yield r.exchangeTokenPromise;return yield Im(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield fi(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?zd.warn(p.message):zd.error(p),s=p}return i?s?d=Sc(i)?{token:i.token,internalError:s}:Qv(s):(d={token:i.token},r.token=i,yield Im(t,i)):d=Qv(s),u&&no(t,d),d})).apply(this,arguments)}function bm(n,e){const t=fi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Vo(n){const{app:e}=n,t=fi(e);let r=t.tokenRefresher;r||(r=function Uo(n){const{app:e}=n;return new Mb((0,De.Z)(function*(){let r;if(r=fi(e).token?yield Kd(n,!0):yield Kd(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=fi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function no(n,e){const t=fi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Sc(n){return n.expireTimeMillis-Date.now()>0}function Qv(n){return{token:jb(Qk),error:n}}class UA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fi(this.app);for(const t of e)bm(this.app,t.next);return Promise.resolve()}}const qb="app-check-internal";!function ZA(){(0,os._registerComponent)(new Lo.wA("app-check",n=>function BA(n,e){return new UA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qb).initialize()})),(0,os._registerComponent)(new Lo.wA(qb,n=>function HA(n){return{getToken:e=>Kd(n,e),addTokenListener:e=>function Yv(n,e,t,r){const{app:i}=n,s=fi(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Sc(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),Vo(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Vo(n))}(n,"INTERNAL",e),removeTokenListener:e=>bm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,os.registerVersion)("@firebase/app-check","0.5.17")}();class Zd{constructor(){return(0,Qt.vb)("app-check")}}typeof window<"u"&&window;const Dm=new h.OlP("angularfire2.auth.use-emulator"),Tm=new h.OlP("angularfire2.auth.settings"),Sm=new h.OlP("angularfire2.auth.tenant-id"),Am=new h.OlP("angularfire2.auth.langugage-code"),Rm=new h.OlP("angularfire2.auth.use-device-language"),Rl=new h.OlP("angularfire.auth.persistence"),uw=(n,e,t,r,i,s,u,d)=>(0,jr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[y,b]of Object.entries(u))p.settings[y]=b;return d&&p.setPersistence(d),p},[t,r,i,s,u,d]);let xm=(()=>{class n{constructor(t,r,i,s,u,d,p,y,b,T,x,F){const j=new pn.x,ne=ft(void 0).pipe((0,bu.Q)(u.outsideAngular),Xn(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,5881)))),(0,at.U)(()=>(0,jr.on)(t,s,r)),(0,at.U)(de=>uw(de,s,d,y,b,T,p,x)),Ds({bufferSize:1,refCount:!1}));if(na(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{ne.pipe(X()).subscribe();const qe=ne.pipe(Xn(ht=>ht.getRedirectResult().then(Pt=>Pt,()=>null)),Qt.iC,Ds({bufferSize:1,refCount:!1})),tt=ne.pipe(Xn(ht=>new mr.y(Pt=>({unsubscribe:s.runOutsideAngular(()=>ht.onAuthStateChanged(Ut=>Pt.next(Ut),Ut=>Pt.error(Ut),()=>Pt.complete()))})))),ct=ne.pipe(Xn(ht=>new mr.y(Pt=>({unsubscribe:s.runOutsideAngular(()=>ht.onIdTokenChanged(Ut=>Pt.next(Ut),Ut=>Pt.error(Ut),()=>Pt.complete()))}))));this.authState=qe.pipe(_m(tt),(0,Cu.R)(u.outsideAngular),(0,bu.Q)(u.insideAngular)),this.user=qe.pipe(_m(ct),(0,Cu.R)(u.outsideAngular),(0,bu.Q)(u.insideAngular)),this.idToken=this.user.pipe(Xn(ht=>ht?(0,yn.D)(ht.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Xn(ht=>ht?(0,yn.D)(ht.getIdTokenResult()):ft(null))),this.credential=(0,$i.T)(qe,j,this.authState.pipe(Di(ht=>!ht))).pipe((0,at.U)(ht=>ht?.user?ht:null),(0,Cu.R)(u.outsideAngular),(0,bu.Q)(u.insideAngular))}return(0,jr.pX)(this,ne,s,{spy:{apply:(de,qe,tt)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&tt.then(ct=>j.next(ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jr.Dh),h.LFG(jr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qt.HU),h.LFG(Dm,8),h.LFG(Tm,8),h.LFG(Sm,8),h.LFG(Am,8),h.LFG(Rm,8),h.LFG(Rl,8),h.LFG(Zd,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),cw=(()=>{class n{constructor(t){this.afAuth=t,this.fireApp2=ko.Z.initializeApp(mm_firebase,"tempApp"),this.currentUser=this.afAuth.authState}CreateNewUser(t,r){return new Promise((i,s)=>{this.fireApp2.auth().createUserWithEmailAndPassword(t,r).then(()=>{i(!0)},u=>{s(u)})})}SignInUser(t,r){return new Promise((i,s)=>{ko.Z.auth().signInWithEmailAndPassword(t,r).then(()=>{i(!0),console.log("resolve")},u=>{console.log(t,r),s(u),console.log("reject")})})}SignOutUser(){ko.Z.auth().signOut()}IsConnected(){return new Promise((t,r)=>{ko.Z.auth().onAuthStateChanged(i=>{i?t(!0):r("offline")})})}Auth(){return ko.Z.auth()}CurrentUserEmail(){return ko.Z.auth().currentUser?.email}CurrentUserUid(){return ko.Z.auth().currentUser?.uid}ResetPassword(t){return new Promise((r,i)=>{ko.Z.auth().sendPasswordResetEmail(t).then(()=>{r(!0)},s=>{i(s)})})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(xm))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gn=(()=>{class n{static addClass(t,r){t.classList?t.classList.add(r):t.className+=" "+r}static addMultipleClasses(t,r){if(t.classList){let i=r.trim().split(" ");for(let s=0;s<i.length;s++)t.classList.add(i[s])}else{let i=r.split(" ");for(let s=0;s<i.length;s++)t.className+=" "+i[s]}}static removeClass(t,r){t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(t,r){return t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className)}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return t?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,i=0;for(var s=0;s<r.length;s++){if(r[s]==t)return i;1==r[s].nodeType&&i++}return-1}static indexWithinGroup(t,r){let i=t.parentNode?t.parentNode.childNodes:[],s=0;for(var u=0;u<i.length;u++){if(i[u]==t)return s;i[u].attributes&&i[u].attributes[r]&&1==i[u].nodeType&&s++}return-1}static relativePosition(t,r){let i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t);const s=r.offsetHeight,u=r.getBoundingClientRect(),d=this.getViewport();let p,y;u.top+s+i.height>d.height?(p=-1*i.height,t.style.transformOrigin="bottom",u.top+p<0&&(p=-1*u.top)):(p=s,t.style.transformOrigin="top"),y=i.width>d.width?-1*u.left:u.left+i.width>d.width?-1*(u.left+i.width-d.width):0,t.style.top=p+"px",t.style.left=y+"px"}static absolutePosition(t,r){let F,j,i=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),s=i.height,u=i.width,d=r.offsetHeight,p=r.offsetWidth,y=r.getBoundingClientRect(),b=this.getWindowScrollTop(),T=this.getWindowScrollLeft(),x=this.getViewport();y.top+d+s>x.height?(F=y.top+b-s,t.style.transformOrigin="bottom",F<0&&(F=b)):(F=d+y.top+b,t.style.transformOrigin="top"),j=y.left+u>x.width?Math.max(0,y.left+T+p-u):y.left+T,t.style.top=F+"px",t.style.left=j+"px"}static getParents(t,r=[]){return null===t.parentNode?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let i=this.getParents(t);const s=/(auto|scroll)/,u=d=>{let p=window.getComputedStyle(d,null);return s.test(p.getPropertyValue("overflow"))||s.test(p.getPropertyValue("overflowX"))||s.test(p.getPropertyValue("overflowY"))};for(let d of i){let p=1===d.nodeType&&d.dataset.scrollselectors;if(p){let y=p.split(",");for(let b of y){let T=this.findSingle(d,b);T&&u(T)&&r.push(T)}}9!==d.nodeType&&u(d)&&r.push(d)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let i=getComputedStyle(t).getPropertyValue("borderTopWidth"),s=i?parseFloat(i):0,u=getComputedStyle(t).getPropertyValue("paddingTop"),d=u?parseFloat(u):0,p=t.getBoundingClientRect(),b=r.getBoundingClientRect().top+document.body.scrollTop-(p.top+document.body.scrollTop)-s-d,T=t.scrollTop,x=t.clientHeight,F=this.getOuterHeight(r);b<0?t.scrollTop=T+b:b+F>x&&(t.scrollTop=T+b-x+F)}static fadeIn(t,r){t.style.opacity=0;let i=+new Date,s=0,u=function(){s=+t.style.opacity.replace(",",".")+((new Date).getTime()-i)/r,t.style.opacity=s,i=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(u)||setTimeout(u,16))};u()}static fadeOut(t,r){var i=1,d=50/r;let p=setInterval(()=>{(i-=d)<=0&&(i=0,clearInterval(p)),t.style.opacity=i},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(u){return-1!==[].indexOf.call(document.querySelectorAll(u),this)}).call(t,r)}static getOuterWidth(t,r){let i=t.offsetWidth;if(r){let s=getComputedStyle(t);i+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return i}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(t,r){let i=t.offsetHeight;if(r){let s=getComputedStyle(t);i+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return i}static getHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let t=window,r=document,i=r.documentElement,s=r.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||s.clientWidth,height:t.innerHeight||i.clientHeight||s.clientHeight}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let i=t.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot append "+r+" to "+t;r.el.nativeElement.appendChild(t)}}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot remove "+t+" from "+r;r.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,i){t[r].apply(t,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return null===t.offsetParent}static getFocusableElements(t){let r=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),i=[];for(let s of r)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&i.push(s);return i}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class sR{constructor(e,t=(()=>{})){this.element=e,this.listener=t}bindScrollListener(){this.scrollableParents=gn.getScrollableParents(this.element);for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let pi=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),aR=(()=>{class n{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[pi.STARTS_WITH,pi.CONTAINS,pi.NOT_CONTAINS,pi.ENDS_WITH,pi.EQUALS,pi.NOT_EQUALS],numeric:[pi.EQUALS,pi.NOT_EQUALS,pi.LESS_THAN,pi.LESS_THAN_OR_EQUAL_TO,pi.GREATER_THAN,pi.GREATER_THAN_OR_EQUAL_TO],date:[pi.DATE_IS,pi.DATE_IS_NOT,pi.DATE_BEFORE,pi.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new pn.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),St=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.NO_FILTER="noFilter",n.LT="lt",n.LTE="lte",n.GT="gt",n.GTE="gte",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.CLEAR="clear",n.APPLY="apply",n.MATCH_ALL="matchAll",n.MATCH_ANY="matchAny",n.ADD_RULE="addRule",n.REMOVE_RULE="removeRule",n.ACCEPT="accept",n.REJECT="reject",n.CHOOSE="choose",n.UPLOAD="upload",n.CANCEL="cancel",n.DAY_NAMES="dayNames",n.DAY_NAMES_SHORT="dayNamesShort",n.DAY_NAMES_MIN="dayNamesMin",n.MONTH_NAMES="monthNames",n.MONTH_NAMES_SHORT="monthNamesShort",n.FIRST_DAY_OF_WEEK="firstDayOfWeek",n.TODAY="today",n.WEEK_HEADER="weekHeader",n.WEAK="weak",n.MEDIUM="medium",n.STRONG="strong",n.PASSWORD_PROMPT="passwordPrompt",n.EMPTY_MESSAGE="emptyMessage",n.EMPTY_FILTER_MESSAGE="emptyFilterMessage",n})(),Mm=(()=>{class n{constructor(){this.clickSource=new pn.x,this.clickObservable=this.clickSource.asObservable()}add(t){t&&this.clickSource.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hw=(()=>{class n{constructor(t){this.template=t}getType(){return this.name}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),uR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Qa]}),n})(),Yb=(()=>{class n{constructor(t,r,i){this.el=t,this.zone=r,this.config=i}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let r=this.getInk();if(!r||"none"===getComputedStyle(r,null).display)return;if(gn.removeClass(r,"p-ink-active"),!gn.getHeight(r)&&!gn.getWidth(r)){let d=Math.max(gn.getOuterWidth(this.el.nativeElement),gn.getOuterHeight(this.el.nativeElement));r.style.height=d+"px",r.style.width=d+"px"}let i=gn.getOffset(this.el.nativeElement),s=t.pageX-i.left+document.body.scrollTop-gn.getWidth(r)/2,u=t.pageY-i.top+document.body.scrollLeft-gn.getHeight(r)/2;r.style.top=u+"px",r.style.left=s+"px",gn.addClass(r,"p-ink-active")}getInk(){for(let t=0;t<this.el.nativeElement.children.length;t++)if(-1!==this.el.nativeElement.children[t].className.indexOf("p-ink"))return this.el.nativeElement.children[t];return null}resetInk(){let t=this.getInk();t&&gn.removeClass(t,"p-ink-active")}onAnimationEnd(t){gn.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),gn.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b),h.Y36(aR,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),Qb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Qa]}),n})();function Jb(n,e){1&n&&h.GkF(0)}const dR=function(n,e,t,r){return{"p-button-icon":!0,"p-button-icon-left":n,"p-button-icon-right":e,"p-button-icon-top":t,"p-button-icon-bottom":r}};function hR(n,e){if(1&n&&h._UZ(0,"span",4),2&n){const t=h.oxw();h.Tol(t.loading?"p-button-loading-icon "+t.loadingIcon:t.icon),h.Q6J("ngClass",h.l5B(4,dR,"left"===t.iconPos&&t.label,"right"===t.iconPos&&t.label,"top"===t.iconPos&&t.label,"bottom"===t.iconPos&&t.label)),h.uIk("aria-hidden",!0)}}function fR(n,e){if(1&n&&(h.TgZ(0,"span",5),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.uIk("aria-hidden",t.icon&&!t.label),h.xp6(1),h.Oqu(t.label||"\xa0")}}function Yf(n,e){if(1&n&&(h.TgZ(0,"span",4),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.badgeClass),h.Q6J("ngClass",t.badgeStyleClass()),h.xp6(1),h.Oqu(t.badge)}}const pR=function(n,e,t,r,i){return{"p-button p-component":!0,"p-button-icon-only":n,"p-button-vertical":e,"p-disabled":t,"p-button-loading":r,"p-button-loading-label-only":i}},gR=["*"];let mR=(()=>{class n{constructor(t){this.el=t,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,gn.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let t=document.createElement("span");this.icon&&!this.label&&t.setAttribute("aria-hidden","true"),t.className="p-button-label",this.label?t.appendChild(document.createTextNode(this.label)):t.innerHTML="&nbsp;",this.el.nativeElement.appendChild(t),this.initialized=!0}getStyleClass(){let t="p-button p-component";return this.icon&&!this.label&&(t+=" p-button-icon-only"),this.loading&&(t+=" p-disabled p-button-loading",!this.icon&&this.label&&(t+=" p-button-loading-label-only")),t}setStyleClass(){let t=this.getStyleClass();this.el.nativeElement.className=t+" "+this._initialStyleClass}createIconEl(){let t=document.createElement("span");t.className="p-button-icon",t.setAttribute("aria-hidden","true");let r=this.label?"p-button-icon-"+this.iconPos:null;r&&gn.addClass(t,r);let i=this.getIconClass();i&&gn.addMultipleClasses(t,i);let s=gn.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(t,s):this.el.nativeElement.appendChild(t)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let t=gn.findSingle(this.el.nativeElement,".p-button-icon");t?t.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let t=gn.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(t)}get label(){return this._label}set label(t){this._label=t,this.initialized&&(gn.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(t){this._icon=t,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(t){this._loading=t,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),n})(),Pm=(()=>{class n{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new h.vpe,this.onFocus=new h.vpe,this.onBlur=new h.vpe}ngAfterContentInit(){this.templates.forEach(t=>{t.getType(),this.contentTemplate=t.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["p-button"]],contentQueries:function(t,r,i){if(1&t&&h.Suo(i,hw,4),2&t){let s;h.iGM(s=h.CRH())&&(r.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:gR,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"button",0),h.NdJ("click",function(s){return r.onClick.emit(s)})("focus",function(s){return r.onFocus.emit(s)})("blur",function(s){return r.onBlur.emit(s)}),h.Hsn(1),h.YNc(2,Jb,1,0,"ng-container",1),h.YNc(3,hR,1,9,"span",2),h.YNc(4,fR,2,2,"span",3),h.YNc(5,Yf,2,4,"span",2),h.qZA()),2&t&&(h.Tol(r.styleClass),h.Q6J("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",h.qbA(11,pR,r.icon&&!r.label,("top"===r.iconPos||"bottom"===r.iconPos)&&r.label,r.disabled||r.loading,r.loading,r.loading&&!r.icon&&r.label)),h.uIk("type",r.type)("aria-label",r.ariaLabel),h.xp6(2),h.Q6J("ngTemplateOutlet",r.contentTemplate),h.xp6(1),h.Q6J("ngIf",!r.contentTemplate&&(r.icon||r.loading)),h.xp6(1),h.Q6J("ngIf",!r.contentTemplate),h.xp6(1),h.Q6J("ngIf",!r.contentTemplate&&r.badge))},dependencies:[mn,zn,mo,Za,Yb],encapsulation:2,changeDetection:0}),n})(),Xb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Qa,Qb]}),n})(),Nm=(()=>{class n{constructor(t,r,i){this.el=t,this.ngModel=r,this.cd=i}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(t){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(Of,8),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r.onInput(s)}),2&t&&h.ekj("p-filled",r.filled)}}),n})(),fw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Qa]}),n})();class eC{}const Ss="*";function _R(n,e){return{type:7,name:n,definitions:e,options:{}}}function tC(n,e=null){return{type:4,styles:e,timings:n}}function pw(n,e=null){return{type:2,steps:n,options:e}}function Jf(n){return{type:6,styles:n,offset:null}}function gw(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function vR(n){Promise.resolve().then(n)}class Yd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Xf{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?vR(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var yw=function wR(){let n=[];const i=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:i,set:(s,u,d)=>{u&&(u.style.zIndex=String(((s,u)=>{let d=n.length>0?n[n.length-1]:{key:s,value:u},p=d.value+(d.key===s?0:u)+1;return n.push({key:s,value:p}),p})(s,d)))},clear:s=>{s&&((s=>{n=n.filter(u=>u.value!==s)})(i(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();const ER=["input"];function IR(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"i",5),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.clear())}),h.qZA()}}function bR(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"i",6),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.onMaskToggle())}),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("ngClass",t.toggleIconClass())}}function nC(n,e){1&n&&h.GkF(0)}function CR(n,e){1&n&&h.GkF(0)}function DR(n,e){if(1&n&&(h.ynx(0),h.YNc(1,CR,1,0,"ng-container",8),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngTemplateOutlet",t.contentTemplate)}}const ep=function(n){return{width:n}};function TR(n,e){if(1&n&&(h.TgZ(0,"div",11),h._UZ(1,"div",0),h.qZA(),h.TgZ(2,"div",12),h._uU(3),h.qZA()),2&n){const t=h.oxw(2);h.xp6(1),h.Q6J("ngClass",t.strengthClass())("ngStyle",h.VKq(3,ep,t.meter?t.meter.width:"")),h.xp6(2),h.Oqu(t.infoText)}}function rC(n,e){1&n&&h.GkF(0)}const SR=function(n,e){return{showTransitionParams:n,hideTransitionParams:e}},iC=function(n){return{value:"visible",params:n}};function AR(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",6,7),h.NdJ("click",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onOverlayClick(i))})("@overlayAnimation.start",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onAnimationStart(i))})("@overlayAnimation.done",function(i){h.CHM(t);const s=h.oxw();return h.KtG(s.onAnimationEnd(i))}),h.YNc(2,nC,1,0,"ng-container",8),h.YNc(3,DR,2,1,"ng-container",9),h.YNc(4,TR,4,5,"ng-template",null,10,h.W1O),h.YNc(6,rC,1,0,"ng-container",8),h.qZA()}if(2&n){const t=h.MAs(5),r=h.oxw();h.Q6J("ngClass","p-password-panel p-component")("@overlayAnimation",h.VKq(9,iC,h.WLB(6,SR,r.showTransitionOptions,r.hideTransitionOptions))),h.xp6(2),h.Q6J("ngTemplateOutlet",r.headerTemplate),h.xp6(1),h.Q6J("ngIf",r.contentTemplate)("ngIfElse",t),h.xp6(3),h.Q6J("ngTemplateOutlet",r.footerTemplate)}}let sC=(()=>{class n{constructor(t,r){this.el=t,this.zone=r,this.promptLabel="Enter a password",this.weakLabel="Weak",this.mediumLabel="Medium",this.strongLabel="Strong",this.feedback=!0}set showPassword(t){this.el.nativeElement.type=t?"text":"password"}ngDoCheck(){this.updateFilledState()}onInput(t){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}createPanel(){this.panel=document.createElement("div"),this.panel.className="p-password-panel p-component p-password-panel-overlay p-connected-overlay",this.meter=document.createElement("div"),this.meter.className="p-password-meter",this.info=document.createElement("div"),this.info.className="p-password-info",this.info.textContent=this.promptLabel,this.panel.appendChild(this.meter),this.panel.appendChild(this.info),this.panel.style.minWidth=gn.getOuterWidth(this.el.nativeElement)+"px",document.body.appendChild(this.panel)}showOverlay(){this.feedback&&(this.panel||this.createPanel(),this.panel.style.zIndex=String(++gn.zindex),this.panel.style.display="block",this.zone.runOutsideAngular(()=>{setTimeout(()=>{gn.addClass(this.panel,"p-connected-overlay-visible"),this.bindScrollListener(),this.bindDocumentResizeListener()},1)}),gn.absolutePosition(this.panel,this.el.nativeElement))}hideOverlay(){this.feedback&&this.panel&&(gn.addClass(this.panel,"p-connected-overlay-hidden"),gn.removeClass(this.panel,"p-connected-overlay-visible"),this.unbindScrollListener(),this.unbindDocumentResizeListener(),this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.ngOnDestroy()},150)}))}onFocus(){this.showOverlay()}onBlur(){this.hideOverlay()}onKeyup(t){if(this.feedback){let i=t.target.value,s=null,u=null;if(0===i.length)s=this.promptLabel,u="0px 0px";else{var r=this.testStrength(i);r<30?(s=this.weakLabel,u="0px -10px"):r>=30&&r<80?(s=this.mediumLabel,u="0px -20px"):r>=80&&(s=this.strongLabel,u="0px -30px")}(!this.panel||!gn.hasClass(this.panel,"p-connected-overlay-visible"))&&this.showOverlay(),this.meter.style.backgroundPosition=u,this.info.textContent=s}}testStrength(t){let i,r=0;return i=t.match("[0-9]"),r+=25*this.normalize(i?i.length:1/4,1),i=t.match("[a-zA-Z]"),r+=10*this.normalize(i?i.length:.5,3),i=t.match("[!@#$%^&*?_~.,;=]"),r+=35*this.normalize(i?i.length:1/6,1),i=t.match("[A-Z]"),r+=30*this.normalize(i?i.length:1/6,1),r*=t.length/8,r>100?100:r}normalize(t,r){return t-r<=0?t/r:1+t/(t+r/4)*.5}get disabled(){return this.el.nativeElement.disabled}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new sR(this.el.nativeElement,()=>{gn.hasClass(this.panel,"p-connected-overlay-visible")&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){gn.isTouchDevice()||this.hideOverlay()}ngOnDestroy(){this.panel&&(this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindDocumentResizeListener(),document.body.removeChild(this.panel),this.panel=null,this.meter=null,this.info=null)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.R0b))},n.\u0275dir=h.lG2({type:n,selectors:[["","pPassword",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r.onInput(s)})("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()})("keyup",function(s){return r.onKeyup(s)}),2&t&&h.ekj("p-filled",r.filled)},inputs:{promptLabel:"promptLabel",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",feedback:"feedback",showPassword:"showPassword"}}),n})();const RR={provide:Js,useExisting:(0,h.Gpc)(()=>vw),multi:!0};let vw=(()=>{class n{constructor(t,r,i,s){this.cd=t,this.config=r,this.el=i,this.overlayService=s,this.mediumRegex="^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})",this.strongRegex="^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})",this.feedback=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.showClear=!1,this.onFocus=new h.vpe,this.onBlur=new h.vpe,this.onClear=new h.vpe,this.overlayVisible=!1,this.focused=!1,this.unmasked=!1,this.value=null,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"header":this.headerTemplate=t.template;break;case"footer":this.footerTemplate=t.template}})}ngOnInit(){this.infoText=this.promptText(),this.mediumCheckRegExp=new RegExp(this.mediumRegex),this.strongCheckRegExp=new RegExp(this.strongRegex),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.updateUI(this.value||"")})}onAnimationStart(t){switch(t.toState){case"visible":this.overlay=t.element,yw.set("overlay",this.overlay,this.config.zIndex.overlay),this.appendContainer(),this.alignOverlay(),this.bindScrollListener(),this.bindResizeListener();break;case"void":this.unbindScrollListener(),this.unbindResizeListener(),this.overlay=null}}onAnimationEnd(t){"void"===t.toState&&yw.clear(t.element)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):document.getElementById(this.appendTo).appendChild(this.overlay))}alignOverlay(){this.appendTo?(this.overlay.style.minWidth=gn.getOuterWidth(this.input.nativeElement)+"px",gn.absolutePosition(this.overlay,this.input.nativeElement)):gn.relativePosition(this.overlay,this.input.nativeElement)}onInput(t){this.value=t.target.value,this.onModelChange(this.value),this.onModelTouched()}onInputFocus(t){this.focused=!0,this.feedback&&(this.overlayVisible=!0),this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.feedback&&(this.overlayVisible=!1),this.onBlur.emit(t)}onKeyDown(t){"Escape"===t.key&&(this.overlayVisible=!1)}onKeyUp(t){this.feedback&&(this.updateUI(t.target.value),this.overlayVisible||(this.overlayVisible=!0))}updateUI(t){let r=null,i=null;switch(this.testStrength(t)){case 1:r=this.weakText(),i={strength:"weak",width:"33.33%"};break;case 2:r=this.mediumText(),i={strength:"medium",width:"66.66%"};break;case 3:r=this.strongText(),i={strength:"strong",width:"100%"};break;default:r=this.promptText(),i=null}this.meter=i,this.infoText=r}onMaskToggle(){this.unmasked=!this.unmasked}onOverlayClick(t){this.overlayService.add({originalEvent:t,target:this.el.nativeElement})}testStrength(t){let r=0;return this.strongCheckRegExp.test(t)?r=3:this.mediumCheckRegExp.test(t)?r=2:t.length&&(r=1),r}writeValue(t){this.value=void 0===t?null:t,this.feedback&&this.updateUI(this.value||""),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new sR(this.input.nativeElement,()=>{this.overlayVisible&&(this.overlayVisible=!1)})),this.scrollHandler.bindScrollListener()}bindResizeListener(){this.resizeListener||(this.resizeListener=()=>{this.overlayVisible&&!gn.isTouchDevice()&&(this.overlayVisible=!1)},window.addEventListener("resize",this.resizeListener))}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}containerClass(){return{"p-password p-component p-inputwrapper":!0,"p-input-icon-right":this.toggleMask}}inputFieldClass(){return{"p-password-input":!0,"p-disabled":this.disabled}}toggleIconClass(){return this.unmasked?"pi pi-eye-slash":"pi pi-eye"}strengthClass(){return`p-password-strength ${this.meter?this.meter.strength:""}`}filled(){return null!=this.value&&this.value.toString().length>0}promptText(){return this.promptLabel||this.getTranslation(St.PASSWORD_PROMPT)}weakText(){return this.weakLabel||this.getTranslation(St.WEAK)}mediumText(){return this.mediumLabel||this.getTranslation(St.MEDIUM)}strongText(){return this.strongLabel||this.getTranslation(St.STRONG)}restoreAppend(){this.overlay&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.overlay):document.getElementById(this.appendTo).removeChild(this.overlay))}inputType(){return this.unmasked?"text":"password"}getTranslation(t){return this.config.getTranslation(t)}clear(){this.value=null,this.onModelChange(this.value),this.writeValue(this.value),this.onClear.emit()}ngOnDestroy(){this.overlay&&(yw.clear(this.overlay),this.overlay=null),this.restoreAppend(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(aR),h.Y36(h.SBq),h.Y36(Mm))},n.\u0275cmp=h.Xpm({type:n,selectors:[["p-password"]],contentQueries:function(t,r,i){if(1&t&&h.Suo(i,hw,4),2&t){let s;h.iGM(s=h.CRH())&&(r.templates=s)}},viewQuery:function(t,r){if(1&t&&h.Gf(ER,5),2&t){let i;h.iGM(i=h.CRH())&&(r.input=i.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:8,hostBindings:function(t,r){2&t&&h.ekj("p-inputwrapper-filled",r.filled())("p-inputwrapper-focus",r.focused)("p-password-clearable",r.showClear)("p-password-mask",r.toggleMask)},inputs:{ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",label:"label",disabled:"disabled",promptLabel:"promptLabel",mediumRegex:"mediumRegex",strongRegex:"strongRegex",weakLabel:"weakLabel",mediumLabel:"mediumLabel",strongLabel:"strongLabel",inputId:"inputId",feedback:"feedback",appendTo:"appendTo",toggleMask:"toggleMask",inputStyleClass:"inputStyleClass",styleClass:"styleClass",style:"style",inputStyle:"inputStyle",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",placeholder:"placeholder",showClear:"showClear"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClear:"onClear"},features:[h._Bn([RR])],decls:6,vars:18,consts:[[3,"ngClass","ngStyle"],["pInputText","",3,"ngClass","ngStyle","value","input","focus","blur","keyup","keydown"],["input",""],["class","p-password-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],[1,"p-password-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","click"],["overlay",""],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["content",""],[1,"p-password-meter"],["className","p-password-info"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"input",1,2),h.NdJ("input",function(s){return r.onInput(s)})("focus",function(s){return r.onInputFocus(s)})("blur",function(s){return r.onInputBlur(s)})("keyup",function(s){return r.onKeyUp(s)})("keydown",function(s){return r.onKeyDown(s)}),h.qZA(),h.YNc(3,IR,1,0,"i",3),h.YNc(4,bR,1,1,"i",4),h.YNc(5,AR,7,11,"div",4),h.qZA()),2&t&&(h.Tol(r.styleClass),h.Q6J("ngClass",r.containerClass())("ngStyle",r.style),h.xp6(1),h.Tol(r.inputStyleClass),h.Q6J("ngClass",r.inputFieldClass())("ngStyle",r.inputStyle)("value",r.value),h.uIk("label",r.label)("aria-label",r.ariaLabel)("aria-labelledBy",r.ariaLabelledBy)("id",r.inputId)("type",r.inputType())("placeholder",r.placeholder),h.xp6(2),h.Q6J("ngIf",r.showClear&&null!=r.value),h.xp6(1),h.Q6J("ngIf",r.toggleMask),h.xp6(1),h.Q6J("ngIf",r.overlayVisible))},dependencies:[mn,zn,mo,Za,Nm],styles:[".p-password{position:relative;display:inline-flex}.p-password-panel{position:absolute;top:0;left:0}.p-password .p-password-panel{min-width:100%}.p-password-meter{height:10px}.p-password-strength{height:100%;width:0%;transition:width 1s ease-in-out}.p-fluid .p-password{display:flex}.p-password-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-password-clearable{position:relative}\n"],encapsulation:2,data:{animation:[_R("overlayAnimation",[gw(":enter",[Jf({opacity:0,transform:"scaleY(0.8)"}),tC("{{showTransitionParams}}")]),gw(":leave",[tC("{{hideTransitionParams}}",Jf({opacity:0}))])])]},changeDetection:0}),n})(),xR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Qa,fw,uR]}),n})(),oC=(()=>{class n{constructor(t,r,i){this.fb=t,this.authservice=r,this.router=i}ngOnInit(){this.initForm()}initForm(){this.loginForm=this.fb.group({email:new ss("",[xr.required,xr.email]),password:new ss("",[xr.required,xr.minLength(6)])})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}login(){const t=this.loginForm.get("email").value,r=this.loginForm.get("password").value;console.log(t+r),this.authservice.SignInUser(t,r).then(()=>{this.router.navigate(["/desktop"])},i=>{this.errorMessage=i,console.log(this.errorMessage)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xA),h.Y36(cw),h.Y36(br))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:14,vars:2,consts:[[1,"login-page"],[1,"login-form"],[3,"formGroup"],[1,"p-field"],["type","text","formControlName","email","placeholder","Email","id","email","pInputText",""],["type","password","id","password","formControlName","password","placeholder","Password","pPassword","","indicator","false",3,"feedback"],[1,"butts"],["type","submit","pButton","",3,"click"],["type","submit","routerLink","/register","pButton",""]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h2"),h._uU(3,"Login"),h.qZA(),h.TgZ(4,"form",2)(5,"div",3),h._UZ(6,"input",4),h.qZA(),h.TgZ(7,"div",3),h._UZ(8,"input",5),h.qZA(),h.TgZ(9,"div",6)(10,"button",7),h.NdJ("click",function(){return r.login()}),h._uU(11,"Login"),h.qZA(),h.TgZ(12,"button",8),h._uU(13,"Register"),h.qZA()()()()()),2&t&&(h.xp6(4),h.Q6J("formGroup",r.loginForm),h.xp6(4),h.Q6J("feedback",!1))},dependencies:[wu,Cv,bs,Cs,Af,am,um,mR,Nm,sC],styles:[".login-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-size:cover;background-position:center}.login-form[_ngcontent-%COMP%]{width:300px;margin-top:100px;background-color:#fff8c9;border-radius:3%;box-shadow:0 0 20px #00000080;opacity:.9;display:flex;flex-direction:column;align-items:center;padding:10px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#9b2b2bcb}.p-field[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#fff}input[_ngcontent-%COMP%]{width:100%;padding:8px}button[_ngcontent-%COMP%]{background-color:#beadfa;width:48%;justify-content:center;align-items:center;padding:10px;text-align:center;display:inline-block}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px}.butts[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:10px;flex-wrap:wrap}"]}),n})();var It,aC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xl={},ww=ww||{},Gt=aC||self;function Om(){}function tp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function np(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ew="closure_uid_"+(1e9*Math.random()>>>0),PR=0;function NR(n,e,t){return n.call.apply(n.bind,arguments)}function kR(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function xi(n,e,t){return(xi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?NR:kR).apply(null,arguments)}function Lm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ii(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function Ml(){this.s=this.s,this.o=this.o}Ml.prototype.s=!1,Ml.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function MR(n){Object.prototype.hasOwnProperty.call(n,Ew)&&n[Ew]||(n[Ew]=++PR)}(this)},Ml.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Fm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function uC(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(tp(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function Mi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Mi.prototype.h=function(){this.defaultPrevented=!0};var LR=function(){if(!Gt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Gt.addEventListener("test",Om,e),Gt.removeEventListener("test",Om,e)}catch{}return n}();function Qd(n){return/^[\s\xa0]*$/.test(n)}var Vm=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Um(n,e){return n<e?-1:n>e?1:0}function Jd(){var n=Gt.navigator;return n&&(n=n.userAgent)?n:""}function ka(n){return-1!=Jd().indexOf(n)}function Iw(n){return Iw[" "](n),n}Iw[" "]=Om;var Xd,n,FR=ka("Opera"),Ac=ka("Trident")||ka("MSIE"),Rc=ka("Edge"),Bm=Rc||Ac,cC=ka("Gecko")&&!(-1!=Jd().toLowerCase().indexOf("webkit")&&!ka("Edge"))&&!(ka("Trident")||ka("MSIE"))&&!ka("Edge"),fO=-1!=Jd().toLowerCase().indexOf("webkit")&&!ka("Edge");function Cw(){var n=Gt.document;return n?n.documentMode:void 0}e:{var Dw="",rp=(n=Jd(),cC?/rv:([^\);]+)(\)|;)/.exec(n):Rc?/Edge\/([\d\.]+)/.exec(n):Ac?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):fO?/WebKit\/(\S+)/.exec(n):FR?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(rp&&(Dw=rp?rp[1]:""),Ac){var Tw=Cw();if(null!=Tw&&Tw>parseFloat(Dw)){Xd=String(Tw);break e}}Xd=Dw}var dC={};var hC=Gt.document&&Ac&&(Cw()||parseInt(Xd,10))||void 0;function eh(n,e){if(Mi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(cC){e:{try{Iw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:VR[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&eh.X.h.call(this)}}ii(eh,Mi);var VR={2:"touch",3:"pen",4:"mouse"};eh.prototype.h=function(){eh.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ip="closure_listenable_"+(1e6*Math.random()|0),UR=0;function BR(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++UR,this.ba=this.ea=!1}function sp(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function fC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Rw(n){const e={};for(const t in n)e[t]=n[t];return e}const pC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<pC.length;s++)t=pC[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function xw(n){this.src=n,this.g={},this.h=0}function mC(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=lC(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(sp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Mw(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}xw.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Mw(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new BR(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var Pw="closure_lm_"+(1e6*Math.random()|0),Nw={};function kw(n,e,t,r,i){if(r&&r.once)return Lw(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)kw(n,e[s],t,r,i);return null}return t=jm(t),n&&n[ip]?n.N(e,t,np(r)?!!r.capture:!!r,i):Ow(n,e,t,!1,r,i)}function Ow(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=np(i)?!!i.capture:!!i,d=Uw(n);if(d||(n[Pw]=d=new xw(n)),(t=d.add(e,t,r,u,s)).proxy)return t;if(r=function HR(){const e=jR;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)LR||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(_C(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Lw(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Lw(n,e[s],t,r,i);return null}return t=jm(t),n&&n[ip]?n.O(e,t,np(r)?!!r.capture:!!r,i):Ow(n,e,t,!0,r,i)}function Fw(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Fw(n,e[s],t,r,i);else r=np(r)?!!r.capture:!!r,t=jm(t),n&&n[ip]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Mw(s=n.g[e],t,r,i))&&(sp(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=Uw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Mw(e,t,r,i)),(t=-1<n?e[n]:null)&&Vw(t))}function Vw(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[ip])mC(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(_C(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Uw(e))?(mC(t,n),0==t.h&&(t.src=null,e[Pw]=null)):sp(n)}}}function _C(n){return n in Nw?Nw[n]:Nw[n]="on"+n}function jR(n,e){if(n.ba)n=!0;else{e=new eh(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Vw(n),n=t.call(r,e)}return n}function Uw(n){return(n=n[Pw])instanceof xw?n:null}var xc="__closure_events_fn_"+(1e9*Math.random()>>>0);function jm(n){return"function"==typeof n?n:(n[xc]||(n[xc]=function(e){return n.handleEvent(e)}),n[xc])}function Zr(){Ml.call(this),this.i=new xw(this),this.P=this,this.I=null}function si(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Mi(e,n);else if(e instanceof Mi)e.target=e.target||n;else{var i=e;gC(e=new Mi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=op(u,r,!0,e)&&i}if(i=op(u=e.g=n,r,!0,e)&&i,i=op(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=op(u=e.g=t[s],r,!1,e)&&i}function op(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ba&&u.capture==t){var d=u.listener,p=u.ha||u.src;u.ea&&mC(n.i,u),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}ii(Zr,Ml),Zr.prototype[ip]=!0,Zr.prototype.removeEventListener=function(n,e,t,r){Fw(this,n,e,t,r)},Zr.prototype.M=function(){if(Zr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)sp(t[r]);delete n.g[e],n.h--}}this.I=null},Zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var $m=Gt.JSON.stringify;function $R(){var n=vC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Bw,GR=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zR,n=>n.reset());class zR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qR(n){Gt.setTimeout(()=>{throw n},0)}function yC(n,e){Bw||function KR(){var n=Gt.Promise.resolve(void 0);Bw=function(){n.then(Hw)}}(),Mc||(Bw(),Mc=!0),vC.add(n,e)}var Mc=!1,vC=new class WR{constructor(){this.h=this.g=null}add(e,t){const r=GR.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Hw(){for(var n;n=$R();){try{n.h.call(n.g)}catch(t){qR(t)}var e=GR;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Mc=!1}function As(n,e){Zr.call(this),this.h=n||1,this.g=e||Gt,this.j=xi(this.lb,this),this.l=Date.now()}function jw(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ap(n,e,t){if("function"==typeof n)t&&(n=xi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=xi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Gt.setTimeout(n,e||0)}function th(n){n.g=ap(()=>{n.g=null,n.i&&(n.i=!1,th(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ii(As,Zr),(It=As.prototype).ca=!1,It.R=null,It.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),si(this,"tick"),this.ca&&(jw(this),this.start()))}},It.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},It.M=function(){As.X.M.call(this),jw(this),delete this.g};class ZR extends Ml{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:th(this)}M(){super.M(),this.g&&(Gt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lp(n){Ml.call(this),this.h=n,this.g={}}ii(lp,Ml);var wC=[];function up(n,e,t,r){Array.isArray(t)||(t&&(wC[0]=t.toString()),t=wC);for(var i=0;i<t.length;i++){var s=kw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function cp(n){fC(n.g,function(e,t){this.g.hasOwnProperty(t)&&Vw(e)},n),n.g={}}function Wm(){this.g=!0}function Pc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function IC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return $m(t)}catch{return e}}(n,t)+(r?" "+r:"")})}lp.prototype.M=function(){lp.X.M.call(this),cp(this)},lp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wm.prototype.Aa=function(){this.g=!1},Wm.prototype.info=function(){};var Nc={},bC=null;function Ww(){return bC=bC||new Zr}function Gm(n){Mi.call(this,Nc.Pa,n)}function kc(n){const e=Ww();si(e,new Gm(e))}function Gw(n,e){Mi.call(this,Nc.STAT_EVENT,n),this.stat=e}function gi(n){const e=Ww();si(e,new Gw(e,n))}function zm(n,e){Mi.call(this,Nc.Qa,n),this.size=e}function dp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Gt.setTimeout(function(){n()},e)}Nc.Pa="serverreachability",ii(Gm,Mi),Nc.STAT_EVENT="statevent",ii(Gw,Mi),Nc.Qa="timingevent",ii(zm,Mi);var qm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},CC={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function zw(){}function Km(){}zw.prototype.h=null;var Qm,nh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Zm(){Mi.call(this,"d")}function Ym(){Mi.call(this,"c")}function Jm(){}function rh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new lp(this),this.O=QR,this.T=new As(n=Bm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Kw}function Kw(){this.i=null,this.g="",this.h=!1}ii(Zm,Mi),ii(Ym,Mi),ii(Jm,zw),Jm.prototype.g=function(){return new XMLHttpRequest},Jm.prototype.i=function(){return{}},Qm=new Jm;var QR=45e3,Xm={},hp={};function mi(n,e,t){n.K=1,n.v=mp(Oa(e)),n.s=t,n.P=!0,Oc(n,null)}function Oc(n,e){n.F=Date.now(),e_(n),n.A=Oa(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Qw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Kw,n.g=$C(n.l,t?e:null,!n.s),0<n.N&&(n.L=new ZR(xi(n.La,n,n.g),n.N)),up(n.S,n.g,"readystatechange",n.ib),e=n.H?Rw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),kc(),function YR(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var b=y[0];y=y[1];var T=b.split("_");u=2<=T.length&&"type"==T[1]?u+(b+"=")+y+"&":u+(b+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function DC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function TC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=pO(n,t),i==hp){4==e&&(n.o=4,gi(14),r=!1),Pc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Xm){n.o=4,gi(15),Pc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Pc(n.j,n.m,i,null),pp(n,i)}DC(n)&&i!=hp&&i!=Xm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,gi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),c_(e),e.K=!0,gi(11))):(Pc(n.j,n.m,t,"[Invalid Chunked Response]"),Lc(n),Pl(n))}function pO(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?hp:(t=Number(e.substring(t,r)),isNaN(t)?Xm:(r+=1)+t>e.length?hp:(e=e.substr(r,t),n.C=r+t,e))}function e_(n){n.V=Date.now()+n.O,Zw(n,n.O)}function Zw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=dp(xi(n.gb,n),e)}function fp(n){n.B&&(Gt.clearTimeout(n.B),n.B=null)}function Pl(n){0==n.l.G||n.I||ro(n.l,n)}function Lc(n){fp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,jw(n.T),cp(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function pp(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||eE(t.h,n)))if(!n.J&&eE(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;hE(t),u_(t)}cE(t),gi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=dp(xi(t.cb,t),6e3));if(1>=Xw(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ol(t,11)}else if((n.J||t.g==n)&&hE(t),!Qd(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const b=y[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const T=y[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.J=r=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var s=r.h;s.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(r_(s,s.h),s.h=null))}if(r.D){const ne=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.za=ne,yr(r.F,r.D,ne))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=Rs(r,r.H?r.ka:null,r.V),u.J){tE(r.h,u);var d=u,p=r.J;p&&d.setTimeout(p),d.B&&(fp(d),e_(d)),r.g=u}else ux(r);0<t.i.length&&uE(t)}else"stop"!=y[0]&&"close"!=y[0]||Ol(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Ol(t,7):ah(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}kc()}catch{}}function AC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function SC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(tp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function JR(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(tp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(It=rh.prototype).setTimeout=function(n){this.O=n},It.ib=function(n){n=n.target;const e=this.L;e&&3==kl(n)?e.l():this.La(n)},It.La=function(n){try{if(n==this.g)e:{const b=kl(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||Bm||this.g&&(this.h.h||this.g.fa()||aE(this.g)))){this.I||4!=b||7==e||kc(),fp(this);var t=this.g.aa();this.Y=t;t:if(DC(this)){var r=aE(this.g);n="";var i=r.length,s=4==kl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Lc(this),Pl(this);var u="";break t}this.h.i=new Gt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function EC(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qd(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,gi(12),Lc(this),Pl(this);break e}Pc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pp(this,t)}this.P?(TC(this,b,u),Bm&&this.i&&3==b&&(up(this.S,this.T,"tick",this.hb),this.T.start())):(Pc(this.j,this.m,u,null),pp(this,u)),4==b&&Lc(this),this.i&&!this.I&&(4==b?ro(this.l,this):(this.i=!1,e_(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,gi(12)):(this.o=0,gi(13)),Lc(this),Pl(this)}}}catch{}},It.hb=function(){if(this.g){var n=kl(this.g),e=this.g.fa();this.C<e.length&&(fp(this),TC(this,n,e),this.i&&4!=n&&e_(this))}},It.cancel=function(){this.I=!0,Lc(this)},It.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function $w(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(kc(),gi(17)),Lc(this),this.o=2,Pl(this)):Zw(this,this.V-n)};var RC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Nl){this.h=void 0!==e?e:n.h,gp(this,n.j),this.s=n.s,this.g=n.g,Fc(this,n.m),this.l=n.l,e=n.i;var t=new n_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t_(this,t),this.o=n.o}else n&&(t=String(n).match(RC))?(this.h=!!e,gp(this,t[1]||"",!0),this.s=_p(t[2]||""),this.g=_p(t[3]||"",!0),Fc(this,t[4]),this.l=_p(t[5]||"",!0),t_(this,t[6]||"",!0),this.o=_p(t[7]||"")):(this.h=!!e,this.i=new n_(null,this.h))}function Oa(n){return new Nl(n)}function gp(n,e,t){n.j=t?_p(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function t_(n,e,t){e instanceof n_?(n.i=e,function tx(n,e){e&&!n.j&&(Su(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(PC(this,r),Qw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ih(e,gO)),n.i=new n_(e,n.h))}function yr(n,e,t){n.i.set(e,t)}function mp(n){return yr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _p(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ih(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Nl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ih(e,xC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ih(e,xC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ih(t,"/"==t.charAt(0)?Yw:MC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ih(t,ex)),n.join("")};var xC=/[#\/\?@]/g,MC=/[#\?:]/g,Yw=/[#\?]/g,gO=/[#\?@]/g,ex=/#/g;function n_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Su(n){n.g||(n.g=new Map,n.h=0,n.i&&function XR(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function PC(n,e){Su(n),e=Vc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function NC(n,e){return Su(n),e=Vc(n,e),n.g.has(e)}function Qw(n,e,t){PC(n,e),0<t.length&&(n.i=null,n.g.set(Vc(n,e),Fm(t)),n.h+=t.length)}function Vc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Jw(n){this.l=n||nx,n=Gt.PerformanceNavigationTiming?0<(n=Gt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Gt.g&&Gt.g.Ga&&Gt.g.Ga()&&Gt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(It=n_.prototype).add=function(n,e){Su(this),this.i=null,n=Vc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},It.forEach=function(n,e){Su(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},It.oa=function(){Su(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},It.W=function(n){Su(this);let e=[];if("string"==typeof n)NC(this,n)&&(e=e.concat(this.g.get(Vc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},It.set=function(n,e){return Su(this),this.i=null,NC(this,n=Vc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},It.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},It.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var nx=10;function OC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Xw(n){return n.h?1:n.g?n.g.size:0}function eE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function r_(n,e){n.g?n.g.add(e):n.h=e}function tE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function nE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Fm(n.i)}function i_(){}function rx(){this.g=new i_}function ix(n,e,t){const r=t||"";try{AC(n,function(i,s){let u=i;np(i)&&(u=$m(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function s_(n){this.l=n.ac||null,this.j=n.jb||!1}function rE(n,e){Zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=LC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Jw.prototype.cancel=function(){if(this.i=nE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},i_.prototype.stringify=function(n){return Gt.JSON.stringify(n,void 0)},i_.prototype.parse=function(n){return Gt.JSON.parse(n,void 0)},ii(s_,zw),s_.prototype.g=function(){return new rE(this.l,this.j)},s_.prototype.i=function(n){return function(){return n}}({}),ii(rE,Zr);var LC=0;function sx(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function o_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,a_(n)}function a_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(It=rE.prototype).open=function(n,e){if(this.readyState!=LC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,a_(this)},It.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Gt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},It.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,o_(this)),this.readyState=LC},It.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,a_(this)),this.g&&(this.readyState=3,a_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Gt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sx(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},It.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?o_(this):a_(this),3==this.readyState&&sx(this)}},It.Va=function(n){this.g&&(this.response=this.responseText=n,o_(this))},It.Ua=function(n){this.g&&(this.response=n,o_(this))},It.ga=function(){this.g&&o_(this)},It.setRequestHeader=function(n,e){this.v.append(n,e)},It.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},It.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(rE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _O=Gt.JSON.parse;function Nr(n){Zr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vp,this.K=this.L=!1}ii(Nr,Zr);var vp="",yO=/^https?$/i,FC=["POST","PUT"];function iE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,sE(n),oh(n)}function sE(n){n.D||(n.D=!0,si(n,"complete"),si(n,"error"))}function ox(n){if(n.h&&typeof ww<"u"&&(!n.C[1]||4!=kl(n)||2!=n.aa()))if(n.v&&4==kl(n))ap(n.Ha,0,n);else if(si(n,"readystatechange"),4==kl(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(RC)[1]||null;if(!i&&Gt.self&&Gt.self.location){var s=Gt.self.location.protocol;i=s.substr(0,s.length-1)}r=!yO.test(i?i.toLowerCase():"")}t=r}if(t)si(n,"complete"),si(n,"success");else{n.m=6;try{var u=2<kl(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",sE(n)}}finally{oh(n)}}}function oh(n,e){if(n.g){oE(n);const t=n.g,r=n.C[0]?Om:null;n.g=null,n.C=null,e||si(n,"ready");try{t.onreadystatechange=r}catch{}}}function oE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Gt.clearTimeout(n.A),n.A=null)}function kl(n){return n.g?n.g.readyState:0}function aE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case vp:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ax(n){let e="";return fC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function lE(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=ax(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yr(n,e,t))}function wp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function VC(n){this.Ca=0,this.i=[],this.j=new Wm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=wp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=wp("baseRetryDelayMs",5e3,n),this.bb=wp("retryDelaySeedMs",1e4,n),this.$a=wp("forwardChannelMaxRetries",2,n),this.ta=wp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Jw(n&&n.concurrentRequestLimit),this.Fa=new rx,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ah(n){if(lx(n),3==n.G){var e=n.U++,t=Oa(n.F);yr(t,"SID",n.I),yr(t,"RID",e),yr(t,"TYPE","terminate"),Ep(n,t),(e=new rh(n,n.j,e,void 0)).K=2,e.v=mp(Oa(t)),t=!1,Gt.navigator&&Gt.navigator.sendBeacon&&(t=Gt.navigator.sendBeacon(e.v.toString(),"")),!t&&Gt.Image&&((new Image).src=e.v,t=!0),t||(e.g=$C(e.l,null),e.g.da(e.v)),e.F=Date.now(),e_(e)}jC(n)}function u_(n){n.g&&(c_(n),n.g.cancel(),n.g=null)}function lx(n){u_(n),n.u&&(Gt.clearTimeout(n.u),n.u=null),hE(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Gt.clearTimeout(n.m),n.m=null)}function uE(n){OC(n.h)||n.m||(n.m=!0,yC(n.Ja,n),n.C=0)}function UC(n,e){var t;t=e?e.m:n.U++;const r=Oa(n.F);yr(r,"SID",n.I),yr(r,"RID",t),yr(r,"AID",n.T),Ep(n,r),n.o&&n.s&&lE(r,n.o,n.s),t=new rh(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=BC(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),r_(n.h,t),mi(t,r,e)}function Ep(n,e){n.ia&&fC(n.ia,function(t,r){yr(e,r,t)}),n.l&&AC({},function(t,r){yr(e,r,t)})}function BC(n,e,t){t=Math.min(n.i.length,t);var r=n.l?xi(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=i[p].h;const b=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),d=!1;else try{ix(b,u,"req"+y+"_")}catch{r&&r(b)}}if(d){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function ux(n){n.g||n.u||(n.Z=1,yC(n.Ia,n),n.A=0)}function cE(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=dp(xi(n.Ia,n),HC(n,n.A)),n.A++,0))}function c_(n){null!=n.B&&(Gt.clearTimeout(n.B),n.B=null)}function dE(n){n.g=new rh(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Oa(n.sa);yr(e,"RID","rpc"),yr(e,"SID",n.I),yr(e,"CI",n.L?"0":"1"),yr(e,"AID",n.T),yr(e,"TYPE","xmlhttp"),Ep(n,e),n.o&&n.s&&lE(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=mp(Oa(e)),t.s=null,t.P=!0,Oc(t,n)}function hE(n){null!=n.v&&(Gt.clearTimeout(n.v),n.v=null)}function ro(n,e){var t=null;if(n.g==e){hE(n),c_(n),n.g=null;var r=2}else{if(!eE(n.h,e))return;t=e.D,tE(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;si(r=Ww(),new zm(r,t)),uE(n)}else ux(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function vO(n,e){return!(Xw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=dp(xi(n.Ja,n,e),HC(n,n.C)),n.C++,0)))}(n,e)||2==r&&cE(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Ol(n,5);break;case 4:Ol(n,10);break;case 3:Ol(n,6);break;default:Ol(n,2)}}function HC(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ol(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=xi(n.kb,n);t||(t=new Nl("//www.google.com/images/cleardot.gif"),Gt.location&&"http"==Gt.location.protocol||gp(t,"https"),mp(t)),function mO(n,e){const t=new Wm;if(Gt.Image){const r=new Image;r.onload=Lm(yp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lm(yp,t,r,"TestLoadImage: error",!1,e),r.onabort=Lm(yp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lm(yp,t,r,"TestLoadImage: timeout",!1,e),Gt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else gi(2);n.G=0,n.l&&n.l.va(e),jC(n),lx(n)}function jC(n){if(n.G=0,n.la=[],n.l){const e=nE(n.h);(0!=e.length||0!=n.i.length)&&(uC(n.la,e),uC(n.la,n.i),n.h.i.length=0,Fm(n.i),n.i.length=0),n.l.ua()}}function Rs(n,e,t){var r=t instanceof Nl?Oa(t):new Nl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Fc(r,r.m);else{var i=Gt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Nl(null,void 0);r&&gp(s,r),e&&(s.g=e),i&&Fc(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&yr(r,t,e),yr(r,"VER",n.ma),Ep(n,r),r}function $C(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nr(t&&n.Da&&!n.ra?new s_({jb:!0}):n.ra)).Ka(n.H),e}function d_(){}function h_(){if(Ac&&!(10<=Number(hC)))throw Error("Environmental error: no available transport.")}function xs(n,e){Zr.call(this),this.g=new VC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Qd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Uc(this)}function f_(n){Zm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fE(){Ym.call(this),this.status=1}function Uc(n){this.g=n}(It=Nr.prototype).Ka=function(n){this.L=n},It.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qm.g(),this.C=function qw(n){return n.h||(n.h=n.i())}(this.u?this.u:Qm),this.g.onreadystatechange=xi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void iE(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Gt.FormData&&n instanceof Gt.FormData,!(0<=lC(FC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oE(this),0<this.B&&((this.K=function l_(n){return Ac&&function Sw(){return function bw(n){var e=dC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Vm(String(Xd)).split("."),t=Vm("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=Um(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Um(0==i[2].length,0==s[2].length)||Um(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xi(this.qa,this)):this.A=ap(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){iE(this,s)}},It.qa=function(){typeof ww<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},It.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,si(this,"complete"),si(this,"abort"),oh(this))},It.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oh(this,!0)),Nr.X.M.call(this)},It.Ha=function(){this.s||(this.F||this.v||this.l?ox(this):this.fb())},It.fb=function(){ox(this)},It.aa=function(){try{return 2<kl(this)?this.g.status:-1}catch{return-1}},It.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},It.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_O(e)}},It.Ea=function(){return this.m},It.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(It=VC.prototype).ma=8,It.G=1,It.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new rh(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=Rw(s),gC(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=BC(this,i,e),yr(t=Oa(this.F),"RID",n),yr(t,"CVER",22),this.D&&yr(t,"X-HTTP-Session-Id",this.D),Ep(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(ax(s)))+"&"+e:this.o&&lE(t,this.o,s)),r_(this.h,i),this.Ya&&yr(t,"TYPE","init"),this.O?(yr(t,"$req",e),yr(t,"SID","null"),i.Z=!0,mi(i,t,null)):mi(i,t,e),this.G=2}}else 3==this.G&&(n?UC(this,n):0==this.i.length||OC(this.h)||UC(this))},It.Ia=function(){if(this.u=null,dE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=dp(xi(this.eb,this),n)}},It.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,gi(10),u_(this),dE(this))},It.cb=function(){null!=this.v&&(this.v=null,u_(this),cE(this),gi(19))},It.kb=function(n){n?(this.j.info("Successfully pinged google.com"),gi(2)):(this.j.info("Failed to ping google.com"),gi(1))},(It=d_.prototype).xa=function(){},It.wa=function(){},It.va=function(){},It.ua=function(){},It.Ra=function(){},h_.prototype.g=function(n,e){return new xs(n,e)},ii(xs,Zr),xs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;gi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Rs(n,null,n.V),uE(n)},xs.prototype.close=function(){ah(this.g)},xs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=$m(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&uE(e)},xs.prototype.M=function(){this.g.l=null,delete this.j,ah(this.g),delete this.g,xs.X.M.call(this)},ii(f_,Zm),ii(fE,Ym),ii(Uc,d_),Uc.prototype.xa=function(){si(this.g,"a")},Uc.prototype.wa=function(n){si(this.g,new f_(n))},Uc.prototype.va=function(n){si(this.g,new fE)},Uc.prototype.ua=function(){si(this.g,"b")},h_.prototype.createWebChannel=h_.prototype.g,xs.prototype.send=xs.prototype.u,xs.prototype.open=xs.prototype.m,xs.prototype.close=xs.prototype.close,qm.NO_ERROR=0,qm.TIMEOUT=8,qm.HTTP_ERROR=6,CC.COMPLETE="complete",Km.EventType=nh,nh.OPEN="a",nh.CLOSE="b",nh.ERROR="c",nh.MESSAGE="d",Zr.prototype.listen=Zr.prototype.N,Nr.prototype.listenOnce=Nr.prototype.O,Nr.prototype.getLastError=Nr.prototype.Oa,Nr.prototype.getLastErrorCode=Nr.prototype.Ea,Nr.prototype.getStatus=Nr.prototype.aa,Nr.prototype.getResponseJson=Nr.prototype.Sa,Nr.prototype.getResponseText=Nr.prototype.fa,Nr.prototype.send=Nr.prototype.da,Nr.prototype.setWithCredentials=Nr.prototype.Ka;var cx=xl.createWebChannelTransport=function(){return new h_},WC=xl.getStatEventTarget=function(){return Ww()},p_=xl.ErrorCode=qm,dx=xl.EventType=CC,GC=xl.Event=Nc,zC=xl.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},pE=xl.FetchXmlHttpFactory=s_,Bo=xl.WebChannel=Km,qC=xl.XhrIo=Nr;const g_="@firebase/firestore";class Kn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kn.UNAUTHENTICATED=new Kn(null),Kn.GOOGLE_CREDENTIALS=new Kn("google-credentials-uid"),Kn.FIRST_PARTY=new Kn("first-party-uid"),Kn.MOCK_USER=new Kn("mock-user");let lh="9.14.0";const Bc=new Fo.Yd("@firebase/firestore");function gE(){return Bc.logLevel}function $e(n,...e){if(Bc.logLevel<=Fo.in.DEBUG){const t=e.map(KC);Bc.debug(`Firestore (${lh}): ${n}`,...t)}}function kr(n,...e){if(Bc.logLevel<=Fo.in.ERROR){const t=e.map(KC);Bc.error(`Firestore (${lh}): ${n}`,...t)}}function Au(n,...e){if(Bc.logLevel<=Fo.in.WARN){const t=e.map(KC);Bc.warn(`Firestore (${lh}): ${n}`,...t)}}function KC(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${lh}) INTERNAL ASSERTION FAILED: `+n;throw kr(e),new Error(e)}function Lt(n,e){n||dt()}function et(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends U.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kn.UNAUTHENTICATED))}shutdown(){}}class QC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class m_{constructor(e){this.t=e,this.currentUser=Kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new $r,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,De.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new $r)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new mE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new Kn(e)}}class __{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Kn.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Lt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class JC{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new __(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eD{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.A;return this.A=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.A=t.token,new XC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function px(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class tD{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=px(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function Ip(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function _E(n){return n+"\0"}class tr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tr.fromMillis(Date.now())}static fromDate(e){return tr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new tr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new tr(0,0))}static max(){return new Ft(new tr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class bp{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===bp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vn extends bp{construct(e,t,r){return new vn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new vn(t)}static emptyPath(){return new vn([])}}const wO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends bp{construct(e,t,r){return new Or(e,t,r)}static isValidIdentifier(e){return wO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ue(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ue(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(s(),i++)}if(s(),u)throw new Ue(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(vn.fromString(e))}static fromName(e){return new Qe(vn.fromString(e).popFirst(5))}static empty(){return new Qe(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new vn(e.slice()))}}class yE{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function vE(n){return n.fields.find(e=>2===e.kind)}function La(n){return n.fields.filter(e=>2!==e.kind)}yE.UNKNOWN_ID=-1;class y_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ho{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ho(0,Wi.min())}}function wE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ft.fromTimestamp(1e9===r?new tr(t+1,0):new tr(t,r));return new Wi(i,Qe.empty(),e)}function v_(n){return new Wi(n.readTime,n.key,-1)}class Wi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wi(Ft.min(),Qe.empty(),-1)}static max(){return new Wi(Ft.max(),Qe.empty(),-1)}}function EE(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Qe.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}const w_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function jo(n){return rD.apply(this,arguments)}function rD(){return rD=(0,De.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==w_)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),rD.apply(this,arguments)}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,r)=>{t(e)})}static reject(e){return new pe((t,r)=>{r(e)})}static waitFor(e){return new pe((t,r)=>{let i=0,s=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=pe.resolve(!1);for(const r of e)t=t.next(i=>i?pe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new pe((r,i)=>{const s=e.length,u=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(b=>{u[y]=b,++d,d===s&&r(u)},b=>i(b))}})}static doWhile(e,t){return new pe((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class IE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new $r,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Cp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=I_(r.target.error);this.P.reject(new Cp(e,i))}}static open(e,t,r,i){try{return new IE(t,e.transaction(i,r))}catch(s){throw new Cp(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mx(t)}}class Fa{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Fa.D((0,U.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Hc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,U.hl)())return!1;if(Fa.N())return!0;const e=(0,U.z$)(),t=Fa.D(e),r=0<t&&t<10,i=Fa.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,De.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new Cp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Ue(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ue(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Cp(e,d))},s.onupgradeneeded=u=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,De.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.F(e);const p=IE.open(s.db,e,u?"readonly":"readwrite",r),y=i(p).next(b=>(p.V(),b)).catch(b=>(p.abort(b),pe.reject(b))).toPromise();return y.catch(()=>{}),yield p.v,y}catch(p){const y=p,b="FirebaseError"!==y.name&&d<3;if($e("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),s.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iD{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Hc(this.U.delete())}}class Cp extends Ue{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ru(n){return"IndexedDbTransactionError"===n.name}class mx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hc(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Hc(this.store.add(e))}get(e){return Hc(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Hc(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Hc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(u,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new pe((s,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new pe((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,u,d)=>d.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new pe((r,i)=>{t.onerror=s=>{const u=I_(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}H(e,t){const r=[];return new pe((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const p=new iD(d),y=t(d.primaryKey,d.value,p);if(y instanceof pe){const b=y.catch(T=>(p.done(),pe.reject(T)));r.push(b)}p.isDone?i():null===p.G?d.continue():d.continue(p.G)}}).next(()=>pe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hc(n){return new pe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=I_(r.target.error);t(i)}})}let bE=!1;function I_(n){const e=Fa.D((0,U.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bE||(bE=!0,setTimeout(()=>{throw r},0)),r}}return n}class sD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;$e("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,De.Z)(function*(){t.task=null;try{$e("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ru(r)?$e("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield jo(r)}yield t.nt(6e4)}))}}class _x{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,De.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return pe.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return $e("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(d=>{i-=d,r.add(u)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,s)).next(d=>($e("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=v_(s);EE(u,r)>0&&(r=u)}),new Wi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class as{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function CE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ll(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}as.at=-1;class vr{constructor(e,t){this.comparator=e,this.root=t||_i.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _i{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??_i.RED,this.left=i??_i.EMPTY,this.right=s??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new _i(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return _i.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1,_i.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new _i(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vx(this.data.getIterator())}getIteratorFrom(e){return new vx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class vx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dp(n){return n.hasNext()?n.getNext():void 0}class Ms{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new Ms([])}unionWith(e){let t=new jn(Or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ip(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Yr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const EO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jc(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=EO.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lr(n.seconds),nanos:Lr(n.nanos)}}function Lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ch(n){return"string"==typeof n?Yr.fromBase64String(n):Yr.fromUint8Array(n)}function oD(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function aD(n){const e=n.mapValue.fields.__previous_value__;return oD(e)?aD(e):e}function b_(n){const e=jc(n.mapValue.fields.__local_write_time__.timestampValue);return new tr(e.seconds,e.nanos)}class IO{constructor(e,t,r,i,s,u,d,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class $c{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $c("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $c&&e.projectId===this.projectId&&e.database===this.database}}function C_(n){return null==n}function D_(n){return 0===n&&1/n==-1/0}function Ex(n){return"number"==typeof n&&Number.isInteger(n)&&!D_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},a={nullValue:"NULL_VALUE"};function l(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oD(n)?4:Ye(n)?9007199254740991:10:dt()}function c(n,e){if(n===e)return!0;const t=l(n);if(t!==l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return b_(n).isEqual(b_(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=jc(r.timestampValue),u=jc(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ch(n.bytesValue).isEqual(ch(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Lr(r.geoPointValue.latitude)===Lr(i.geoPointValue.latitude)&&Lr(r.geoPointValue.longitude)===Lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Lr(r.integerValue)===Lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Lr(r.doubleValue),u=Lr(i.doubleValue);return s===u?D_(s)===D_(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return Ip(n.arrayValue.values||[],e.arrayValue.values||[],c);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(CE(s)!==CE(u))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===u[d]||!c(s[d],u[d])))return!1;return!0}(n,e);default:return dt()}var i}function f(n,e){return void 0!==(n.values||[]).find(t=>c(t,e))}function g(n,e){if(n===e)return 0;const t=l(n),r=l(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=Lr(i.integerValue||i.doubleValue),d=Lr(s.integerValue||s.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return v(n.timestampValue,e.timestampValue);case 4:return v(b_(n),b_(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=ch(i),d=ch(s);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),d=s.split("/");for(let p=0;p<u.length&&p<d.length;p++){const y=Yt(u[p],d[p]);if(0!==y)return y}return Yt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=Yt(Lr(i.latitude),Lr(s.latitude));return 0!==u?u:Yt(Lr(i.longitude),Lr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],d=s.values||[];for(let p=0;p<u.length&&p<d.length;++p){const y=g(u[p],d[p]);if(y)return y}return Yt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===o.mapValue&&s===o.mapValue)return 0;if(i===o.mapValue)return 1;if(s===o.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let b=0;b<d.length&&b<y.length;++b){const T=Yt(d[b],y[b]);if(0!==T)return T;const x=g(u[d[b]],p[y[b]]);if(0!==x)return x}return Yt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw dt()}}function v(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=jc(n),r=jc(e),i=Yt(t.seconds,r.seconds);return 0!==i?i:Yt(t.nanos,r.nanos)}function E(n){return C(n)}function C(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=jc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ch(n.bytesValue).toBase64():"referenceValue"in n?Qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=C(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const d of i)u?u=!1:s+=",",s+=`${d}:${C(r.fields[d])}`;return s+"}"}(n.mapValue):dt();var e}function R(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function k(n){return!!n&&"integerValue"in n}function B(n){return!!n&&"arrayValue"in n}function Q(n){return!!n&&"nullValue"in n}function oe(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Te(n){return!!n&&"mapValue"in n}function We(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ll(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=We(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=We(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ye(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pt(n){return"nullValue"in n?a:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?R($c.empty(),Qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function Rt(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?R($c.empty(),Qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?o:dt()}function Oe(n,e){const t=g(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Mt(n,e){const t=g(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Te(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=We(t)}setAll(e){let t=Or.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=We(u):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Te(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return c(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Te(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ll(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new zt(We(this.value))}}function nr(n){const e=[];return Ll(n.fields,(t,r)=>{const i=new Or([t]);if(Te(r)){const s=nr(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new Ms(e)}class Cn{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new Cn(e,0,Ft.min(),Ft.min(),zt.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,Ft.min(),r,0)}static newNoDocument(e,t){return new Cn(e,2,t,Ft.min(),zt.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Ft.min(),zt.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class DE{constructor(e,t=null,r=[],i=[],s=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=d,this.ht=null}}function T_(n,e=null,t=[],r=[],i=null,s=null,u=null){return new DE(n,e,t,r,i,s,u)}function Fl(n){const e=et(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+E(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),C_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>E(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>E(r)).join(",")),e.ht=t}return e.ht}function Wc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!A2(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!c(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!DO(n.startAt,e.startAt)&&DO(n.endAt,e.endAt)}function dh(n){return Qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function hh(n,e){return n.filters.filter(t=>t instanceof Gi&&t.field.isEqual(e))}function S_(n,e,t){let r=a,i=!0;for(const s of hh(n,e)){let u=a,d=!0;switch(s.op){case"<":case"<=":u=pt(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,d=!1;break;case"!=":case"not-in":u=a}Oe({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];Oe({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function A_(n,e,t){let r=o,i=!0;for(const s of hh(n,e)){let u=o,d=!0;switch(s.op){case">=":case">":u=Rt(s.value),d=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,d=!1;break;case"!=":case"not-in":u=o}Mt({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];Mt({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Gi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new E2(e,t,r):"array-contains"===t?new C2(e,r):"in"===t?new D2(e,r):"not-in"===t?new T2(e,r):"array-contains-any"===t?new S2(e,r):new Gi(e,t,r)}static lt(e,t,r){return"in"===t?new I2(e,r):new b2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(g(t,this.value)):null!==t&&l(this.value)===l(t)&&this.ft(g(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class E2 extends Gi{constructor(e,t,r){super(e,t,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const t=Qe.comparator(e.key,this.key);return this.ft(t)}}class I2 extends Gi{constructor(e,t){super(e,"in",t),this.keys=bO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class b2 extends Gi{constructor(e,t){super(e,"not-in",t),this.keys=bO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Qe.fromName(r.referenceValue))}class C2 extends Gi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return B(t)&&f(t.arrayValue,this.value)}}class D2 extends Gi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&f(this.value.arrayValue,t)}}class T2 extends Gi{constructor(e,t){super(e,"not-in",t)}matches(e){if(f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!f(this.value.arrayValue,t)}}class S2 extends Gi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!B(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>f(this.value.arrayValue,r))}}class fh{constructor(e,t){this.position=e,this.inclusive=t}}class R_{constructor(e,t="asc"){this.field=e,this.dir=t}}function A2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function CO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?Qe.comparator(Qe.fromName(u.referenceValue),t.key):g(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function DO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!c(n.position[t],e.position[t]))return!1;return!0}class Gc{constructor(e,t=null,r=[],i=[],s=null,u="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=d,this.endAt=p,this._t=null,this.wt=null}}function TO(n,e,t,r,i,s,u,d){return new Gc(n,e,t,r,i,s,u,d)}function x_(n){return new Gc(n)}function SO(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ix(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bx(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Cx(n){return null!==n.collectionGroup}function M_(n){const e=et(n);if(null===e._t){e._t=[];const t=bx(e),r=Ix(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new R_(t)),e._t.push(new R_(Or.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new R_(Or.keyField(),s))}}}return e._t}function Ps(n){const e=et(n);if(!e.wt)if("F"===e.limitType)e.wt=T_(e.path,e.collectionGroup,M_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of M_(e))t.push(new R_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new fh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new fh(e.startAt.position,e.startAt.inclusive):null;e.wt=T_(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function lD(n,e,t){return new Gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function SE(n,e){return Wc(Ps(n),Ps(e))&&n.limitType===e.limitType}function AO(n){return`${Fl(Ps(n))}|lt:${n.limitType}`}function Dx(n){return`Query(target=${function TE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${E(r.value)}`;var r}).join(", ")}]`),C_(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>E(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>E(t)).join(",")),`Target(${e})`}(Ps(n))}; limitType=${n.limitType})`}function Tx(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const d=CO(i,s,u);return i.inclusive?d<=0:d<0}(t.startAt,M_(t),r)||t.endAt&&!function(i,s,u){const d=CO(i,s,u);return i.inclusive?d>=0:d>0}(t.endAt,M_(t),r)));var t,r}function RO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xO(n){return(e,t)=>{let r=!1;for(const i of M_(n)){const s=R2(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function R2(n,e,t){const r=n.field.isKeyField()?Qe.comparator(e.key,t.key):function(i,s,u){const d=s.data.field(i),p=u.data.field(i);return null!==d&&null!==p?g(d,p):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function MO(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D_(e)?"-0":e}}function PO(n){return{integerValue:""+n}}function NO(n,e){return Ex(e)?PO(e):MO(n,e)}class uD{constructor(){this._=void 0}}function x2(n,e,t){return n instanceof P_?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Tp?OO(n,e):n instanceof Sp?LO(n,e):function(r,i){const s=kO(r,i),u=FO(s)+FO(r.yt);return k(s)&&k(r.yt)?PO(u):MO(r.It,u)}(n,e)}function M2(n,e,t){return n instanceof Tp?OO(n,e):n instanceof Sp?LO(n,e):t}function kO(n,e){return n instanceof N_?k(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class P_ extends uD{}class Tp extends uD{constructor(e){super(),this.elements=e}}function OO(n,e){const t=VO(e);for(const r of n.elements)t.some(i=>c(i,r))||t.push(r);return{arrayValue:{values:t}}}class Sp extends uD{constructor(e){super(),this.elements=e}}function LO(n,e){let t=VO(e);for(const r of n.elements)t=t.filter(i=>!c(i,r));return{arrayValue:{values:t}}}class N_ extends uD{constructor(e,t){super(),this.It=e,this.yt=t}}function FO(n){return Lr(n.integerValue||n.doubleValue)}function VO(n){return B(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class AE{constructor(e,t){this.field=e,this.transform=t}}class N2{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class dD{}function UO(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new O_(n.key,Cr.none()):new k_(n.key,n.data,Cr.none());{const t=n.data,r=zt.empty();let i=new jn(Or.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new zc(n.key,r,new Ms(i.toArray()),Cr.none())}}function k2(n,e,t){n instanceof k_?function(r,i,s){const u=r.value.clone(),d=jO(r.fieldTransforms,i,s.transformResults);u.setAll(d),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof zc?function(r,i,s){if(!cD(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=jO(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(HO(r)),d.setAll(u),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function RE(n,e,t,r){return n instanceof k_?function(i,s,u,d){if(!cD(i.precondition,s))return u;const p=i.value.clone(),y=$O(i.fieldTransforms,d,s);return p.setAll(y),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof zc?function(i,s,u,d){if(!cD(i.precondition,s))return u;const p=$O(i.fieldTransforms,d,s),y=s.data;return y.setAll(HO(i)),y.setAll(p),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,cD(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function O2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=kO(r.transform,i||null);null!=s&&(null===t&&(t=zt.empty()),t.set(r.field,s))}return t||null}function BO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ip(t,r,(i,s)=>function P2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Tp&&r instanceof Tp||t instanceof Sp&&r instanceof Sp?Ip(t.elements,r.elements,c):t instanceof N_&&r instanceof N_?c(t.yt,r.yt):t instanceof P_&&r instanceof P_);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class k_ extends dD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zc extends dD{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HO(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jO(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,d=e.data.field(s.field);r.set(s.field,M2(u,d,t[i]))}return r}function $O(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,x2(s,u,e))}return r}class O_ extends dD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sx extends dD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L2{constructor(e){this.count=e}}var oi,Dn;function WO(n){switch(n){default:return dt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function GO(n){if(void 0===n)return kr("GRPC error has no .code"),ye.UNKNOWN;switch(n){case oi.OK:return ye.OK;case oi.CANCELLED:return ye.CANCELLED;case oi.UNKNOWN:return ye.UNKNOWN;case oi.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case oi.INTERNAL:return ye.INTERNAL;case oi.UNAVAILABLE:return ye.UNAVAILABLE;case oi.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case oi.NOT_FOUND:return ye.NOT_FOUND;case oi.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case oi.ABORTED:return ye.ABORTED;case oi.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case oi.DATA_LOSS:return ye.DATA_LOSS;default:return dt()}}(Dn=oi||(oi={}))[Dn.OK=0]="OK",Dn[Dn.CANCELLED=1]="CANCELLED",Dn[Dn.UNKNOWN=2]="UNKNOWN",Dn[Dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dn[Dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dn[Dn.NOT_FOUND=5]="NOT_FOUND",Dn[Dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dn[Dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dn[Dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dn[Dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dn[Dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dn[Dn.ABORTED=10]="ABORTED",Dn[Dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dn[Dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dn[Dn.INTERNAL=13]="INTERNAL",Dn[Dn.UNAVAILABLE=14]="UNAVAILABLE",Dn[Dn.DATA_LOSS=15]="DATA_LOSS";class ph{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ll(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return yx(this.inner)}size(){return this.innerSize}}const F2=new vr(Qe.comparator);function io(){return F2}const zO=new vr(Qe.comparator);function xE(...n){let e=zO;for(const t of n)e=e.insert(t.key,t);return e}function qO(n){let e=zO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xu(){return ME()}function KO(){return ME()}function ME(){return new ph(n=>n.toString(),(n,e)=>n.isEqual(e))}const V2=new vr(Qe.comparator),U2=new jn(Qe.comparator);function rn(...n){let e=U2;for(const t of n)e=e.add(t);return e}const B2=new jn(Yt);function hD(){return B2}class PE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,NE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new PE(Ft.min(),i,hD(),io(),rn())}}class NE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new NE(r,t,rn(),rn(),rn())}}class fD{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class ZO{constructor(e,t){this.targetId=e,this.At=t}}class YO{constructor(e,t,r=Yr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class QO{constructor(){this.Rt=0,this.bt=XO(),this.Pt=Yr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=rn(),t=rn(),r=rn();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new NE(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=XO()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class H2{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=io(),this.qt=JO(),this.Kt=new jn(Yt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(dh(s))if(0===r){const u=new Qe(s.path);this.jt(t,u,Cn.newNoDocument(u,Ft.min()))}else Lt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,u)=>{const d=this.Xt(u);if(d){if(s.current&&dh(d.target)){const p=new Qe(d.target.path);null!==this.Ut.get(p)||this.ee(u,p)||this.jt(u,p,Cn.newNoDocument(p,e))}s.Dt&&(t.set(u,s.xt()),s.Nt())}});let r=rn();this.qt.forEach((s,u)=>{let d=!0;u.forEachWhile(p=>{const y=this.Xt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.Ut.forEach((s,u)=>u.setReadTime(e));const i=new PE(e,t,this.Kt,this.Ut,r);return this.Ut=io(),this.qt=JO(),this.Kt=new jn(Yt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new QO,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new jn(Yt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new QO),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function JO(){return new vr(Qe.comparator)}function XO(){return new vr(Qe.comparator)}const j2={asc:"ASCENDING",desc:"DESCENDING"},$2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class W2{constructor(e,t){this.databaseId=e,this.gt=t}}function kE(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e1(n,e){return n.gt?e.toBase64():e.toUint8Array()}function G2(n,e){return kE(n,e.toTimestamp())}function Pi(n){return Lt(!!n),Ft.fromTimestamp(function(e){const t=jc(e);return new tr(t.seconds,t.nanos)}(n))}function Ax(n,e){return(t=n,new vn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function t1(n){const e=vn.fromString(n);return Lt(c1(e)),e}function OE(n,e){return Ax(n.databaseId,e.path)}function Mu(n,e){const t=t1(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Qe(r1(t))}function Rx(n,e){return Ax(n.databaseId,e)}function n1(n){const e=t1(n);return 4===e.length?vn.emptyPath():r1(e)}function LE(n){return new vn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function r1(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function s1(n,e,t){return{name:OE(n,e),fields:t.value.mapValue.fields}}function o1(n,e,t){const r=Mu(n,e.name),i=Pi(e.updateTime),s=new zt({mapValue:{fields:e.fields}}),u=Cn.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function FE(n,e){let t;if(e instanceof k_)t={update:s1(n,e.key,e.value)};else if(e instanceof O_)t={delete:OE(n,e.key)};else if(e instanceof zc)t={update:s1(n,e.key,e.data),updateMask:eH(e.fieldMask)};else{if(!(e instanceof Sx))return dt();t={verify:OE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof P_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Tp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Sp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof N_)return{fieldPath:s.field.canonicalString(),increment:u.yt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:G2(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function xx(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Cr.updateTime(Pi(i.updateTime)):void 0!==i.exists?Cr.exists(i.exists):Cr.none():Cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let d=null;"setToServerValue"in u?(Lt("REQUEST_TIME"===u.setToServerValue),d=new P_):"appendMissingElements"in u?d=new Tp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new Sp(u.removeAllFromArray.values||[]):"increment"in u?d=new N_(s,u.increment):dt();const p=Or.fromServerFormat(u.fieldPath);return new AE(p,d)}(n,i)):[];var i;if(e.update){const i=Mu(n,e.update.name),s=new zt({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ms((e.updateMask.fieldPaths||[]).map(y=>Or.fromServerFormat(y)));return new zc(i,s,u,t,r)}return new k_(i,s,t,r)}if(e.delete){const i=Mu(n,e.delete);return new O_(i,t)}if(e.verify){const i=Mu(n,e.verify);return new Sx(i,t)}return dt()}function a1(n,e){return{documents:[Rx(n,e.path)]}}function Mx(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Rx(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Rx(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(b=>function(T){if("=="===T.op){if(oe(T.value))return{unaryFilter:{field:L_(T.field),op:"IS_NAN"}};if(Q(T.value))return{unaryFilter:{field:L_(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(oe(T.value))return{unaryFilter:{field:L_(T.field),op:"IS_NOT_NAN"}};if(Q(T.value))return{unaryFilter:{field:L_(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:L_(T.field),op:Q2(T.op),value:T.value}}}(b));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:L_((b=y).field),direction:Y2(b.dir)};var b})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.gt||C_(y)?y:{value:y});var y,d,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function l1(n){let e=n1(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let s=[];t.where&&(s=u1(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new R_(F_((T=b).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(b){let T;return T="object"==typeof b?b.value:b,C_(T)?null:T}(t.limit));let p=null;var b;t.startAt&&(p=new fh((b=t.startAt).values||[],!!b.before));let y=null;return t.endAt&&(y=function(b){return new fh(b.values||[],!b.before)}(t.endAt)),TO(e,i,u,s,d,"F",p,y)}function u1(n){return n?void 0!==n.unaryFilter?[X2(n)]:void 0!==n.fieldFilter?[J2(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>u1(e)).reduce((e,t)=>e.concat(t)):dt():[]}function Y2(n){return j2[n]}function Q2(n){return $2[n]}function L_(n){return{fieldPath:n.canonicalString()}}function F_(n){return Or.fromServerFormat(n.fieldPath)}function J2(n){return Gi.create(F_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function X2(n){switch(n.unaryFilter.op){case"IS_NAN":const e=F_(n.unaryFilter.field);return Gi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=F_(n.unaryFilter.field);return Gi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=F_(n.unaryFilter.field);return Gi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=F_(n.unaryFilter.field);return Gi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function eH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function c1(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ns(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d1(e)),e=tH(n.get(t),e);return d1(e)}function tH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function d1(n){return n+"\x01\x01"}function Pu(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),vn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&dt(),n.charAt(u+1)){case"\x01":const d=n.substring(s,u);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:dt()}s=u+2}return new vn(r)}const h1=["userId","batchId"];function pD(n,e){return[n,Ns(e)]}function f1(n,e,t){return[n,Ns(e),t]}const nH={},rH=["prefixPath","collectionGroup","readTime","documentId"],iH=["prefixPath","collectionGroup","documentId"],sH=["collectionGroup","readTime","prefixPath","documentId"],oH=["canonicalId","targetId"],aH=["targetId","path"],lH=["path","targetId"],uH=["collectionId","parent"],cH=["indexId","uid"],dH=["uid","sequenceNumber"],hH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fH=["indexId","uid","orderedDocumentKey"],pH=["userId","collectionPath","documentId"],gH=["userId","collectionPath","largestBatchId"],mH=["userId","collectionGroup","largestBatchId"],p1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_H=[...p1,"documentOverlays"],g1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],m1=g1,yH=[...m1,"indexConfiguration","indexState","indexEntries"];class Px extends E_{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ni(n,e){const t=et(n);return Fa.M(t.ie,e)}class Nx{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&k2(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=RE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=RE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KO();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let d=this.applyToLocalView(u,s.mutatedFields);d=t.has(i.key)?null:d;const p=UO(u,d);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(Ft.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&Ip(this.mutations,e.mutations,(t,r)=>BO(t,r))&&Ip(this.baseMutations,e.baseMutations,(t,r)=>BO(t,r))}}class kx{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=V2;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new kx(e,t,r,i)}}class Ox{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gh{constructor(e,t,r,i,s=Ft.min(),u=Ft.min(),d=Yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new gh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class _1{constructor(e){this.re=e}}function y1(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:gD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:OE(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:kE(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ap(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:Ap(e.version)}}var i,s;return r}function gD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ap(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Rp(n){const e=new tr(n.seconds,n.nanoseconds);return Ft.fromTimestamp(e)}function xp(n,e){const t=(e.baseMutations||[]).map(s=>xx(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>xx(n.re,s)),i=tr.fromMillis(e.localWriteTimeMs);return new Nx(e.batchId,i,t,r)}function VE(n){const e=Rp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rp(n.lastLimboFreeSnapshotVersion):Ft.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=Ps(x_(n1(i.documents[0])))):r=Ps(l1(n.query)),new gh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Yr.fromBase64String(n.resumeToken))}function v1(n,e){const t=Ap(e.snapshotVersion),r=Ap(e.lastLimboFreeSnapshotVersion);let i;i=dh(e.target)?a1(n.re,e.target):Mx(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fl(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Lx(n){const e=l1({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lD(e,e.limit,"L"):e}function Fx(n,e){return new Ox(e.largestBatchId,xx(n.re,e.overlayMutation))}function w1(n,e){const t=e.path.lastSegment();return[n,Ns(e.path.popLast()),t]}function E1(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ap(r.readTime),documentKey:Ns(r.documentKey.path),largestBatchId:r.largestBatchId}}class wH{getBundleMetadata(e,t){return I1(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Rp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return I1(e).put({bundleId:(r=t).id,createTime:Ap(Pi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return b1(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Lx(i.bundledQuery),readTime:Rp(i.readTime)};var i})}saveNamedQuery(e,t){return b1(e).put({name:(r=t).name,readTime:Ap(Pi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function I1(n){return Ni(n,"bundles")}function b1(n){return Ni(n,"namedQueries")}class mD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new mD(e,t.uid||"")}getOverlay(e,t){return UE(e).get(w1(this.userId,t)).next(r=>r?Fx(this.It,r):null)}getOverlays(e,t){const r=xu();return pe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const d=new Ox(t,u);i.push(this.ue(e,d))}),pe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Ns(u.getCollectionPath())));const s=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(UE(e).Y("collectionPathOverlayIndex",d))}),pe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=xu(),s=Ns(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return UE(e).W("collectionPathOverlayIndex",u).next(d=>{for(const p of d){const y=Fx(this.It,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=xu();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return UE(e).Z({index:"collectionGroupOverlayIndex",range:d},(p,y,b)=>{const T=Fx(this.It,y);s.size()<i||T.largestBatchId===u?(s.set(T.getKey(),T),u=T.largestBatchId):b.done()}).next(()=>s)}ue(e,t){return UE(e).put(function(r,i,s){const[u,d,p]=w1(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:FE(r.re,s.mutation)}}(this.It,this.userId,t))}}function UE(n){return Ni(n,"documentOverlays")}class Mp{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Lr(e.integerValue));else if("doubleValue"in e){const r=Lr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),D_(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ch(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Ye(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):dt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function EH(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function C1(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=EH(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}Mp.Te=new Mp;class IH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=C1(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=C1(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class bH{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class CH{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class BE{constructor(){this.Be=new IH,this.Le=new bH(this.Be),this.Ue=new CH(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Pp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pp(this.indexId,this.documentKey,this.arrayValue,r)}}function Np(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=D1(n.arrayValue,e.arrayValue),0!==t?t:(t=D1(n.directionalValue,e.directionalValue),0!==t?t:Qe.comparator(n.documentKey,e.documentKey)))}function D1(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class DH{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=vE(e);if(void 0!==t&&!this.ze(t))return!1;const r=La(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class TH{constructor(){this.Ye=new Vx}addToCollectionParentIndex(e,t){return this.Ye.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(Wi.min())}updateCollectionGroup(e,t,r){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class Vx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(vn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(vn.comparator)).toArray()}}const _D=new Uint8Array(0);class SH{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Vx,this.Ze=new ph(r=>Fl(r),(r,i)=>Wc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:Ns(i)};return T1(e).put(s)}return pe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[_E(t),""],!1,!0);return T1(e).W(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Pu(u.parent))}return r})}addFieldIndex(e,t){const r=yD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=jE(e);return s.next(d=>{u.put(E1(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=yD(e),i=jE(e),s=HE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=HE(e);let i=!0;const s=new Map;return pe.forEach(this.tn(t),u=>this.en(e,u).next(d=>{i&&(i=!!d),s.set(u,d)})).next(()=>{if(i){let u=rn();const d=[];return pe.forEach(s,(p,y)=>{var b;$e("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(ct=>`${ct.fieldPath}:${ct.kind}`).join(",")}`} to execute ${Fl(t)}`);const T=function(ct,ht){const Pt=vE(ht);if(void 0===Pt)return null;for(const Ut of hh(ct,Pt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(y,p),x=function(ct,ht){const Pt=new Map;for(const Ut of La(ht))for(const wn of hh(ct,Ut.fieldPath))switch(wn.op){case"==":case"in":Pt.set(Ut.fieldPath.canonicalString(),wn.value);break;case"not-in":case"!=":return Pt.set(Ut.fieldPath.canonicalString(),wn.value),Array.from(Pt.values())}return null}(y,p),F=function(ct,ht){const Pt=[];let Ut=!0;for(const wn of La(ht)){const Fs=0===wn.kind?S_(ct,wn.fieldPath,ct.startAt):A_(ct,wn.fieldPath,ct.startAt);Pt.push(Fs.value),Ut&&(Ut=Fs.inclusive)}return new fh(Pt,Ut)}(y,p),j=function(ct,ht){const Pt=[];let Ut=!0;for(const wn of La(ht)){const Fs=0===wn.kind?A_(ct,wn.fieldPath,ct.endAt):S_(ct,wn.fieldPath,ct.endAt);Pt.push(Fs.value),Ut&&(Ut=Fs.inclusive)}return new fh(Pt,Ut)}(y,p),ne=this.nn(p,y,F),de=this.nn(p,y,j),qe=this.sn(p,y,x),tt=this.rn(p.indexId,T,ne,F.inclusive,de,j.inclusive,qe);return pe.forEach(tt,ct=>r.J(ct,t.limit).next(ht=>{ht.forEach(Pt=>{const Ut=Qe.fromSegments(Pt.documentKey);u.has(Ut)||(u=u.add(Ut),d.push(Ut))})}))}).next(()=>d)}return pe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,u,d){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),b=[];for(let T=0;T<p;++T){const x=t?this.on(t[T/y]):_D,F=this.un(e,x,r[T%y],i),j=this.cn(e,x,s[T%y],u),ne=d.map(de=>this.un(e,x,de,!0));b.push(...this.createRange(F,j,ne))}return b}un(e,t,r,i){const s=new Pp(e,Qe.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new Pp(e,Qe.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new DH(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const d of s)r.We(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return pe.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(u){let d=new jn(Or.comparator),p=!1;for(const y of u.filters){const b=y;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?p=!0:d=d.add(b.field))}for(const y of u.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new BE;for(const i of La(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.qe(i.kind);Mp.Te.ce(s,u)}return r.$e()}on(e){const t=new BE;return Mp.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new BE;return Mp.Te.ce(R(this.databaseId,t),r.qe(function(i){const s=La(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new BE);let s=0;for(const u of La(e)){const d=r[s++];for(const p of i)if(this.ln(t,u.fieldPath)&&B(d))i=this.fn(i,u,d);else{const y=p.qe(u.kind);Mp.Te.ce(d,y)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const d of i){const p=new BE;p.seed(d.$e()),Mp.Te.ce(u,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof Gi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=yD(e),i=jE(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const u=[];return pe.forEach(s,d=>i.get([d.indexId,this.uid]).next(p=>{u.push(function(y,b){const T=b?new Ho(b.sequenceNumber,new Wi(Rp(b.readTime),new Qe(Pu(b.documentKey)),b.largestBatchId)):Ho.empty(),x=y.fields.map(([F,j])=>new y_(Or.fromServerFormat(F),j));return new yE(y.indexId,y.collectionGroup,x,T)}(d,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=yD(e),s=jE(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>pe.forEach(d,p=>s.put(E1(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return pe.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?pe.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),pe.forEach(d,p=>this.wn(e,i,p).next(y=>{const b=this.mn(s,p);return y.isEqual(b)?pe.resolve():this.gn(e,s,p,y,b)}))))})}yn(e,t,r,i){return HE(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return HE(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=HE(e);let s=new jn(Np);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,d)=>{s=s.add(new Pp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(e,t){let r=new jn(Np);const i=this.an(t,e);if(null==i)return r;const s=vE(t);if(null!=s){const u=e.data.field(s.fieldPath);if(B(u))for(const d of u.arrayValue.values||[])r=r.add(new Pp(t.indexId,e.key,this.on(d),i))}else r=r.add(new Pp(t.indexId,e.key,_D,i));return r}gn(e,t,r,i,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,p,y,b,T){const x=d.getIterator(),F=p.getIterator();let j=Dp(x),ne=Dp(F);for(;j||ne;){let de=!1,qe=!1;if(j&&ne){const tt=y(j,ne);tt<0?qe=!0:tt>0&&(de=!0)}else null!=j?qe=!0:de=!0;de?(b(ne),ne=Dp(F)):qe?(T(j),j=Dp(x)):(j=Dp(x),ne=Dp(F))}}(i,s,Np,d=>{u.push(this.yn(e,t,r,d))},d=>{u.push(this.pn(e,t,r,d))}),pe.waitFor(u)}_n(e){let t=1;return jE(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>Np(u,d)).filter((u,d,p)=>!d||0!==Np(u,p[d-1]));const i=[];i.push(e);for(const u of r){const d=Np(u,e),p=Np(u,t);if(0===d)i[0]=e.Ke();else if(d>0&&p<0)i.push(u),i.push(u.Ke());else if(p>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2)s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,_D,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,_D,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(S1)}getMinOffset(e,t){return pe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||dt())).next(S1)}}function T1(n){return Ni(n,"collectionParents")}function HE(n){return Ni(n,"indexEntries")}function yD(n){return Ni(n,"indexConfiguration")}function jE(n){return Ni(n,"indexState")}function S1(n){Lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;EE(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Wi(e.readTime,e.documentKey,t)}const A1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class so{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new so(e,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function R1(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let d=0;const p=r.Z({range:u},(b,T,x)=>(d++,x.delete()));s.push(p.next(()=>{Lt(1===d)}));const y=[];for(const b of t.mutations){const T=f1(e,b.key.path,t.batchId);s.push(i.delete(T)),y.push(b.key)}return pe.waitFor(s).next(()=>y)}function vD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}so.DEFAULT_COLLECTION_PERCENTILE=10,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,so.DEFAULT=new so(41943040,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),so.DISABLED=new so(-1,0,0);class wD{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Lt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new wD(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).Z({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=V_(e),u=mh(e);return u.add({}).next(d=>{Lt("number"==typeof d);const p=new Nx(d,t,r,i),y=function(x,F,j){const ne=j.baseMutations.map(qe=>FE(x.re,qe)),de=j.mutations.map(qe=>FE(x.re,qe));return{userId:F,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:ne,mutations:de}}(this.It,this.userId,p),b=[];let T=new jn((x,F)=>Yt(x.canonicalString(),F.canonicalString()));for(const x of i){const F=f1(this.userId,x.key.path,d);T=T.add(x.key.path.popLast()),b.push(u.put(y)),b.push(s.put(F,nH))}return T.forEach(x=>{b.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[d]=p.keys()}),pe.waitFor(b).next(()=>p)})}lookupMutationBatch(e,t){return mh(e).get(t).next(r=>r?(Lt(r.userId===this.userId),xp(this.It,r)):null)}Tn(e,t){return this.In[t]?pe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return mh(e).Z({index:"userMutationsIndex",range:i},(u,d,p)=>{d.userId===this.userId&&(Lt(d.batchId>=r),s=xp(this.It,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return mh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mh(e).W("userMutationsIndex",t).next(r=>r.map(i=>xp(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=pD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return V_(e).Z({range:i},(u,d,p)=>{const[y,b,T]=u,x=Pu(b);if(y===this.userId&&t.path.isEqual(x))return mh(e).get(T).next(F=>{if(!F)throw dt();Lt(F.userId===this.userId),s.push(xp(this.It,F))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Yt);const i=[];return t.forEach(s=>{const u=pD(this.userId,s.path),d=IDBKeyRange.lowerBound(u),p=V_(e).Z({range:d},(y,b,T)=>{const[x,F,j]=y,ne=Pu(F);x===this.userId&&s.path.isEqual(ne)?r=r.add(j):T.done()});i.push(p)}),pe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=pD(this.userId,r),u=IDBKeyRange.lowerBound(s);let d=new jn(Yt);return V_(e).Z({range:u},(p,y,b)=>{const[T,x,F]=p,j=Pu(x);T===this.userId&&r.isPrefixOf(j)?j.length===i&&(d=d.add(F)):b.done()}).next(()=>this.En(e,d))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(mh(e).get(s).next(u=>{if(null===u)throw dt();Lt(u.userId===this.userId),r.push(xp(this.It,u))}))}),pe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return R1(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),pe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return pe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return V_(e).Z({range:r},(s,u,d)=>{if(s[0]===this.userId){const p=Pu(s[1]);i.push(p)}else d.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return x1(e,this.userId,t)}Rn(e){return M1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function x1(n,e,t){const r=pD(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return V_(n).Z({range:s,X:!0},(d,p,y)=>{const[b,T,x]=d;b===e&&T===i&&(u=!0),y.done()}).next(()=>u)}function mh(n){return Ni(n,"mutations")}function V_(n){return Ni(n,"documentMutations")}function M1(n){return Ni(n,"mutationQueues")}class kp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kp(0)}static vn(){return new kp(-1)}}class AH{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new kp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ft.fromTimestamp(new tr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>U_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return U_(e).Z((u,d)=>{const p=VE(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>pe.waitFor(s)).next(()=>i)}forEachTarget(e,t){return U_(e).Z((r,i)=>{const s=VE(i);t(s)})}Vn(e){return P1(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}Sn(e,t){return P1(e).put("targetGlobalKey",t)}Dn(e,t){return U_(e).put(v1(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Fl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return U_(e).Z({range:i,index:"queryTargetsIndex"},(u,d,p)=>{const y=VE(d);Wc(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=_h(e);return t.forEach(u=>{const d=Ns(u.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),pe.waitFor(i)}removeMatchingKeys(e,t,r){const i=_h(e);return pe.forEach(t,s=>{const u=Ns(s.path);return pe.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=_h(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=_h(e);let s=rn();return i.Z({range:r,X:!0},(u,d,p)=>{const y=Pu(u[1]),b=new Qe(y);s=s.add(b)}).next(()=>s)}containsKey(e,t){const r=Ns(t.path),i=IDBKeyRange.bound([r],[_E(r)],!1,!0);let s=0;return _h(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,d],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}se(e,t){return U_(e).get(t).next(r=>r?VE(r):null)}}function U_(n){return Ni(n,"targets")}function P1(n){return Ni(n,"targetGlobal")}function _h(n){return Ni(n,"targetDocuments")}function N1([n,e],[t,r]){const i=Yt(n,t);return 0===i?Yt(e,r):i}class RH{constructor(e){this.xn=e,this.buffer=new jn(N1),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();N1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xH{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;$e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,De.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ru(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield jo(r)}yield t.Fn(3e5)}))}}class MH{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return pe.resolve(as.at);const r=new RH(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(A1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A1):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,u,d,p,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,d=Date.now(),this.removeTargets(e,r,t))).next(T=>(s=T,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),gE()<=Fo.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-b}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:T})))}}class PH{constructor(e,t){this.db=e,this.garbageCollector=new MH(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return ED(e,r)}removeReference(e,t,r){return ED(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ED(e,t)}Gn(e,t){return function(r,i){let s=!1;return M1(r).tt(u=>x1(r,u,i).next(d=>(d&&(s=!0),pe.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(u,d)=>{if(d<=t){const p=this.Gn(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ft.min()),_h(e).delete([0,Ns(u.path)])))});i.push(p)}}).next(()=>pe.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ED(e,t)}Kn(e,t){const r=_h(e);let i,s=as.at;return r.Z({index:"documentTargetsIndex"},([u,d],{path:p,sequenceNumber:y})=>{0===u?(s!==as.at&&t(new Qe(Pu(i)),s),s=y,i=p):s=as.at}).next(()=>{s!==as.at&&t(new Qe(Pu(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ED(n,e){return _h(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ns(e.path),sequenceNumber:r}));var r}class k1{constructor(){this.changes=new ph(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?pe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NH{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Op(e).put(r)}removeEntry(e,t,r){return Op(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],gD(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return Op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($E(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return Op(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only($E(t))},(i,s)=>{r={document:this.jn(t,s),size:vD(s)}}).next(()=>r)}getEntries(e,t){let r=io();return this.zn(e,t,(i,s)=>{const u=this.jn(i,s);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=io(),i=new vr(Qe.comparator);return this.zn(e,t,(s,u)=>{const d=this.jn(s,u);r=r.insert(s,d),i=i.insert(s,vD(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return pe.resolve();let i=new jn(V1);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound($E(i.first()),$E(i.last())),u=i.getIterator();let d=u.getNext();return Op(e).Z({index:"documentKeyIndex",range:s},(p,y,b)=>{const T=Qe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&V1(d,T)<0;)r(d,null),d=u.getNext();d&&d.isEqual(T)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?b.j($E(d)):b.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),gD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Op(e).W(IDBKeyRange.bound(i,s,!0)).next(u=>{let d=io();for(const p of u){const y=this.jn(Qe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let s=io();const u=F1(t,r),d=F1(t,Wi.max());return Op(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(p,y,b)=>{const T=this.jn(Qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(T.key,T),s.size===i&&b.done()}).next(()=>s)}newChangeBuffer(e){return new kH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return L1(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}Qn(e,t){return L1(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function vH(n,e){let t;if(e.document)t=o1(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Qe.fromSegments(e.noDocument.path),i=Rp(e.noDocument.readTime);t=Cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=Qe.fromSegments(e.unknownDocument.path),i=Rp(e.unknownDocument.version);t=Cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new tr(r[0],r[1]);return Ft.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Ft.min()))return r}return Cn.newInvalidDocument(e)}}function O1(n){return new NH(n)}class kH extends k1{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ph(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((s,u)=>Yt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const d=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,d.readTime)),u.isValidDocument()){const p=y1(this.Yn.It,u);i=i.add(s.path.popLast()),r+=vD(p)-d.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=d.size,this.trackRemovals){const p=y1(this.Yn.It,u.convertToNoDocument(Ft.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),pe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,u)=>{this.Xn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function L1(n){return Ni(n,"remoteDocumentGlobal")}function Op(n){return Ni(n,"remoteDocumentsV14")}function $E(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function F1(n,e){const t=e.documentKey.path.toArray();return[n,gD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function V1(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Yt(t[s],r[s]),i)return i;return i=Yt(t.length,r.length),i||(i=Yt(t[t.length-2],r[r.length-2]),i||Yt(t[t.length-1],r[r.length-1]))}class OH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class U1{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&RE(r.mutation,i,Ms.empty(),tr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,rn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=rn()){const i=xu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=xE();return s.forEach((d,p)=>{u=u.insert(d,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=xu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,rn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let s=io();const u=ME(),d=ME();return t.forEach((p,y)=>{const b=r.get(y.key);i.has(y.key)&&(void 0===b||b.mutation instanceof zc)?s=s.insert(y.key,y):void 0!==b&&(u.set(y.key,b.mutation.getFieldMask()),RE(b.mutation,y,b.mutation.getFieldMask(),tr.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,b)=>u.set(y,b)),t.forEach((y,b)=>{var T;return d.set(y,new OH(b,null!==(T=u.get(y))&&void 0!==T?T:null))}),d))}recalculateAndSaveOverlays(e,t){const r=ME();let i=new vr((u,d)=>u-d),s=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let b=r.get(p)||Ms.empty();b=d.applyToLocalView(y,b),r.set(p,b);const T=(i.get(d.batchId)||rn()).add(p);i=i.insert(d.batchId,T)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,b=p.value,T=KO();b.forEach(x=>{if(!s.has(x)){const F=UO(t.get(x),r.get(x));null!==F&&T.set(x,F),s=s.add(x)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,T))}return pe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Cx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):pe.resolve(xu());let d=-1,p=s;return u.next(y=>pe.forEach(y,(b,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),s.get(b)?pe.resolve():this.getBaseDocument(e,b,T).next(x=>{p=p.insert(b,x)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,rn())).next(b=>({batchId:d,changes:qO(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Qe(t)).next(r=>{let i=xE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=xE();return this.indexManager.getCollectionParents(e,i).next(u=>pe.forEach(u,d=>{const p=(y=t,b=d.child(i),new Gc(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,b;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((b,T)=>{s=s.insert(b,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((d,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,Cn.newInvalidDocument(y)))});let u=xE();return i.forEach((d,p)=>{const y=s.get(d);void 0!==y&&RE(y.mutation,p,Ms.empty(),tr.now()),Tx(t,p)&&(u=u.insert(d,p))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):pe.resolve(Cn.newInvalidDocument(t))}}class LH{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return pe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Pi(r.createTime)}),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Lx(r.bundledQuery),readTime:Pi(r.readTime)}),pe.resolve();var r}}class FH{constructor(){this.overlays=new vr(Qe.comparator),this.es=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xu();return pe.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),pe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),pe.resolve()}getOverlaysForCollection(e,t,r){const i=xu(),s=t.length+1,u=new Qe(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return pe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new vr((y,b)=>y-b);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let b=s.get(y.largestBatchId);null===b&&(b=xu(),s=s.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const d=xu(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,b)=>d.set(y,b)),!(d.size()>=i)););return pe.resolve(d)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Ox(t,r));let s=this.es.get(t);void 0===s&&(s=rn(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class Ux{constructor(){this.ns=new jn(ki.ss),this.rs=new jn(ki.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new ki(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new ki(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Qe(new vn([])),r=new ki(t,e),i=new ki(t,e+1),s=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),s.push(u.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Qe(new vn([])),r=new ki(t,e),i=new ki(t,e+1);let s=rn();return this.rs.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new ki(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ki{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Qe.comparator(e.key,t.key)||Yt(e._s,t._s)}static os(e,t){return Yt(e._s,t._s)||Qe.comparator(e.key,t.key)}}class VH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new jn(ki.ss)}checkEmpty(e){return pe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const u=new Nx(s,t,r,i);this.mutationQueue.push(u);for(const d of i)this.gs=this.gs.add(new ki(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return pe.resolve(u)}lookupMutationBatch(e,t){return pe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return pe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ki(t,0),i=new ki(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],u=>{const d=this.ys(u._s);s.push(d)}),pe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Yt);return t.forEach(i=>{const s=new ki(i,0),u=new ki(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,u],d=>{r=r.add(d._s)})}),pe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Qe.isDocumentKey(s)||(s=s.child(""));const u=new ki(new Qe(s),0);let d=new jn(Yt);return this.gs.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p._s)),!0)},u),pe.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return pe.forEach(t.mutations,i=>{const s=new ki(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new ki(t,0),i=this.gs.firstAfterOrEqual(r);return pe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return pe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UH{constructor(e){this.Es=e,this.docs=new vr(Qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return pe.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=io();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cn.newInvalidDocument(i))}),pe.resolve(r)}getAllFromCollection(e,t,r){let i=io();const s=new Qe(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:d,value:{document:p}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||EE(v_(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return pe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}As(e,t){return pe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new BH(this)}getSize(e){return pe.resolve(this.size)}}class BH extends k1{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),pe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class HH{constructor(e){this.persistence=e,this.Rs=new ph(t=>Fl(t),Wc),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Ux,this.targetCount=0,this.vs=kp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),pe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Dn(t),pe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Rs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),pe.waitFor(s).next(()=>i)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return pe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),pe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),pe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return pe.resolve(r)}containsKey(e,t){return pe.resolve(this.Ps.containsKey(t))}}class B1{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new as(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new HH(this),this.indexManager=new TH,this.remoteDocumentCache=new UH(r=>this.referenceDelegate.xs(r)),this.It=new _1(t),this.Ns=new LH(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new VH(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new jH(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return pe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class jH extends E_{constructor(e){super(),this.currentSequenceNumber=e}}class ID{constructor(e){this.persistence=e,this.Fs=new Ux,this.$s=null}static Bs(e){return new ID(e)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),pe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.Ls,r=>{const i=Qe.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,Ft.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return pe.or([()=>pe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class $H{constructor(e){this.It=e}$(e,t,r,i){const s=new IE("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",h1,{unique:!0}),d.createObjectStore("documentMutations"),H1(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=pe.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),H1(e)),u=u.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ft.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,p){return p.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",h1,{unique:!0});const b=p.store("mutations"),T=y.map(x=>b.put(x));return pe.waitFor(T)})}(e,s))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(s))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(s))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(s))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:pH});p.createIndex("collectionPathOverlayIndex",gH,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",mH,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:rH});p.createIndex("documentKeyIndex",iH),p.createIndex("collectionGroupIndex",sH)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,s))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:cH}).createIndex("sequenceNumberIndex",dH,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:hH}).createIndex("documentKeyIndex",fH,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=vD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>pe.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(d=>pe.forEach(d,p=>{Lt(p.userId===s.userId);const y=xp(this.It,p);return R1(e,s.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((u,d)=>{const p=new vn(u),y=[0,Ns(p)];s.push(t.get(y).next(b=>b?pe.resolve():t.put({targetId:0,path:Ns(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>pe.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:uH});const r=t.store("collectionParents"),i=new Vx,s=u=>{if(i.add(u)){const d=u.lastSegment(),p=u.popLast();return r.put({collectionId:d,parent:Ns(p)})}};return t.store("remoteDocuments").Z({X:!0},(u,d)=>{const p=new vn(u);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,d,p],y)=>{const b=Pu(d);return s(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=VE(i),u=v1(this.It,s);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,u)=>{const d=t.store("remoteDocumentsV14"),p=(y=u,y.document?new Qe(vn.fromString(y.document.name).popFirst(5)):y.noDocument?Qe.fromSegments(y.noDocument.path):y.unknownDocument?Qe.fromSegments(y.unknownDocument.path):dt()).path.toArray();var y;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(b))}).next(()=>pe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=O1(this.It),s=new B1(ID.Bs,this.It.re);return r.W().next(u=>{const d=new Map;return u.forEach(p=>{var y;let b=null!==(y=d.get(p.userId))&&void 0!==y?y:rn();xp(this.It,p).keys().forEach(T=>b=b.add(T)),d.set(p.userId,b)}),pe.forEach(d,(p,y)=>{const b=new Kn(y),T=mD.oe(this.It,b),x=s.getIndexManager(b),F=wD.oe(b,this.It,x,s.referenceDelegate);return new U1(i,F,T,x).recalculateAndSaveOverlaysForDocumentKeys(new Px(t,as.at),p).next()})})}}function H1(n){n.createObjectStore("targetDocuments",{keyPath:aH}).createIndex("documentTargetsIndex",lH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oH,{unique:!0}),n.createObjectStore("targetGlobal")}const Bx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hx{constructor(e,t,r,i,s,u,d,p,y,b,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=u,this.document=d,this.Js=y,this.Ys=b,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!Hx.C())throw new Ue(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PH(this,i),this.ii=t+"main",this.It=new _1(p),this.ri=new Fa(this.ii,this.Xs,new $H(this.It)),this.Cs=new AH(this.referenceDelegate,this.It),this.remoteDocumentCache=O1(this.It),this.Ns=new wH,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,Bx);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new as(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,De.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,De.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,De.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ru(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return WE(e).get("owner").next(t=>pe.resolve(this.mi(t)))}gi(e){return bD(e).delete(this.clientId)}yi(){var e=this;return(0,De.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ni(r,"clientMetadata");return i.W().next(s=>{const u=e.Ii(s,18e5),d=s.filter(p=>-1===u.indexOf(p));return pe.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?pe.resolve(!0):WE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ue(ye.FAILED_PRECONDITION,Bx);return!1}}return!(!this.networkEnabled||!this.inForeground)||bD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,De.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Px(t,as.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>bD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return wD.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SH(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return mD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.Xs)?yH:14===u?m1:13===u?g1:12===u?_H:11===u?p1:void dt();var u;let d;return this.ri.runTransaction(e,i,s,p=>(d=new Px(p,this.Ss?this.Ss.next():as.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(ye.FAILED_PRECONDITION,w_);return r(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>r(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}Vi(e){return WE(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(ye.FAILED_PRECONDITION,Bx)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return WE(e).put("owner",t)}static C(){return Fa.C()}_i(e){const t=WE(e);return t.get("owner").next(r=>this.mi(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):pe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,U.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function WE(n){return Ni(n,"owner")}function bD(n){return Ni(n,"clientMetadata")}function jx(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $x{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=rn(),i=rn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $x(e,t.fromCache,r,i)}}class j1{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(SO(t))return pe.resolve(null);let r=Ps(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=lD(t,null,"F"),r=Ps(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=rn(...s);return this.Ni.getDocuments(e,u).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Fi(t,d);return this.$i(t,y,u,p.readTime)?this.ki(e,lD(t,null,"F")):this.Bi(e,y,t,p)}))})))}Oi(e,t,r,i){return SO(t)||i.isEqual(Ft.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const u=this.Fi(t,s);return this.$i(t,u,r,i)?this.Mi(e,t):(gE()<=Fo.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dx(t)),this.Bi(e,u,t,wE(i,-1)))})}Fi(e,t){let r=new jn(xO(e));return t.forEach((i,s)=>{Tx(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return gE()<=Fo.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Dx(t)),this.Ni.getDocumentsMatchingQuery(e,t,Wi.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class WH{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new vr(Yt),this.qi=new ph(s=>Fl(s),Wc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U1(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function $1(n,e,t,r){return new WH(n,e,t,r)}function W1(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,De.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],d=[];let p=rn();for(const y of i){u.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}for(const y of s){d.push(y.batchId);for(const b of y.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next(y=>({ji:y,removedBatchIds:u,addedBatchIds:d}))})})}),Wx.apply(this,arguments)}function GH(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,d,p,y){const b=p.batch,T=b.keys();let x=pe.resolve();return T.forEach(F=>{x=x.next(()=>y.getEntry(d,F)).next(j=>{const ne=p.docVersions.get(F);Lt(null!==ne),j.version.compareTo(ne)<0&&(b.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),y.addEntry(j)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(d,b))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=rn();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function G1(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function zH(n,e){const t=et(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const d=[];e.targetChanges.forEach((b,T)=>{const x=i.get(T);if(!x)return;d.push(t.Cs.removeMatchingKeys(s,b.removedDocuments,T).next(()=>t.Cs.addMatchingKeys(s,b.addedDocuments,T)));let F=x.withSequenceNumber(s.currentSequenceNumber);var j,ne,de;e.targetMismatches.has(T)?F=F.withResumeToken(Yr.EMPTY_BYTE_STRING,Ft.min()).withLastLimboFreeSnapshotVersion(Ft.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(T,F),ne=F,de=b,(0===(j=x).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(s,F))});let p=io(),y=rn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(z1(s,u,e.documentUpdates).next(b=>{p=b.Wi,y=b.zi})),!r.isEqual(Ft.min())){const b=t.Cs.getLastRemoteSnapshotVersion(s).next(T=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(b)}return pe.waitFor(d).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.Ui=i,s))}function z1(n,e,t){let r=rn(),i=rn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=io();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(Ft.min())?(e.removeEntry(d,p.readTime),u=u.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(d,p)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Wi:u,zi:i}})}function qH(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function B_(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,pe.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new gh(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function H_(n,e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,De.Z)(function*(n,e,t){const r=et(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Ru(u))throw u;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Gx.apply(this,arguments)}function CD(n,e,t){const r=et(n);let i=Ft.min(),s=rn();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,p,y){const b=et(d),T=b.qi.get(y);return void 0!==T?pe.resolve(b.Ui.get(T)):b.Cs.getTargetData(p,y)}(r,u,Ps(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,d.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Ft.min(),t?s:rn())).next(d=>(Z1(r,RO(e),d),{documents:d,Hi:s})))}function q1(n,e){const t=et(n),r=et(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(u=>u?u.target:null))}function K1(n,e){const t=et(n),r=t.Ki.get(e)||Ft.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,wE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Z1(t,e,i),i))}function Z1(n,e,t){let r=n.Ki.get(e)||Ft.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function zx(){return zx=(0,De.Z)(function*(n,e,t,r){const i=et(n);let s=rn(),u=io();for(const y of t){const b=e.Ji(y.metadata.name);y.document&&(s=s.add(b));const T=e.Yi(y);T.setReadTime(e.Xi(y.metadata.readTime)),u=u.insert(b,T)}const d=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield B_(i,(y=r,Ps(x_(vn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>z1(y,d,u).next(b=>(d.apply(y),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Cs.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,b.Wi,b.zi)).next(()=>b.Wi)))}),zx.apply(this,arguments)}function ZH(n,e){return qx.apply(this,arguments)}function qx(){return qx=(0,De.Z)(function*(n,e,t=rn()){const r=yield B_(n,Ps(Lx(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Pi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(s,e);const d=r.withResumeToken(Yr.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(d.targetId,d),i.Cs.updateTargetData(s,d).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),qx.apply(this,arguments)}function Y1(n,e){return`firestore_clients_${n}_${e}`}function Q1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Kx(n,e){return`firestore_targets_${n}_${e}`}class DD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Ue(i.error.code,i.error.message))),u?new DD(e,t,i.state,s):(kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ue(r.error.code,r.error.message))),s?new GE(e,r.state,i):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=hD();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=Ex(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new TD(e,s):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Zx{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Zx(t.clientId,t.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Yx{constructor(){this.activeTargetIds=hD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qx{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new vr(Yt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=Y1(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Yx),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,De.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(Y1(e.persistenceKey,i));if(s){const u=TD.Zi(i,s);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Kx(this.persistenceKey,e));if(r){const i=GE.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kx(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,De.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let u=as.at;if(null!=s)try{const d=JSON.parse(s);Lt("number"==typeof d),u=d}catch(d){kr("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==as.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new DD(this.currentUser,e,t,r),s=Q1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=Q1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=Kx(this.persistenceKey,e),s=new GE(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return TD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return DD.Zi(new Kn(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return GE.Zi(i,t)}yr(e){return Zx.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,De.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),u=[],d=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Br(u,d).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=hD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class J1{constructor(){this.Lr=new Yx,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Yx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class YH{qr(e){}shutdown(){}}class X1{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const QH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JH{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class XH extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const u=this.ho(e,t);$e("RestConnection","Sending: ",u,r);const d={};return this.lo(d,i,s),this.fo(e,u,d,r).then(p=>($e("RestConnection","Received: ",p),p),p=>{throw Au("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}_o(e,t,r,i,s,u){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+lh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${QH[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,u)=>{const d=new qC;d.setWithCredentials(!0),d.listenOnce(dx.COMPLETE,()=>{var y;try{switch(d.getLastErrorCode()){case p_.NO_ERROR:const b=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),s(b);break;case p_.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),u(new Ue(ye.DEADLINE_EXCEEDED,"Request time out"));break;case p_.HTTP_ERROR:const T=d.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',T,"response text:",d.getResponseText()),T>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const F=null===(y=x)||void 0===y?void 0:y.error;if(F&&F.status&&F.message){const j=function(ne){const de=ne.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(de)>=0?de:ye.UNKNOWN}(F.status);u(new Ue(j,F.message))}else u(new Ue(ye.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ue(ye.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);d.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cx(),u=WC(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new pE({})),this.lo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const p=i.join("");$e("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let b=!1,T=!1;const x=new JH({Hr:j=>{T?$e("Connection","Not sending because WebChannel is closed:",j):(b||($e("Connection","Opening WebChannel transport."),y.open(),b=!0),$e("Connection","WebChannel sending:",j),y.send(j))},Jr:()=>y.close()}),F=(j,ne,de)=>{j.listen(ne,qe=>{try{de(qe)}catch(tt){setTimeout(()=>{throw tt},0)}})};return F(y,Bo.EventType.OPEN,()=>{T||$e("Connection","WebChannel transport opened.")}),F(y,Bo.EventType.CLOSE,()=>{T||(T=!0,$e("Connection","WebChannel transport closed"),x.io())}),F(y,Bo.EventType.ERROR,j=>{T||(T=!0,Au("Connection","WebChannel transport errored:",j),x.io(new Ue(ye.UNAVAILABLE,"The operation could not be completed")))}),F(y,Bo.EventType.MESSAGE,j=>{var ne;if(!T){const de=j.data[0];Lt(!!de);const qe=de,tt=qe.error||(null===(ne=qe[0])||void 0===ne?void 0:ne.error);if(tt){$e("Connection","WebChannel received error:",tt);const ct=tt.status;let ht=function(Ut){const wn=oi[Ut];if(void 0!==wn)return GO(wn)}(ct),Pt=tt.message;void 0===ht&&(ht=ye.INTERNAL,Pt="Unknown error status: "+ct+" with message "+tt.message),T=!0,x.io(new Ue(ht,Pt)),y.close()}else $e("Connection","WebChannel received:",de),x.ro(de)}}),F(u,GC.STAT_EVENT,j=>{j.stat===zC.PROXY?$e("Connection","Detected buffering proxy"):j.stat===zC.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function eL(){return typeof window<"u"?window:null}function SD(){return typeof document<"u"?document:null}function zE(n){return new W2(n,!0)}class Jx{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class tL{constructor(e,t,r,i,s,u,d,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Jx(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,De.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,De.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,De.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ue(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,De.Z)(function*(){e.state=0,e.start()}))}Qo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ej extends tL{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function q2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:dt(),i=e.targetChange.targetIds||[],s=function(p,y){return p.gt?(Lt(void 0===y||"string"==typeof y),Yr.fromBase64String(y||"")):(Lt(void 0===y||y instanceof Uint8Array),Yr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(p){const y=void 0===p.code?ye.UNKNOWN:GO(p.code);return new Ue(y,p.message||"")}(u);t=new YO(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Mu(n,r.document.name),s=Pi(r.document.updateTime),u=new zt({mapValue:{fields:r.document.fields}}),d=Cn.newFoundDocument(i,s,u);t=new fD(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Mu(n,r.document),s=r.readTime?Pi(r.readTime):Ft.min(),u=Cn.newNoDocument(i,s);t=new fD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Mu(n,r.document);t=new fD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,s=new L2(r.count||0);t=new ZO(r.targetId,s)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Ft.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ft.min():s.readTime?Pi(s.readTime):Ft.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=LE(this.It),t.addTarget=function(i,s){let u;const d=s.target;return u=dh(d)?{documents:a1(i,d)}:{query:Mx(i,d)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=e1(i,s.resumeToken):s.snapshotVersion.compareTo(Ft.min())>0&&(u.readTime=kE(i,s.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function Z2(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=LE(this.It),t.removeTarget=e,this.Bo(t)}}class tj extends tL{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function K2(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let s=Pi(r.updateTime?r.updateTime:i);return s.isEqual(Ft.min())&&(s=Pi(i)),new N2(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pi(e.commitTime);return this.listener.Zo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=LE(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>FE(this.It,r))};this.Bo(t)}}class nj extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ye.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection._o(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(ye.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class ij{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(kr(t),this.ou=!1):$e("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class sj{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(d=>{r.enqueueAndForget((0,De.Z)(function*(){var p;qc(u)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,De.Z)(function*(y){const b=et(y);b._u.add(4),yield j_(b),b.gu.set("Unknown"),b._u.delete(4),yield qE(b)}),function(y){return p.apply(this,arguments)})(u))}))}),this.gu=new ij(r,i)}}function qE(n){return eM.apply(this,arguments)}function eM(){return eM=(0,De.Z)(function*(n){if(qc(n))for(const e of n.wu)yield e(!0)}),eM.apply(this,arguments)}function j_(n){return tM.apply(this,arguments)}function tM(){return tM=(0,De.Z)(function*(n){for(const e of n.wu)yield e(!1)}),tM.apply(this,arguments)}function AD(n,e){const t=et(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),iM(t)?rM(t):W_(t).ko()&&nM(t,e))}function KE(n,e){const t=et(n),r=W_(t);t.du.delete(e),r.ko()&&nL(t,e),0===t.du.size&&(r.ko()?r.Fo():qc(t)&&t.gu.set("Unknown"))}function nM(n,e){n.yu.Mt(e.targetId),W_(n).zo(e)}function nL(n,e){n.yu.Mt(e),W_(n).Ho(e)}function rM(n){n.yu=new H2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),W_(n).start(),n.gu.uu()}function iM(n){return qc(n)&&!W_(n).No()&&n.du.size>0}function qc(n){return 0===et(n)._u.size}function rL(n){n.yu=void 0}function oj(n){return sM.apply(this,arguments)}function sM(){return sM=(0,De.Z)(function*(n){n.du.forEach((e,t)=>{nM(n,e)})}),sM.apply(this,arguments)}function aj(n,e){return oM.apply(this,arguments)}function oM(){return oM=(0,De.Z)(function*(n,e){rL(n),iM(n)?(n.gu.hu(e),rM(n)):n.gu.set("Unknown")}),oM.apply(this,arguments)}function lj(n,e,t){return aM.apply(this,arguments)}function aM(){return aM=(0,De.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof YO&&2===e.state&&e.cause)try{yield(r=(0,De.Z)(function*(i,s){const u=s.cause;for(const d of s.targetIds)i.du.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.du.delete(d),i.yu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield RD(n,r)}else if(e instanceof fD?n.yu.Gt(e):e instanceof ZO?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Ft.min()))try{const r=yield G1(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.yu.te(s);return u.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.du.get(p);y&&i.du.set(p,y.withResumeToken(d.resumeToken,s))}}),u.targetMismatches.forEach(d=>{const p=i.du.get(d);if(!p)return;i.du.set(d,p.withResumeToken(Yr.EMPTY_BYTE_STRING,p.snapshotVersion)),nL(i,d);const y=new gh(p.target,d,1,p.sequenceNumber);nM(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield RD(n,r)}var r}),aM.apply(this,arguments)}function RD(n,e,t){return lM.apply(this,arguments)}function lM(){return lM=(0,De.Z)(function*(n,e,t){if(!Ru(e))throw e;n._u.add(1),yield j_(n),n.gu.set("Offline"),t||(t=()=>G1(n.localStore)),n.asyncQueue.enqueueRetryable((0,De.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield qE(n)}))}),lM.apply(this,arguments)}function iL(n,e){return e().catch(t=>RD(n,t,e))}function $_(n){return uM.apply(this,arguments)}function uM(){return uM=(0,De.Z)(function*(n){const e=et(n),t=yh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;uj(e);)try{const i=yield qH(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,cj(e,i)}catch(i){yield RD(e,i)}sL(e)&&oL(e)}),uM.apply(this,arguments)}function uj(n){return qc(n)&&n.fu.length<10}function cj(n,e){n.fu.push(e);const t=yh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function sL(n){return qc(n)&&!yh(n).No()&&n.fu.length>0}function oL(n){yh(n).start()}function dj(n){return cM.apply(this,arguments)}function cM(){return cM=(0,De.Z)(function*(n){yh(n).eu()}),cM.apply(this,arguments)}function hj(n){return dM.apply(this,arguments)}function dM(){return dM=(0,De.Z)(function*(n){const e=yh(n);for(const t of n.fu)e.Xo(t.mutations)}),dM.apply(this,arguments)}function fj(n,e,t){return hM.apply(this,arguments)}function hM(){return hM=(0,De.Z)(function*(n,e,t){const r=n.fu.shift(),i=kx.from(r,e,t);yield iL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield $_(n)}),hM.apply(this,arguments)}function pj(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,De.Z)(function*(n,e){var t;e&&yh(n).Yo&&(yield(t=(0,De.Z)(function*(r,i){if(WO(s=i.code)&&s!==ye.ABORTED){const u=r.fu.shift();yh(r).Mo(),yield iL(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield $_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),sL(n)&&oL(n)}),fM.apply(this,arguments)}function aL(n,e){return pM.apply(this,arguments)}function pM(){return pM=(0,De.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=qc(t);t._u.add(3),yield j_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield qE(t)}),pM.apply(this,arguments)}function gM(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,De.Z)(function*(n,e){const t=et(n);e?(t._u.delete(2),yield qE(t)):e||(t._u.add(2),yield j_(t),t.gu.set("Unknown"))}),mM.apply(this,arguments)}function W_(n){return n.pu||(n.pu=function(e,t,r){const i=et(e);return i.su(),new ej(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:oj.bind(null,n),Zr:aj.bind(null,n),Wo:lj.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.pu.Mo(),iM(n)?rM(n):n.gu.set("Unknown")):(yield n.pu.stop(),rL(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function yh(n){return n.Iu||(n.Iu=function(e,t,r){const i=et(e);return i.su(),new tj(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:dj.bind(null,n),Zr:pj.bind(null,n),tu:hj.bind(null,n),Zo:fj.bind(null,n)}),n.wu.push(function(){var e=(0,De.Z)(function*(t){t?(n.Iu.Mo(),yield $_(n)):(yield n.Iu.stop(),n.fu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class _M{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,d=new _M(e,t,u,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function G_(n,e){if(kr("AsyncQueue",`${e}: ${n}`),Ru(n))return new Ue(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class z_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Qe.comparator(t.key,r.key):(t,r)=>Qe.comparator(t.key,r.key),this.keyedMap=xE(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new z_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof z_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new z_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lL{constructor(){this.Tu=new vr(Qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class q_{constructor(e,t,r,i,s,u,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new q_(e,t,z_.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&SE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class gj{constructor(){this.Au=void 0,this.listeners=[]}}class mj{constructor(){this.queries=new ph(e=>AO(e),SE),this.onlineState="Unknown",this.Ru=new Set}}function yM(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,De.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new gj),i)try{s.Au=yield t.onListen(r)}catch(u){const d=G_(u,`Initialization of query '${Dx(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&IM(t)}),vM.apply(this,arguments)}function wM(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,De.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),EM.apply(this,arguments)}function _j(n,e){const t=et(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Pu(i)&&(r=!0);u.Au=i}}r&&IM(t)}function yj(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function IM(n){n.Ru.forEach(e=>{e.next()})}class bM{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new q_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=q_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class vj{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class uL{constructor(e){this.It=e}Ji(e){return Mu(this.It,e)}Yi(e){return e.metadata.exists?o1(this.It,e.document,!1):Cn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Pi(e)}}class wj{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=cL(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=vn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new uL(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||rn()).add(s);t.set(u,d)}}return t}complete(){var e=this;return(0,De.Z)(function*(){const t=yield function KH(n,e,t,r){return zx.apply(this,arguments)}(e.localStore,new uL(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield ZH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function cL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class dL{constructor(e){this.key=e}}class hL{constructor(e){this.key=e}}class fL{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=rn(),this.mutatedKeys=rn(),this.Gu=xO(e),this.Qu=new z_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new lL,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,T)=>{const x=i.get(b),F=Tx(this.query,T)?T:null,j=!!x&&this.mutatedKeys.has(x.key),ne=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let de=!1;x&&F?x.data.isEqual(F.data)?j!==ne&&(r.track({type:3,doc:F}),de=!0):this.Hu(x,F)||(r.track({type:2,doc:F}),de=!0,(p&&this.Gu(F,p)>0||y&&this.Gu(F,y)<0)&&(d=!0)):!x&&F?(r.track({type:0,doc:F}),de=!0):x&&!F&&(r.track({type:1,doc:x}),de=!0,(p||y)&&(d=!0)),de&&(F?(u=u.add(F),s=ne?s.add(b):s.delete(b)):(u=u.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),s=s.delete(b.key),r.track({type:1,doc:b})}return{Qu:u,zu:r,$i:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((y,b)=>function(T,x){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return F(T)-F(x)}(y.type,b.type)||this.Gu(y.doc,b.doc)),this.Ju(r);const u=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new q_(this.query,e.Qu,i,s,e.mutatedKeys,0===d,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new lL,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=rn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new hL(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new dL(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=rn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return q_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Ej{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ij{constructor(e){this.key=e,this.nc=!1}}class bj{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new ph(d=>AO(d),SE),this.rc=new Map,this.oc=new Set,this.uc=new vr(Qe.comparator),this.cc=new Map,this.ac=new Ux,this.hc={},this.lc=new Map,this.fc=kp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Cj(n,e){return CM.apply(this,arguments)}function CM(){return CM=(0,De.Z)(function*(n,e){const t=qM(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const u=yield B_(t.localStore,Ps(e));t.isPrimaryClient&&AD(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield DM(t,e,r,"current"===d,u.resumeToken)}return i}),CM.apply(this,arguments)}function DM(n,e,t,r,i){return TM.apply(this,arguments)}function TM(){return TM=(0,De.Z)(function*(n,e,t,r,i){n._c=(T,x,F)=>{return(j=(0,De.Z)(function*(ne,de,qe,tt){let ct=de.view.Wu(qe);ct.$i&&(ct=yield CD(ne.localStore,de.query,!1).then(({documents:Ut})=>de.view.Wu(Ut,ct)));const ht=tt&&tt.targetChanges.get(de.targetId),Pt=de.view.applyChanges(ct,ne.isPrimaryClient,ht);return LM(ne,de.targetId,Pt.Xu),Pt.snapshot}),function(ne,de,qe,tt){return j.apply(this,arguments)})(n,T,x,F);var j};const s=yield CD(n.localStore,e,!0),u=new fL(e,s.Hi),d=u.Wu(s.documents),p=NE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=u.applyChanges(d,n.isPrimaryClient,p);LM(n,t,y.Xu);const b=new Ej(e,t,u);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),TM.apply(this,arguments)}function Dj(n,e){return SM.apply(this,arguments)}function SM(){return SM=(0,De.Z)(function*(n,e){const t=et(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!SE(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield H_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),KE(t.remoteStore,r.targetId),K_(t,r.targetId)}).catch(jo))):(K_(t,r.targetId),yield H_(t.localStore,r.targetId,!0))}),SM.apply(this,arguments)}function AM(){return AM=(0,De.Z)(function*(n,e,t){const r=KM(n);try{const i=yield function(s,u){const d=et(s),p=tr.now(),y=u.reduce((x,F)=>x.add(F.key),rn());let b,T;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let F=io(),j=rn();return d.Gi.getEntries(x,y).next(ne=>{F=ne,F.forEach((de,qe)=>{qe.isValidDocument()||(j=j.add(de))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,F)).next(ne=>{b=ne;const de=[];for(const qe of u){const tt=O2(qe,b.get(qe.key).overlayedDocument);null!=tt&&de.push(new zc(qe.key,tt,nr(tt.value.mapValue),Cr.exists(!0)))}return d.mutationQueue.addMutationBatch(x,p,de,u)}).next(ne=>{T=ne;const de=ne.applyToLocalDocumentSet(b,j);return d.documentOverlayCache.saveOverlays(x,ne.batchId,de)})}).then(()=>({batchId:T.batchId,changes:qO(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,d){let p=s.hc[s.currentUser.toKey()];p||(p=new vr(Yt)),p=p.insert(u,d),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Kc(r,i.changes),yield $_(r.remoteStore)}catch(i){const s=G_(i,"Failed to persist write");t.reject(s)}}),AM.apply(this,arguments)}function pL(n,e){return RM.apply(this,arguments)}function RM(){return RM=(0,De.Z)(function*(n,e){const t=et(n);try{const r=yield zH(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.cc.get(s);u&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Lt(u.nc):i.removedDocuments.size>0&&(Lt(u.nc),u.nc=!1))}),yield Kc(t,r,e)}catch(r){yield jo(r)}}),RM.apply(this,arguments)}function gL(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,u)=>{const d=u.view.bu(e);d.snapshot&&i.push(d.snapshot)}),function(s,u){const d=et(s);d.onlineState=u;let p=!1;d.queries.forEach((y,b)=>{for(const T of b.listeners)T.bu(u)&&(p=!0)}),p&&IM(d)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Sj(n,e,t){return xM.apply(this,arguments)}function xM(){return xM=(0,De.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let u=new vr(Qe.comparator);u=u.insert(s,Cn.newNoDocument(s,Ft.min()));const d=rn().add(s),p=new PE(Ft.min(),new Map,new jn(Yt),u,d);yield pL(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),FM(r)}else yield H_(r.localStore,e,!1).then(()=>K_(r,e,t)).catch(jo)}),xM.apply(this,arguments)}function Aj(n,e){return MM.apply(this,arguments)}function MM(){return MM=(0,De.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield GH(t.localStore,e);OM(t,r,null),kM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Kc(t,i)}catch(i){yield jo(i)}}),MM.apply(this,arguments)}function Rj(n,e,t){return PM.apply(this,arguments)}function PM(){return PM=(0,De.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(s,u){const d=et(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,u).next(b=>(Lt(null!==b),y=b.keys(),d.mutationQueue.removeMutationBatch(p,b))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);OM(r,e,t),kM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Kc(r,i)}catch(i){yield jo(i)}}),PM.apply(this,arguments)}function NM(){return NM=(0,De.Z)(function*(n,e){const t=et(n);qc(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=et(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=G_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),NM.apply(this,arguments)}function kM(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function OM(n,e,t){const r=et(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function K_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||mL(n,r)})}function mL(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(KE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),FM(n))}function LM(n,e,t){for(const r of t)r instanceof dL?(n.ac.addReference(r.key,e),Mj(n,r)):r instanceof hL?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||mL(n,r.key)):dt()}function Mj(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oc.add(r),FM(n))}function FM(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Qe(vn.fromString(e)),r=n.fc.next();n.cc.set(r,new Ij(t)),n.uc=n.uc.insert(t,r),AD(n.remoteStore,new gh(Ps(x_(t.path)),r,2,as.at))}}function Kc(n,e,t){return VM.apply(this,arguments)}function VM(){return VM=(0,De.Z)(function*(n,e,t){const r=et(n),i=[],s=[],u=[];var d;r.ic.isEmpty()||(r.ic.forEach((d,p)=>{u.push(r._c(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const b=$x.Ci(p.targetId,y);s.push(b)}}))}),yield Promise.all(u),r.sc.Wo(i),yield(d=(0,De.Z)(function*(p,y){const b=et(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>pe.forEach(y,x=>pe.forEach(x.Si,F=>b.persistence.referenceDelegate.addReference(T,x.targetId,F)).next(()=>pe.forEach(x.Di,F=>b.persistence.referenceDelegate.removeReference(T,x.targetId,F)))))}catch(T){if(!Ru(T))throw T;$e("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const F=b.Ui.get(x),ne=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);b.Ui=b.Ui.insert(x,ne)}}}),function(p,y){return d.apply(this,arguments)})(r.localStore,s))}),VM.apply(this,arguments)}function Pj(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,De.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield W1(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(d=>{d.reject(new Ue(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kc(t,r.ji)}var i}),UM.apply(this,arguments)}function Nj(n,e){const t=et(n),r=t.cc.get(e);if(r&&r.nc)return rn().add(r.key);{let i=rn();const s=t.rc.get(e);if(!s)return i;for(const u of s){const d=t.ic.get(u);i=i.unionWith(d.view.ju)}return i}}function kj(n,e){return BM.apply(this,arguments)}function BM(){return BM=(0,De.Z)(function*(n,e){const t=et(n),r=yield CD(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&LM(t,e.targetId,i.Xu),i}),BM.apply(this,arguments)}function Oj(n,e){return HM.apply(this,arguments)}function HM(){return HM=(0,De.Z)(function*(n,e){const t=et(n);return K1(t.localStore,e).then(r=>Kc(t,r))}),HM.apply(this,arguments)}function Lj(n,e,t,r){return jM.apply(this,arguments)}function jM(){return jM=(0,De.Z)(function*(n,e,t,r){const i=et(n),s=yield function(u,d){const p=et(u),y=et(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>y.Tn(b,d).next(T=>T?p.localDocuments.getDocuments(b,T):pe.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===t?yield $_(i.remoteStore):"acknowledged"===t||"rejected"===t?(OM(i,e,r||null),kM(i,e),d=e,et(et(i.localStore).mutationQueue).An(d)):dt(),yield Kc(i,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),jM.apply(this,arguments)}function $M(){return $M=(0,De.Z)(function*(n,e){const t=et(n);if(qM(t),KM(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield _L(t,r.toArray());t.dc=!0,yield gM(t.remoteStore,!0);for(const s of i)AD(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(K_(t,u),H_(t.localStore,u,!0))),KE(t.remoteStore,u)}),yield i,yield _L(t,r),function(s){const u=et(s);u.cc.forEach((d,p)=>{KE(u.remoteStore,p)}),u.ac.fs(),u.cc=new Map,u.uc=new vr(Qe.comparator)}(t),t.dc=!1,yield gM(t.remoteStore,!1)}}),$M.apply(this,arguments)}function _L(n,e,t){return WM.apply(this,arguments)}function WM(){return WM=(0,De.Z)(function*(n,e,t){const r=et(n),i=[],s=[];for(const u of e){let d;const p=r.rc.get(u);if(p&&0!==p.length){d=yield B_(r.localStore,Ps(p[0]));for(const y of p){const b=r.ic.get(y),T=yield kj(r,b);T.snapshot&&s.push(T.snapshot)}}else{const y=yield q1(r.localStore,u);d=yield B_(r.localStore,y),yield DM(r,yL(y),u,!1,d.resumeToken)}i.push(d)}return r.sc.Wo(s),i}),WM.apply(this,arguments)}function yL(n){return TO(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vj(n){const e=et(n);return et(et(e.localStore).persistence).vi()}function Uj(n,e,t,r){return GM.apply(this,arguments)}function GM(){return GM=(0,De.Z)(function*(n,e,t,r){const i=et(n);if(i.dc)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield K1(i.localStore,RO(s[0])),d=PE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Yr.EMPTY_BYTE_STRING);yield Kc(i,u,d);break}case"rejected":yield H_(i.localStore,e,!0),K_(i,e,r);break;default:dt()}}),GM.apply(this,arguments)}function Bj(n,e,t){return zM.apply(this,arguments)}function zM(){return zM=(0,De.Z)(function*(n,e,t){const r=qM(n);if(r.dc){for(const i of e){if(r.rc.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const s=yield q1(r.localStore,i),u=yield B_(r.localStore,s);yield DM(r,yL(s),u.targetId,!1,u.resumeToken),AD(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield H_(r.localStore,i,!1).then(()=>{KE(r.remoteStore,i),K_(r,i)}).catch(jo))}}),zM.apply(this,arguments)}function qM(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sj.bind(null,e),e.sc.Wo=_j.bind(null,e.eventManager),e.sc.wc=yj.bind(null,e.eventManager),e}function KM(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Aj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rj.bind(null,e),e}class vL{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,De.Z)(function*(){t.It=zE(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return $1(this.persistence,new j1,e.initialUser,this.It)}yc(e){return new B1(ID.Bs,this.It)}gc(e){return new J1}terminate(){var e=this;return(0,De.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wL extends vL{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield KM(r.Ac.syncEngine),yield $_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return $1(this.persistence,new j1,e.initialUser,this.It)}Tc(e,t){return new xH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new _x(t,this.persistence);return new sD(e.asyncQueue,r)}yc(e){const t=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?so.withCacheSize(this.cacheSizeBytes):so.DEFAULT;return new Hx(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eL(),SD(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new J1}}class jj extends wL{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,De.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof Qx&&(r.sharedClientState.syncEngine={Fr:Lj.bind(null,i),$r:Uj.bind(null,i),Br:Bj.bind(null,i),vi:Vj.bind(null,i),Mr:Oj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,De.Z)(function*(u){yield function Fj(n,e){return $M.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}gc(e){const t=eL();if(!Qx.C(t))throw new Ue(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=jx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ZM{initialize(e,t){var r=this;return(0,De.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>gL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Pj.bind(null,r.syncEngine),yield gM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mj}createDatastore(e){const t=zE(e.databaseInfo.databaseId),r=new XH(e.databaseInfo);return new nj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>gL(this.syncEngine,d,0),u=X1.C()?new X1:new YH,new sj(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,d,p,y){const b=new bj(r,i,s,u,d,p);return y&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,De.Z)(function*(t){const r=et(t);$e("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield j_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YM(n,e,t){if(!t)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function EL(n,e,t,r){if(!0===e&&!0===r)throw new Ue(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IL(n){if(!Qe.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bL(n){if(Qe.isDocumentKey(n))throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xD(n);throw new Ue(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CL(n,e){if(e<=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const DL=new Map;class TL{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,EL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ZE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new YC;switch(t.type){case"gapi":return new JC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=DL.get(e);t&&($e("ComponentProvider","Removing Datastore"),DL.delete(e),t.terminate())}(this),Promise.resolve()}}class wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wr(this.firestore,e,this._key)}}class ls{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class Nu extends ls{constructor(e,t,r){super(e,t,x_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wr(this.firestore,null,new Qe(e))}withConverter(e){return new Nu(this.firestore,e,this._path)}}function AL(n,e,...t){if(n=(0,U.m9)(n),YM("collection","path",e),n instanceof ZE){const r=vn.fromString(e,...t);return bL(r),new Nu(n,null,r)}{if(!(n instanceof wr||n instanceof Nu))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vn.fromString(e,...t));return bL(r),new Nu(n.firestore,null,r)}}function MD(n,e,...t){if(n=(0,U.m9)(n),1===arguments.length&&(e=tD.R()),YM("doc","path",e),n instanceof ZE){const r=vn.fromString(e,...t);return IL(r),new wr(n,null,new Qe(r))}{if(!(n instanceof wr||n instanceof Nu))throw new Ue(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(vn.fromString(e,...t));return IL(r),new wr(n.firestore,n instanceof Nu?n.converter:null,new Qe(r))}}function RL(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),(n instanceof wr||n instanceof Nu)&&(e instanceof wr||e instanceof Nu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function QM(n,e){return n=(0,U.m9)(n),e=(0,U.m9)(e),n instanceof ls&&e instanceof ls&&n.firestore===e.firestore&&SE(n._query,e._query)&&n.converter===e.converter}function xL(n,e=10240){let t=0;return{read:()=>(0,De.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,De.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class PD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Wj{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new $r,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,De.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,De.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new vj(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,De.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,De.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,De.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class qj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,De.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,De.Z)(function*(s,u){const d=et(s),p=LE(d.It)+"/documents",y={documents:u.map(F=>OE(d.It,F))},b=yield d._o("BatchGetDocuments",p,y,u.length),T=new Map;b.forEach(F=>{const j=function z2(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=Mu(t,r.found.name),s=Pi(r.found.updateTime),u=new zt({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=Mu(t,r.missing),s=Pi(r.readTime);return Cn.newNoDocument(i,s)}(n,e):dt()}(d.It,F);T.set(j.key.toString(),j)});const x=[];return u.forEach(F=>{const j=T.get(F.toString());Lt(!!j),x.push(j)}),x}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new O_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,De.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Qe.fromPath(i);e.mutations.push(new Sx(s,e.precondition(s)))}),yield(r=(0,De.Z)(function*(i,s){const u=et(i),d=LE(u.It)+"/documents",p={writes:s.map(y=>FE(u.It,y))};yield u.ao("Commit",d,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ft.min())?Cr.exists(!1):Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new Ue(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Kj{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new Jx(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,De.Z)(function*(){const t=new qj(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!C_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!WO(t)}return!1}}class Zj{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Kn.UNAUTHENTICATED,this.clientId=tD.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,De.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>($e("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,De.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=G_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function ML(n,e){return JM.apply(this,arguments)}function JM(){return JM=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,De.Z)(function*(s){r.isEqual(s)||(yield W1(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),JM.apply(this,arguments)}function PL(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,De.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eP(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>aL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>aL(e.remoteStore,s)),n.onlineComponents=e}),XM.apply(this,arguments)}function eP(n){return tP.apply(this,arguments)}function tP(){return tP=(0,De.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield ML(n,new vL)),n.offlineComponents}),tP.apply(this,arguments)}function ND(n){return nP.apply(this,arguments)}function nP(){return nP=(0,De.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield PL(n,new ZM)),n.onlineComponents}),nP.apply(this,arguments)}function NL(n){return eP(n).then(e=>e.persistence)}function kD(n){return eP(n).then(e=>e.localStore)}function rP(n){return ND(n).then(e=>e.remoteStore)}function iP(n){return ND(n).then(e=>e.syncEngine)}function Z_(n){return sP.apply(this,arguments)}function sP(){return sP=(0,De.Z)(function*(n){const e=yield ND(n),t=e.eventManager;return t.onListen=Cj.bind(null,e.syncEngine),t.onUnlisten=Dj.bind(null,e.syncEngine),t}),sP.apply(this,arguments)}function OL(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,u,d,p){const y=new PD({next:T=>{s.enqueueAndForget(()=>wM(i,b));const x=T.docs.has(u);!x&&T.fromCache?p.reject(new Ue(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&d&&"server"===d.source?p.reject(new Ue(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),b=new bM(x_(u.path),y,{includeMetadataChanges:!0,Nu:!0});return yM(i,b)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}function LL(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function(i,s,u,d,p){const y=new PD({next:T=>{s.enqueueAndForget(()=>wM(i,b)),T.fromCache&&"server"===d.source?p.reject(new Ue(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),b=new bM(u,y,{includeMetadataChanges:!0,Nu:!0});return yM(i,b)}(yield Z_(n),n.asyncQueue,e,t,r)})),r.promise}class r${constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Jx(this,"async_queue_retry"),this.Wc=()=>{const t=SD();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=SD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=SD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new $r;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,De.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ru(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,kr("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=_M.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.qc.push(i),i}zc(){this.Kc&&dt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,De.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function oP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class i${constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Er extends ZE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new r$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||FL(this),this._firestoreClient.terminate()}}function Qr(n){return n._firestoreClient||FL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FL(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new IO(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new Zj(n._authCredentials,n._appCheckCredentials,n._queue,r)}function VL(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,De.Z)(function*(){try{yield ML(n,t),yield PL(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(u=s).name?u.code===ye.FAILED_PRECONDITION||u.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;Au("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function UL(n){if(n._initialized||n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ku{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ku(Yr.fromBase64String(e))}catch(t){throw new Ue(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ku(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lp{constructor(e){this._methodName=e}}class OD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const p$=/^__.*__$/;class g${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new zc(e,this.data,this.fieldMask,t,this.fieldTransforms):new k_(e,this.data,t,this.fieldTransforms)}}class BL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function HL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class LD{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new LD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return UD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(HL(this.sa)&&p$.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class m${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||zE(e)}da(e,t,r,i=!1){return new LD({sa:e,methodName:t,fa:r,path:Or.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Fp(n){const e=n._freezeSettings(),t=zE(n._databaseId);return new m$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FD(n,e,t,r,i,s={}){const u=n.da(s.merge||s.mergeFields?2:0,e,t,i);cP("Data must be an object, but it was:",u,r);const d=WL(r,u);let p,y;if(s.merge)p=new Ms(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const b=[];for(const T of s.mergeFields){const x=dP(e,T,t);if(!u.contains(x))throw new Ue(ye.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);zL(b,x)||b.push(x)}p=new Ms(b),y=u.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=u.fieldTransforms;return new g$(new zt(d),p,y)}class YE extends Lp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof YE}}function jL(n,e,t){return new LD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class aP extends Lp{_toFieldTransform(e){return new AE(e.path,new P_)}isEqual(e){return e instanceof aP}}class _$ extends Lp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=jL(this,e,!0),r=this._a.map(s=>Vp(s,t)),i=new Tp(r);return new AE(e.path,i)}isEqual(e){return this===e}}class y$ extends Lp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=jL(this,e,!0),r=this._a.map(s=>Vp(s,t)),i=new Sp(r);return new AE(e.path,i)}isEqual(e){return this===e}}class v$ extends Lp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new N_(e.It,NO(e.It,this.wa));return new AE(e.path,t)}isEqual(e){return this===e}}function lP(n,e,t,r){const i=n.da(1,e,t);cP("Data must be an object, but it was:",i,r);const s=[],u=zt.empty();Ll(r,(p,y)=>{const b=VD(e,p,t);y=(0,U.m9)(y);const T=i.ca(b);if(y instanceof YE)s.push(b);else{const x=Vp(y,T);null!=x&&(s.push(b),u.set(b,x))}});const d=new Ms(s);return new BL(u,d,i.fieldTransforms)}function uP(n,e,t,r,i,s){const u=n.da(1,e,t),d=[dP(e,r,t)],p=[i];if(s.length%2!=0)throw new Ue(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(dP(e,s[x])),p.push(s[x+1]);const y=[],b=zt.empty();for(let x=d.length-1;x>=0;--x)if(!zL(y,d[x])){const F=d[x];let j=p[x];j=(0,U.m9)(j);const ne=u.ca(F);if(j instanceof YE)y.push(F);else{const de=Vp(j,ne);null!=de&&(y.push(F),b.set(F,de))}}const T=new Ms(y);return new BL(b,T,u.fieldTransforms)}function $L(n,e,t,r=!1){return Vp(t,n.da(r?4:3,e))}function Vp(n,e){if(GL(n=(0,U.m9)(n)))return cP("Unsupported field value:",e,n),WL(n,e);if(n instanceof Lp)return function(t,r){if(!HL(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let d=Vp(u,r.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,U.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return NO(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=tr.fromDate(t);return{timestampValue:kE(r.It,i)}}if(t instanceof tr){const i=new tr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kE(r.It,i)}}if(t instanceof OD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ku)return{bytesValue:e1(r.It,t._byteString)};if(t instanceof wr){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ax(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${xD(t)}`)}(n,e)}function WL(n,e){const t={};return yx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ll(n,(r,i)=>{const s=Vp(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function GL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof tr||n instanceof OD||n instanceof ku||n instanceof wr||n instanceof Lp)}function cP(n,e,t){if(!GL(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=xD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function dP(n,e,t){if((e=(0,U.m9)(e))instanceof Zc)return e._internalPath;if("string"==typeof e)return VD(n,e);throw UD("Field path arguments must be of type string or ",n,!1,void 0,t)}const w$=new RegExp("[~\\*/\\[\\]]");function VD(n,e,t){if(e.search(w$)>=0)throw UD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zc(...e.split("."))._internalPath}catch{throw UD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function UD(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new Ue(ye.INVALID_ARGUMENT,d+n+p)}function zL(n,e){return n.some(t=>t.isEqual(e))}class QE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new E$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(BD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class E$ extends QE{data(){return super.data()}}function BD(n,e){return"string"==typeof e?VD(n,e):e instanceof Zc?e._internalPath:e._delegate._internalPath}function qL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JE{}function vh(n,...e){for(const t of e)n=t._apply(n);return n}class I$ extends JE{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Fp(e.firestore),r=function(i,s,u,d,p,y,b){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){XL(b,y);const F=[];for(const j of b)F.push(JL(d,i,j));T={arrayValue:{values:F}}}else T=JL(d,i,b)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||XL(b,y),T=$L(u,"where",b,"in"===y||"not-in"===y);const x=Gi.create(p,y,T);return function(F,j){if(j.dt()){const de=bx(F);if(null!==de&&!de.isEqual(j.field))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${de.toString()}' and '${j.field.toString()}'`);const qe=Ix(F);null!==qe&&eF(0,j.field,qe)}const ne=function(de,qe){for(const tt of de.filters)if(qe.indexOf(tt.op)>=0)return tt.op;return null}(F,function(de){switch(de){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ne)throw new Ue(ye.INVALID_ARGUMENT,ne===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ls(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new Gc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class C$ extends JE{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new R_(i,s);return function(d,p){if(null===Ix(d)){const y=bx(d);null!==y&&eF(0,y,p.field)}}(r,u),u}(e._query,this.ma,this.pa);return new ls(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Gc(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class KL extends JE{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ls(e.firestore,e.converter,lD(e._query,this.Ia,this.Ta))}}class ZL extends JE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=QL(e,this.type,this.Ea,this.Aa);return new ls(e.firestore,e.converter,(i=t,new Gc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class YL extends JE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=QL(e,this.type,this.Ea,this.Aa);return new ls(e.firestore,e.converter,(i=t,new Gc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function QL(n,e,t,r){if(t[0]=(0,U.m9)(t[0]),t[0]instanceof QE)return function(i,s,u,d,p){if(!d)throw new Ue(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const b of M_(i))if(b.field.isKeyField())y.push(R(s,d.key));else{const T=d.data.field(b.field);if(oD(T))throw new Ue(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=b.field.canonicalString();throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(T)}return new fh(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Fp(n.firestore);return function(s,u,d,p,y,b){const T=s.explicitOrderBy;if(y.length>T.length)throw new Ue(ye.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let F=0;F<y.length;F++){const j=y[F];if(T[F].field.isKeyField()){if("string"!=typeof j)throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!Cx(s)&&-1!==j.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const ne=s.path.child(vn.fromString(j));if(!Qe.isDocumentKey(ne))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const de=new Qe(ne);x.push(R(u,de))}else{const ne=$L(d,p,j);x.push(ne)}}return new fh(x,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function JL(n,e,t){if("string"==typeof(t=(0,U.m9)(t))){if(""===t)throw new Ue(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cx(e)&&-1!==t.indexOf("/"))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(vn.fromString(t));if(!Qe.isDocumentKey(r))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return R(n,new Qe(r))}if(t instanceof wr)return R(n,t._key);throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xD(t)}.`)}function XL(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(ye.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function eF(n,e,t){if(!t.isEqual(e))throw new Ue(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hP{convertValue(e,t="none"){switch(l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ch(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Ll(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new OD(Lr(e.latitude),Lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=aD(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(b_(e));default:return null}}convertTimestamp(e){const t=jc(e);return new tr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=vn.fromString(e);Lt(c1(r));const i=new $c(r.get(1),r.get(3)),s=new Qe(r.popFirst(5));return i.isEqual(t)||kr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function HD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class P$ extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}class Up{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yc extends QE{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new XE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(BD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class XE extends Yc{data(e={}){return super.data(e)}}class wh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Up(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new XE(this._firestore,this._userDataWriter,r.key,r,new Up(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new XE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Up(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new XE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Up(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:N$(u.type),doc:d,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function N$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function tF(n,e){return n instanceof Yc&&e instanceof Yc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wh&&e instanceof wh&&n._firestore===e._firestore&&QM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Eh extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new ku(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wr(this.firestore,null,t)}}function nF(n,e,t){n=_n(n,wr);const r=_n(n.firestore,Er),i=HD(n.converter,e,t);return Y_(r,[FD(Fp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Cr.none())])}function rF(n,e,t,...r){n=_n(n,wr);const i=_n(n.firestore,Er),s=Fp(i);let u;return u="string"==typeof(e=(0,U.m9)(e))||e instanceof Zc?uP(s,"updateDoc",n._key,e,t,r):lP(s,"updateDoc",n._key,e),Y_(i,[u.toMutation(n._key,Cr.exists(!0))])}function iF(n,...e){var t,r,i;n=(0,U.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||oP(e[u])||(s=e[u],u++);const d={includeMetadataChanges:s.includeMetadataChanges};if(oP(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let p,y,b;if(n instanceof wr)y=_n(n.firestore,Er),b=x_(n._key.path),p={next:T=>{e[u]&&e[u](fP(y,n,T))},error:e[u+1],complete:e[u+2]};else{const T=_n(n,ls);y=_n(T.firestore,Er),b=T._query;const x=new Eh(y);p={next:F=>{e[u]&&e[u](new wh(y,x,T,F))},error:e[u+1],complete:e[u+2]},qL(n._query)}return function(T,x,F,j){const ne=new PD(j),de=new bM(x,ne,F);return T.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return yM(yield Z_(T),de)})),()=>{ne.bc(),T.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return wM(yield Z_(T),de)}))}}(Qr(y),b,d,p)}function Y_(n,e){return function(t,r){const i=new $r;return t.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function Tj(n,e,t){return AM.apply(this,arguments)}(yield iP(t),r,i)})),i.promise}(Qr(n),e)}function fP(n,e,t){const r=t.docs.get(e._key),i=new Eh(n);return new Yc(n,i,e._key,r,new Up(t.hasPendingWrites,t.fromCache),e.converter)}const $$={maxAttempts:5};class sF{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fp(e)}set(e,t,r){this._verifyNotCommitted();const i=Ih(e,this._firestore),s=HD(i.converter,t,r),u=FD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ih(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof Zc?uP(this._dataReader,"WriteBatch.update",s._key,t,r,i):lP(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ih(e,this._firestore);return this._mutations=this._mutations.concat(new O_(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ih(n,e){if((n=(0,U.m9)(n)).firestore!==e)throw new Ue(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class W$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fp(e)}get(e){const t=Ih(e,this._firestore),r=new P$(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const s=i[0];if(s.isFoundDocument())return new QE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new QE(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=Ih(e,this._firestore),s=HD(i.converter,t,r),u=FD(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=Ih(e,this._firestore);let u;return u="string"==typeof(t=(0,U.m9)(t))||t instanceof Zc?uP(this._dataReader,"Transaction.update",s._key,t,r,i):lP(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=Ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ih(e,this._firestore),r=new Eh(this._firestore);return super.get(e).then(i=>new Yc(this._firestore,r,t._key,i._document,new Up(!1,!1),t.converter))}}!function(n,e=!0){lh=os.SDK_VERSION,(0,os._registerComponent)(new Lo.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new Er(new m_(t.getProvider("auth-internal")),new eD(t.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ue(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $c(d.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,os.registerVersion)(g_,"3.7.3",n),(0,os.registerVersion)(g_,"3.7.3","esm2017")}();class Q${constructor(e,t,r,i){this.from=e,this.to=t,this.content=r,this.timestamp=i}}var e0=V(4986);function pP(n,e=Gs.y){return n=n??J$,(0,Sn.e)((t,r)=>{let i,s=!0;t.subscribe((0,Hn.x)(r,u=>{const d=e(u);(s||!n(i,d))&&(s=!1,i=d,r.next(u))}))})}function J$(n,e){return n===e}var aF=V(5032);V(5881);var lF=V(3942);const uF="@firebase/database",cF="0.13.10";let gP="";function dF(n){gP=n}class tW{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,U.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,U.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class nW{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,U.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const hF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new tW(e)}}catch{}return new nW},Bp=hF("localStorage"),mP=hF("sessionStorage"),Q_=new Fo.Yd("@firebase/database"),fF=function(){let n=1;return function(){return n++}}(),pF=function(n){const e=(0,U.dS)(n),t=new U.gQ;t.update(e);const r=t.digest();return U.US.encodeByteArray(r)},t0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=t0.apply(null,r):e+="object"==typeof r?(0,U.Wl)(r):r,e+=" "}return e};let Hp=null,gF=!0;const mF=function(n,e){(0,U.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Q_.logLevel=Fo.in.VERBOSE,Hp=Q_.log.bind(Q_),e&&mP.set("logging_enabled",!0)):"function"==typeof n?Hp=n:(Hp=null,mP.remove("logging_enabled"))},Oi=function(...n){if(!0===gF&&(gF=!1,null===Hp&&!0===mP.get("logging_enabled")&&mF(!0)),Hp){const e=t0.apply(null,n);Hp(e)}},n0=function(n){return function(...e){Oi(n,...e)}},_P=function(...n){const e="FIREBASE INTERNAL ERROR: "+t0(...n);Q_.error(e)},Ou=function(...n){const e=`FIREBASE FATAL ERROR: ${t0(...n)}`;throw Q_.error(e),new Error(e)},us=function(...n){const e="FIREBASE WARNING: "+t0(...n);Q_.warn(e)},jD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Qc="[MIN_NAME]",Lu="[MAX_NAME]",jp=function(n,e){if(n===e)return 0;if(n===Qc||e===Lu)return-1;if(e===Qc||n===Lu)return 1;{const t=$D(n),r=$D(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},sW=function(n,e){return n===e?0:n<e?-1:1},r0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,U.Wl)(e))},yP=function(n){if("object"!=typeof n||null===n)return(0,U.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,U.Wl)(e[r]),t+=":",t+=yP(n[e[r]]);return t+="}",t},_F=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Li(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const yF=function(n){(0,U.hu)(!jD(n),"Invalid JSON number");const r=1023;let i,s,u,d,p;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const b=y.join("");let T="";for(p=0;p<64;p+=8){let x=parseInt(b.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},uW=new RegExp("^-?(0*)\\d{1,10}$"),vF=-2147483648,vP=2147483647,$D=function(n){if(uW.test(n)){const e=Number(n);if(e>=vF&&e<=vP)return e}return null},J_=function(n){try{n()}catch(e){setTimeout(()=>{throw us("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},s0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class dW{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class hW{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Oi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',us(e)}}let o0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const CF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,SF="websocket",AF="long_polling";class EP{constructor(e,t,r,i,s=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function RF(n,e,t){let r;if((0,U.hu)("string"==typeof e,"typeof type must == string"),(0,U.hu)("object"==typeof t,"typeof params must == object"),e===SF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==AF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function fW(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Li(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class pW{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,U.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,U.p$)(this.counters_)}}const IP={},bP={};function CP(n){const e=n.toString();return IP[e]||(IP[e]=new pW),IP[e]}class mW{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&J_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class bh{constructor(e,t,r,i,s,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=n0(e),this.stats_=CP(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),RF(t,AF,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new mW(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,U.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new DP((...s)=>{const[u,d,p,y,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&CF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bh.forceAllow_=!0}static forceDisallow(){bh.forceDisallow_=!0}static isAvailable(){return!((0,U.Yr)()||!bh.forceAllow_&&(bh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,U.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,U.h$)(t),i=_F(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,U.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,U.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class DP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,U.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=fF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=DP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){Oi("frame writing exception"),d.stack&&Oi(d.stack),Oi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Oi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,U.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Oi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let GD=null;typeof MozWebSocket<"u"?GD=MozWebSocket:typeof WebSocket<"u"&&(GD=WebSocket);let X_=(()=>{class n{constructor(t,r,i,s,u,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=n0(this.connId),this.stats_=CP(r),this.connURL=n.connectionURL_(r,d,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const d={v:"5"};return!(0,U.Yr)()&&typeof location<"u"&&location.hostname&&CF.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),s&&(d.ac=s),u&&(d.p=u),RF(t,SF,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bp.set("previous_websocket_failure",!0);try{let i;if((0,U.Yr)()){i={headers:{"User-Agent":`Firebase/5/${gP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new GD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==GD&&!n.forceDisallow_}static previouslyFailed(){return Bp.isInMemoryStorage||!0===Bp.get("previous_websocket_failure")}markConnectionHealthy(){Bp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,U.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,U.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,U.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=_F(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),LF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[bh,X_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=X_&&X_.isAvailable();let i=r&&!X_.previouslyFailed();if(t.webSocketOnly&&(r||us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[X_];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class $F{constructor(e,t,r,i,s,u,d,p,y,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=n0("c:"+this.id+":"),this.transportManager_=new LF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=s0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=r0("t",e),r=r0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=r0("t",e),r=r0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=r0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?_P("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_P("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),s0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):s0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class WF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class GF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,U.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,U.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class zD extends GF{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,U.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zD}getInitialEvent(e){return(0,U.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class $n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new $n("")}function un(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ch(n){return n.pieces_.length-n.pieceNum_}function rr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new $n(n.pieces_,e)}function SP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function a0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function KF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new $n(e,0)}function Dr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof $n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new $n(t,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function ks(n,e){const t=un(n),r=un(e);if(null===t)return e;if(t===r)return ks(rr(n),rr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function VW(n,e){const t=a0(n,0),r=a0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=jp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function AP(n,e){if(Ch(n)!==Ch(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Va(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ch(n)>Ch(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class UW{constructor(e,t){this.errorPrefix_=t,this.parts_=a0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,U.ug)(this.parts_[r]);ZF(this)}}function ZF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$p(n))}function $p(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class RP extends GF{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new RP}getInitialEvent(e){return(0,U.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const l0=1e3;let KD,Wp=(()=>{class n extends WF{constructor(t,r,i,s,u,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=n0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=l0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,U.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&zD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,U.Wl)(u)),(0,U.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new U.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,U.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,b=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(i,s),t.onComplete&&t.onComplete(b,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,U.r3)(t,"w")){const i=(0,U.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,U.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,U.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,d=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,U.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,U.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):_P("Unrecognized action received from server: "+(0,U.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,U.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=l0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=l0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=l0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,De.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const b=function(){y?y.close():(p=!0,s())};t.realtime_={close:b,sendRequest:function(F){(0,U.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(F)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,j]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?Oi("getToken() completed but was canceled"):(Oi("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=j&&j.token,y=new $F(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,ne=>{us(ne+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(F){t.log_("Failed to get token: "+F),p||(t.repoInfo_.nodeAdmin&&us(F),b())}}})()}interrupt(t){Oi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Oi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,U.xb)(this.interruptReasons_)&&(this.reconnectDelay_=l0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>yP(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new $n(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Oi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Oi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,U.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+gP.replace(/\./g,"-")]=1,(0,U.uI)()?t["framework.cordova"]=1:(0,U.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=zD.getInstance().currentlyOnline();return(0,U.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class fn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new fn(e,t)}}class qD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new fn(Qc,e),i=new fn(Qc,t);return 0!==this.compare(r,i)}minPost(){return fn.MIN}}class JF extends qD{static get __EMPTY_NODE(){return KD}static set __EMPTY_NODE(e){KD=e}compare(e,t){return jp(e.name,t.name)}isDefinedOn(e){throw(0,U.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return fn.MIN}maxPost(){return new fn(Lu,KD)}makePost(e,t){return(0,U.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new fn(e,KD)}toString(){return".key"}}const Fu=new JF;class ZD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let MP,Vl=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??oo.EMPTY_NODE,this.right=u??oo.EMPTY_NODE}copy(t,r,i,s,u){return new n(t??this.key,r??this.value,i??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return oo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return oo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class oo{constructor(e,t=oo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new oo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Vl.BLACK,null,null))}remove(e){return new oo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ZD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ZD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ZD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ZD(this.root_,null,this.comparator_,!0,e)}}function qW(n,e){return jp(n.name,e.name)}function xP(n,e){return jp(n,e)}oo.EMPTY_NODE=new class zW{copy(e,t,r,i,s){return this}insert(e,t,r){return new Vl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const XF=function(n){return"number"==typeof n?"number:"+yF(n):"string:"+n},eV=function(n){if(n.isLeafNode()){const e=n.val();(0,U.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,U.r3)(e,".sv"),"Priority must be a string or number.")}else(0,U.hu)(n===MP||n.isEmpty(),"priority of unexpected type.");(0,U.hu)(n===MP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let tV,nV,rV,ey=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,U.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),eV(this.priorityNode_)}static set __childrenNodeConstructor(t){tV=t}static get __childrenNodeConstructor(){return tV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return cn(t)?this:".priority"===un(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=un(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,U.hu)(".priority"!==i||1===Ch(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(rr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+XF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?yF(this.value_):this.value_,this.lazyHash_=pF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,U.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,U.hu)(s>=0,"Unknown leaf type: "+r),(0,U.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ur=new class QW extends qD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?jp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return fn.MIN}maxPost(){return new fn(Lu,new ey("[PRIORITY-POST]",rV))}makePost(e,t){const r=nV(e);return new fn(t,new ey("[PRIORITY-POST]",r))}toString(){return".priority"}},JW=Math.log(2);class XW{constructor(e){this.count=parseInt(Math.log(e+1)/JW,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const YD=function(n,e,t,r){n.sort(e);const i=function(p,y){const b=y-p;let T,x;if(0===b)return null;if(1===b)return T=n[p],x=t?t(T):T,new Vl(x,T.node,Vl.BLACK,null,null);{const F=parseInt(b/2,10)+p,j=i(p,F),ne=i(F+1,y);return T=n[F],x=t?t(T):T,new Vl(x,T.node,Vl.BLACK,j,ne)}},d=function(p){let y=null,b=null,T=n.length;const x=function(j,ne){const de=T-j,qe=T;T-=j;const tt=i(de+1,qe),ct=n[de],ht=t?t(ct):ct;F(new Vl(ht,ct.node,ne,null,tt))},F=function(j){y?(y.left=j,y=j):(b=j,y=j)};for(let j=0;j<p.count;++j){const ne=p.nextBitIsOne(),de=Math.pow(2,p.count-(j+1));ne?x(de,Vl.BLACK):(x(de,Vl.BLACK),x(de,Vl.RED))}return b}(new XW(n.length));return new oo(r||e,d)};let PP;const ty={};class Jc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,U.hu)(ty&&ur,"ChildrenNode.ts has not been loaded"),PP=PP||new Jc({".priority":ty},{".priority":ur}),PP}get(e){const t=(0,U.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof oo?t:null}hasIndex(e){return(0,U.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,U.hu)(e!==Fu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(fn.Wrap);let d,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();d=i?YD(r,e.getCompare()):ty;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const b=Object.assign({},this.indexes_);return b[p]=d,new Jc(b,y)}addToIndexes(e,t){const r=(0,U.UI)(this.indexes_,(i,s)=>{const u=(0,U.DV)(this.indexSet_,s);if((0,U.hu)(u,"Missing index implementation for "+s),i===ty){if(u.isDefinedOn(e.node)){const d=[],p=t.getIterator(fn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),YD(d,u.getCompare())}return ty}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new fn(e.name,d))),p.insert(e,e.node)}});return new Jc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,U.UI)(this.indexes_,i=>{if(i===ty)return i;{const s=t.get(e.name);return s?i.remove(new fn(e.name,s)):i}});return new Jc(r,this.indexSet_)}}let u0,tn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&eV(this.priorityNode_),this.children_.isEmpty()&&(0,U.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return u0||(u0=new n(new oo(xP),null,Jc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||u0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?u0:r}}getChild(t){const r=un(t);return null===r?this:this.getImmediateChild(r).getChild(rr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,U.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new fn(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?u0:this.priorityNode_;return new n(s,d,u)}}updateChild(t,r){const i=un(t);if(null===i)return r;{(0,U.hu)(".priority"!==un(t)||1===Ch(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(rr(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(ur,(d,p)=>{r[d]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):u=!1}),!t&&u&&s<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+XF(this.getPriority().val())+":"),this.forEachChild(ur,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":pF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new fn(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new fn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new fn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,fn.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,fn.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===c0?-1:0}withIndex(t){if(t===Fu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ur),s=r.getIterator(ur);let u=i.getNext(),d=s.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=s.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Fu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const c0=new class eG extends tn{constructor(){super(new oo(xP),tn.EMPTY_NODE,Jc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tn.EMPTY_NODE}isEmpty(){return!1}};function Fr(n,e=null){if(null===n)return tn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,U.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ey(n,Fr(e));if(n instanceof Array){let t=tn.EMPTY_NODE;return Li(n,(r,i)=>{if((0,U.r3)(n,r)&&"."!==r.substring(0,1)){const s=Fr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Fr(e))}{const t=[];let r=!1;if(Li(n,(u,d)=>{if("."!==u.substring(0,1)){const p=Fr(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new fn(u,p)))}}),0===t.length)return tn.EMPTY_NODE;const s=YD(t,qW,u=>u.name,xP);if(r){const u=YD(t,ur.getCompare());return new tn(s,Fr(e),new Jc({".priority":u},{".priority":ur}))}return new tn(s,Fr(e),Jc.Default)}}Object.defineProperties(fn,{MIN:{value:new fn(Qc,tn.EMPTY_NODE)},MAX:{value:new fn(Lu,c0)}}),JF.__EMPTY_NODE=tn.EMPTY_NODE,ey.__childrenNodeConstructor=tn,function KW(n){MP=n}(c0),function YW(n){rV=n}(c0),function ZW(n){nV=n}(Fr);class NP extends qD{constructor(e){super(),this.indexPath_=e,(0,U.hu)(!cn(e)&&".priority"!==un(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?jp(e.name,t.name):s}makePost(e,t){const r=Fr(e),i=tn.EMPTY_NODE.updateChild(this.indexPath_,r);return new fn(t,i)}maxPost(){const e=tn.EMPTY_NODE.updateChild(this.indexPath_,c0);return new fn(Lu,e)}toString(){return a0(this.indexPath_,0).join("/")}}const kP=new class nG extends qD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?jp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return fn.MIN}maxPost(){return fn.MAX}makePost(e,t){const r=Fr(e);return new fn(t,r)}toString(){return".value"}},ny="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",rG=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=ny.charAt(t%64),t=Math.floor(t/64);(0,U.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=ny.charAt(e[i]);return(0,U.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),oV=function(n){if(n===""+vP)return"-";const e=$D(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Lu;const s=ny.charAt(ny.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},aV=function(n){if(n===""+vF)return Qc;const e=$D(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+vP:(delete t[t.length-1],t.join("")):(t[t.length-1]=ny.charAt(ny.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function lV(n){return{type:"value",snapshotNode:n}}function ry(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function d0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function h0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class LP{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,U.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(d0(t,d)):(0,U.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(ry(t,r)):u.trackChildChange(h0(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ur,(i,s)=>{t.hasChild(i)||r.trackChildChange(d0(i,s))}),t.isLeafNode()||t.forEachChild(ur,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(h0(i,s,u))}else r.trackChildChange(ry(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?tn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class f0{constructor(e){this.indexedFilter_=new LP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=f0.getStartPost_(e),this.endPost_=f0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new fn(t,r))||(r=tn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=tn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(tn.EMPTY_NODE);const s=this;return t.forEachChild(ur,(u,d)=>{s.matches(new fn(u,d))||(i=i.updateImmediateChild(u,tn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class sG{constructor(e){this.rangedFilter_=new f0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new fn(t,r))||(r=tn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=tn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=tn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let s,u,d,p;if(i=t.withIndex(this.index_),i=i.updatePriority(tn.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();d=(x,F)=>T(F,x)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,b=!1;for(;p.hasNext();){const T=p.getNext();!b&&d(s,T)<=0&&(b=!0),b&&y<this.limit_&&d(T,u)<=0?y++:i=i.updateImmediateChild(T.name,tn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const T=this.index_.getCompare();u=(x,F)=>T(F,x)}else u=this.index_.getCompare();const d=e;(0,U.hu)(d.numChildren()===this.limit_,"");const p=new fn(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(p);if(d.hasChild(t)){const T=d.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const F=null==x?1:u(x,p);if(b&&!r.isEmpty()&&F>=0)return s?.trackChildChange(h0(t,r,T)),d.updateImmediateChild(t,r);{s?.trackChildChange(d0(t,T));const ne=d.updateImmediateChild(t,tn.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(s?.trackChildChange(ry(x.name,x.node)),ne.updateImmediateChild(x.name,x.node)):ne}}return r.isEmpty()?e:b&&u(y,p)>=0?(null!=s&&(s.trackChildChange(d0(y.name,y.node)),s.trackChildChange(ry(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,tn.EMPTY_NODE)):e}}class QD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,U.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,U.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,U.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){const e=new QD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function FP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function VP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function JD(n,e){const t=n.copy();return t.index_=e,t}function uV(n){const e={};if(n.isDefault())return e;let t;return n.index_===ur?t="$priority":n.index_===kP?t="$value":n.index_===Fu?t="$key":((0,U.hu)(n.index_ instanceof NP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,U.Wl)(t),n.startSet_&&(e.startAt=(0,U.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,U.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,U.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,U.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function cV(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ur&&(e.i=n.index_.toString()),e}class XD extends WF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=n0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,U.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=XD.getListenId_(e,r),d={};this.listens_[u]=d;const p=uV(e._queryParams);this.restRequest_(s+".json",p,(y,b)=>{let T=b;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(s,T,!1,r),(0,U.DV)(this.listens_,u)===d){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(x,null)}})}unlisten(e,t){const r=XD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=uV(e._queryParams),r=e._path.toString(),i=new U.BH;return this.restRequest_(r+".json",t,(s,u)=>{let d=u;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,U.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,U.cI)(d.responseText)}catch{us("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&us("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class dG{constructor(){this.rootNode_=tn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function eT(){return{value:null,children:new Map}}function iy(n,e,t){if(cn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=un(e);n.children.has(r)||n.children.set(r,eT()),iy(n.children.get(r),e=rr(e),t)}}function UP(n,e){if(cn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ur,(r,i)=>{iy(n,new $n(r),i)}),UP(n,e)}}if(n.children.size>0){const t=un(e);return e=rr(e),n.children.has(t)&&UP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function BP(n,e,t){null!==n.value?t(e,n.value):function hG(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{BP(i,new $n(e.toString()+"/"+r),t)})}class fG{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Li(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class mG{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new fG(e);const r=1e4+2e4*Math.random();s0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Li(e,(i,s)=>{s>0&&(0,U.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),s0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ua=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ua||(Ua={})),Ua))();function $P(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class tT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ua.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,U.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $n(e));return new tT(Nn(),t,this.revert)}}return(0,U.hu)(un(this.path)===e,"operationForChild called for unrelated child."),new tT(rr(this.path),this.affectedTree,this.revert)}}class p0{constructor(e,t){this.source=e,this.path=t,this.type=Ua.LISTEN_COMPLETE}operationForChild(e){return cn(this.path)?new p0(this.source,Nn()):new p0(this.source,rr(this.path))}}class Gp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ua.OVERWRITE}operationForChild(e){return cn(this.path)?new Gp(this.source,Nn(),this.snap.getImmediateChild(e)):new Gp(this.source,rr(this.path),this.snap)}}class sy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ua.MERGE}operationForChild(e){if(cn(this.path)){const t=this.children.subtree(new $n(e));return t.isEmpty()?null:t.value?new Gp(this.source,Nn(),t.value):new sy(this.source,Nn(),t)}return(0,U.hu)(un(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new sy(this.source,rr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Dh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cn(e))return this.isFullyInitialized()&&!this.filtered_;const t=un(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class _G{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function g0(n,e,t,r,i,s){const u=r.filter(d=>d.type===t);u.sort((d,p)=>function wG(n,e,t){if(null==e.childName||null==t.childName)throw(0,U.g5)("Should only compare child_ events.");const r=new fn(e.childName,e.snapshotNode),i=new fn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),u.forEach(d=>{const p=function vG(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function nT(n,e){return{eventCache:n,serverCache:e}}function m0(n,e,t,r){return nT(new Dh(e,t,r),n.serverCache)}function hV(n,e,t,r){return nT(n.eventCache,new Dh(e,t,r))}function rT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function zp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let WP;class cr{constructor(e,t=(()=>(WP||(WP=new oo(sW)),WP))()){this.value=e,this.children=t}static fromObject(e){let t=new cr(null);return Li(e,(r,i)=>{t=t.set(new $n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(cn(e))return null;{const r=un(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(rr(e),t);return null!=s?{path:Dr(new $n(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(cn(e))return this;{const t=un(e),r=this.children.get(t);return null!==r?r.subtree(rr(e)):new cr(null)}}set(e,t){if(cn(e))return new cr(t,this.children);{const r=un(e),s=(this.children.get(r)||new cr(null)).set(rr(e),t),u=this.children.insert(r,s);return new cr(this.value,u)}}remove(e){if(cn(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=un(e),r=this.children.get(t);if(r){const i=r.remove(rr(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new cr(null):new cr(this.value,s)}return this}}get(e){if(cn(e))return this.value;{const t=un(e),r=this.children.get(t);return r?r.get(rr(e)):null}}setTree(e,t){if(cn(e))return t;{const r=un(e),s=(this.children.get(r)||new cr(null)).setTree(rr(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new cr(this.value,u)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Dr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(cn(e))return null;{const s=un(e),u=this.children.get(s);return u?u.findOnPath_(rr(e),Dr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,r){if(cn(e))return this;{this.value&&r(t,this.value);const i=un(e),s=this.children.get(i);return s?s.foreachOnPath_(rr(e),Dr(t,i),r):new cr(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Dr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ul{constructor(e){this.writeTree_=e}static empty(){return new Ul(new cr(null))}}function _0(n,e,t){if(cn(e))return new Ul(new cr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=ks(i,e);return s=s.updateChild(u,t),new Ul(n.writeTree_.set(i,s))}{const i=new cr(t),s=n.writeTree_.setTree(e,i);return new Ul(s)}}}function GP(n,e,t){let r=n;return Li(t,(i,s)=>{r=_0(r,Dr(e,i),s)}),r}function fV(n,e){if(cn(e))return Ul.empty();{const t=n.writeTree_.setTree(e,new cr(null));return new Ul(t)}}function zP(n,e){return null!=qp(n,e)}function qp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ks(t.path,e)):null}function pV(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ur,(r,i)=>{e.push(new fn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new fn(r,i.value))}),e}function Th(n,e){if(cn(e))return n;{const t=qp(n,e);return new Ul(null!=t?new cr(t):n.writeTree_.subtree(e))}}function qP(n){return n.writeTree_.isEmpty()}function oy(n,e){return gV(Nn(),n.writeTree_,e)}function gV(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,U.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=gV(Dr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Dr(n,".priority"),r)),t}}function iT(n,e){return wV(e,n)}function TG(n,e){if(n.snap)return Va(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Va(Dr(n.path,t),e))return!0;return!1}function AG(n){return n.visible}function mV(n,e,t){let r=Ul.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let d;if(s.snap)Va(t,u)?(d=ks(t,u),r=_0(r,d,s.snap)):Va(u,t)&&(d=ks(u,t),r=_0(r,Nn(),s.snap.getChild(d)));else{if(!s.children)throw(0,U.g5)("WriteRecord should have .snap or .children");if(Va(t,u))d=ks(t,u),r=GP(r,d,s.children);else if(Va(u,t))if(d=ks(u,t),cn(d))r=GP(r,Nn(),s.children);else{const p=(0,U.DV)(s.children,un(d));if(p){const y=p.getChild(rr(d));r=_0(r,Nn(),y)}}}}}return r}function _V(n,e,t,r,i){if(r||i){const s=Th(n.visibleWrites,e);return!i&&qP(s)?t:i||null!=t||zP(s,Nn())?oy(mV(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Va(y.path,e)||Va(e,y.path))},e),t||tn.EMPTY_NODE):null}{const s=qp(n.visibleWrites,e);if(null!=s)return s;{const u=Th(n.visibleWrites,e);return qP(u)?t:null!=t||zP(u,Nn())?oy(u,t||tn.EMPTY_NODE):null}}}function sT(n,e,t,r){return _V(n.writeTree,n.treePath,e,t,r)}function KP(n,e){return function RG(n,e,t){let r=tn.EMPTY_NODE;const i=qp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ur,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=Th(n.visibleWrites,e);return t.forEachChild(ur,(u,d)=>{const p=oy(Th(s,new $n(u)),d);r=r.updateImmediateChild(u,p)}),pV(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return pV(Th(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function yV(n,e,t,r){return function xG(n,e,t,r,i){(0,U.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Dr(e,t);if(zP(n.visibleWrites,s))return null;{const u=Th(n.visibleWrites,s);return qP(u)?i.getChild(t):oy(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function oT(n,e){return function PG(n,e){return qp(n.visibleWrites,e)}(n.writeTree,Dr(n.treePath,e))}function ZP(n,e,t){return function MG(n,e,t,r){const i=Dr(e,t),s=qp(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?oy(Th(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function vV(n,e){return wV(Dr(n.treePath,e),n.writeTree)}function wV(n,e){return{treePath:n,writeTree:e}}class LG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,U.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,U.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,h0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,d0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,ry(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,U.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,h0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const EV=new class FG{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class YP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Dh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ZP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zp(this.viewCache_),s=function OG(n,e,t,r,i,s){return function NG(n,e,t,r,i,s,u){let d;const p=Th(n.visibleWrites,e),y=qp(p,Nn());if(null!=y)d=y;else{if(null==t)return[];d=oy(p,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const b=[],T=u.getCompare(),x=s?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let F=x.getNext();for(;F&&b.length<i;)0!==T(F,r)&&b.push(F),F=x.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function IV(n,e,t,r,i,s){const u=e.eventCache;if(null!=oT(r,t))return e;{let d,p;if(cn(t))if((0,U.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=zp(e),T=KP(r,y instanceof tn?y:tn.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,s)}else{const y=sT(r,zp(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=un(t);if(".priority"===y){(0,U.hu)(1===Ch(t),"Can't have a priority with additional path components");const b=u.getNode();p=e.serverCache.getNode();const T=yV(r,t,b,p);d=null!=T?n.filter.updatePriority(b,T):u.getNode()}else{const b=rr(t);let T;if(u.isCompleteForChild(y)){p=e.serverCache.getNode();const x=yV(r,t,u.getNode(),p);T=null!=x?u.getNode().getImmediateChild(y).updateChild(b,x):u.getNode().getImmediateChild(y)}else T=ZP(r,y,e.serverCache);d=null!=T?n.filter.updateChild(u.getNode(),y,T,b,i,s):u.getNode()}}return m0(e,d,u.isFullyInitialized()||cn(t),n.filter.filtersNodes())}}function aT(n,e,t,r,i,s,u,d){const p=e.serverCache;let y;const b=u?n.filter:n.filter.getIndexedFilter();if(cn(t))y=b.updateFullNode(p.getNode(),r,null);else if(b.filtersNodes()&&!p.isFiltered()){const F=p.getNode().updateChild(t,r);y=b.updateFullNode(p.getNode(),F,null)}else{const F=un(t);if(!p.isCompleteForPath(t)&&Ch(t)>1)return e;const j=rr(t),de=p.getNode().getImmediateChild(F).updateChild(j,r);y=".priority"===F?b.updatePriority(p.getNode(),de):b.updateChild(p.getNode(),F,de,j,EV,null)}const T=hV(e,y,p.isFullyInitialized()||cn(t),b.filtersNodes());return IV(n,T,t,i,new YP(i,T,s),d)}function QP(n,e,t,r,i,s,u){const d=e.eventCache;let p,y;const b=new YP(i,e,s);if(cn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=m0(e,y,!0,n.filter.filtersNodes());else{const T=un(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=m0(e,y,d.isFullyInitialized(),d.isFiltered());else{const x=rr(t),F=d.getNode().getImmediateChild(T);let j;if(cn(x))j=r;else{const ne=b.getCompleteChild(T);j=null!=ne?".priority"===SP(x)&&ne.getChild(KF(x)).isEmpty()?ne:ne.updateChild(x,r):tn.EMPTY_NODE}p=F.equals(j)?e:m0(e,n.filter.updateChild(d.getNode(),T,j,x,b,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function bV(n,e){return n.eventCache.isCompleteForChild(e)}function CV(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function JP(n,e,t,r,i,s,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=cn(t)?r:new cr(null).setTree(t,r);const b=e.serverCache.getNode();return y.children.inorderTraversal((T,x)=>{if(b.hasChild(T)){const j=CV(0,e.serverCache.getNode().getImmediateChild(T),x);p=aT(n,p,new $n(T),j,i,s,u,d)}}),y.children.inorderTraversal((T,x)=>{const F=!e.serverCache.isCompleteForChild(T)&&null===x.value;if(!b.hasChild(T)&&!F){const ne=CV(0,e.serverCache.getNode().getImmediateChild(T),x);p=aT(n,p,new $n(T),ne,i,s,u,d)}}),p}class zG{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new LP(r.getIndex()),s=function oG(n){return n.loadsAllData()?new LP(n.getIndex()):n.hasLimit()?new sG(n):new f0(n)}(r);this.processor_=function VG(n){return{filter:n}}(s);const u=t.serverCache,d=t.eventCache,p=i.updateFullNode(tn.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(tn.EMPTY_NODE,d.getNode(),null),b=new Dh(p,u.isFullyInitialized(),i.filtersNodes()),T=new Dh(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=nT(T,b),this.eventGenerator_=new _G(this.query_)}get query(){return this.query_}}function ZG(n,e){const t=zp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!cn(e)&&!t.getImmediateChild(un(e)).isEmpty())?t.getChild(e):null}function DV(n){return 0===n.eventRegistrations_.length}function TV(n,e,t){const r=[];if(t){(0,U.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function SV(n,e,t,r){e.type===Ua.MERGE&&null!==e.source.queryId&&((0,U.hu)(zp(n.viewCache_),"We should always have a full cache before handling merges"),(0,U.hu)(rT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function BG(n,e,t,r,i){const s=new LG;let u,d;if(t.type===Ua.OVERWRITE){const y=t;y.source.fromUser?u=QP(n,e,y.path,y.snap,r,i,s):((0,U.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!cn(y.path),u=aT(n,e,y.path,y.snap,r,i,d,s))}else if(t.type===Ua.MERGE){const y=t;y.source.fromUser?u=function jG(n,e,t,r,i,s,u){let d=e;return r.foreach((p,y)=>{const b=Dr(t,p);bV(e,un(b))&&(d=QP(n,d,b,y,i,s,u))}),r.foreach((p,y)=>{const b=Dr(t,p);bV(e,un(b))||(d=QP(n,d,b,y,i,s,u))}),d}(n,e,y.path,y.children,r,i,s):((0,U.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),u=JP(n,e,y.path,y.children,r,i,d,s))}else if(t.type===Ua.ACK_USER_WRITE){const y=t;u=y.revert?function GG(n,e,t,r,i,s){let u;if(null!=oT(r,t))return e;{const d=new YP(r,e,i),p=e.eventCache.getNode();let y;if(cn(t)||".priority"===un(t)){let b;if(e.serverCache.isFullyInitialized())b=sT(r,zp(e));else{const T=e.serverCache.getNode();(0,U.hu)(T instanceof tn,"serverChildren would be complete if leaf node"),b=KP(r,T)}y=n.filter.updateFullNode(p,b,s)}else{const b=un(t);let T=ZP(r,b,e.serverCache);null==T&&e.serverCache.isCompleteForChild(b)&&(T=p.getImmediateChild(b)),y=null!=T?n.filter.updateChild(p,b,T,rr(t),d,s):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,tn.EMPTY_NODE,rr(t),d,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=sT(r,zp(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=oT(r,Nn()),m0(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function $G(n,e,t,r,i,s,u){if(null!=oT(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(cn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return aT(n,e,t,p.getNode().getChild(t),i,s,d,u);if(cn(t)){let y=new cr(null);return p.getNode().forEachChild(Fu,(b,T)=>{y=y.set(new $n(b),T)}),JP(n,e,t,y,i,s,d,u)}return e}{let y=new cr(null);return r.foreach((b,T)=>{const x=Dr(t,b);p.isCompleteForPath(x)&&(y=y.set(b,p.getNode().getChild(x)))}),JP(n,e,t,y,i,s,d,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Ua.LISTEN_COMPLETE)throw(0,U.g5)("Unknown operation type: "+t.type);u=function WG(n,e,t,r,i){const s=e.serverCache;return IV(n,hV(e,s.getNode(),s.isFullyInitialized()||cn(t),s.isFiltered()),t,r,EV,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function HG(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=rT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(lV(rT(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function UG(n,e){(0,U.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,U.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,U.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,AV(n,s.changes,s.viewCache.eventCache.getNode(),null)}function AV(n,e,t,r){return function yG(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function iG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),g0(n,i,"child_removed",e,r,t),g0(n,i,"child_added",e,r,t),g0(n,i,"child_moved",s,r,t),g0(n,i,"child_changed",e,r,t),g0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let lT,cT;class RV{constructor(){this.views=new Map}}function XP(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,U.hu)(null!=s,"SyncTree gave us an op for an invalid query."),SV(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(SV(u,e,t,r));return s}}function xV(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=sT(t,i?r:null),p=!1;d?p=!0:r instanceof tn?(d=KP(t,r),p=!1):(d=tn.EMPTY_NODE,p=!1);const y=nT(new Dh(d,p,!1),new Dh(r,i,!1));return new zG(e,y)}return u}function MV(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Sh(n,e){let t=null;for(const r of n.views.values())t=t||ZG(r,e);return t}function PV(n,e){return e._queryParams.loadsAllData()?uT(n):n.views.get(e._queryIdentifier)}function NV(n,e){return null!=PV(n,e)}function Ah(n){return null!=uT(n)}function uT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let sz=1;class kV{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_=function kG(){return{visibleWrites:Ul.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eN(n,e,t,r,i){return function IG(n,e,t,r,i){(0,U.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=_0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ay(n,new Gp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Rh(n,e,t=!1){const r=function CG(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function DG(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,U.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&TG(d,r.path)?i=!1:Va(r.path,d.path)&&(s=!0)),u--}return!!i&&(s?(function SG(n){n.visibleWrites=mV(n.allWrites,AG,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=fV(n.visibleWrites,r.path):Li(r.children,p=>{n.visibleWrites=fV(n.visibleWrites,Dr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new cr(null);return null!=r.snap?s=s.set(Nn(),!0):Li(r.children,u=>{s=s.set(new $n(u),!0)}),ay(n,new tT(r.path,s,t))}return[]}function y0(n,e,t){return ay(n,new Gp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function dT(n,e,t,r,i=!1){const s=e._path,u=n.syncPointTree_.get(s);let d=[];if(u&&("default"===e._queryIdentifier||NV(u,e))){const p=function nz(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const d=Ah(n);if("default"===i)for(const[p,y]of n.views.entries())u=u.concat(TV(y,t,r)),DV(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(u=u.concat(TV(p,t,r)),DV(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!Ah(n)&&s.push(new(function XG(){return(0,U.hu)(lT,"Reference.ts has not been loaded"),lT}())(e._repo,e._path)),{removed:s,events:u}}(u,e,t,r);(function ez(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=p.removed;if(d=p.events,!i){const b=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(s,(x,F)=>Ah(F));if(b&&!T){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const F=function hz(n){return n.fold((e,t,r)=>{if(t&&Ah(t))return[uT(t)];{let i=[];return t&&(i=MV(t)),Li(r,(s,u)=>{i=i.concat(u)}),i}})}(x);for(let j=0;j<F.length;++j){const ne=F[j],de=ne.query,qe=VV(n,ne);n.listenProvider_.startListening(w0(de),v0(n,de),qe.hashFn,qe.onComplete)}}}!T&&y.length>0&&!r&&(b?n.listenProvider_.stopListening(w0(e),null):y.forEach(x=>{const F=n.queryToTagMap.get(fT(x));n.listenProvider_.stopListening(w0(x),F)}))}!function fz(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=fT(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function OV(n,e,t,r){const i=nN(n,r);if(null!=i){const s=rN(i),u=s.path,d=s.queryId,p=ks(u,e);return iN(n,u,new Gp($P(d),p,t))}return[]}function tN(n,e,t,r=!1){const i=e._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(i,(x,F)=>{const j=ks(x,i);s=s||Sh(F,j),u=u||Ah(F)});let p,d=n.syncPointTree_.get(i);d?(u=u||Ah(d),s=s||Sh(d,Nn())):(d=new RV,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=s?p=!0:(p=!1,s=tn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,j)=>{const ne=Sh(j,Nn());ne&&(s=s.updateImmediateChild(F,ne))}));const y=NV(d,e);if(!y&&!e._queryParams.loadsAllData()){const x=fT(e);(0,U.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const F=function pz(){return sz++}();n.queryToTagMap.set(x,F),n.tagToQueryMap.set(F,x)}let T=function tz(n,e,t,r,i,s){const u=xV(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function YG(n,e){n.eventRegistrations_.push(e)}(u,t),function QG(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ur,(s,u)=>{r.push(ry(s,u))}),t.isFullyInitialized()&&r.push(lV(t.getNode())),AV(n,r,t.getNode(),e)}(u,t)}(d,e,t,iT(n.pendingWriteTree_,i),s,p);if(!y&&!u&&!r){const x=PV(d,e);T=T.concat(function gz(n,e,t){const r=e._path,i=v0(n,e),s=VV(n,t),u=n.listenProvider_.startListening(w0(e),i,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,U.hu)(!Ah(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,b,T)=>{if(!cn(y)&&b&&Ah(b))return[uT(b).query];{let x=[];return b&&(x=x.concat(MV(b).map(F=>F.query))),Li(T,(F,j)=>{x=x.concat(j)}),x}});for(let y=0;y<p.length;++y){const b=p[y];n.listenProvider_.stopListening(w0(b),v0(n,b))}}return u}(n,e,x))}return T}function hT(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,d)=>{const y=Sh(d,ks(u,e));if(y)return y});return _V(i,e,s,t,!0)}function ay(n,e){return LV(e,n.syncPointTree_,null,iT(n.pendingWriteTree_,Nn()))}function LV(n,e,t,r){if(cn(n.path))return FV(n,e,t,r);{const i=e.get(Nn());null==t&&null!=i&&(t=Sh(i,Nn()));let s=[];const u=un(n.path),d=n.operationForChild(u),p=e.children.get(u);if(p&&d){const y=t?t.getImmediateChild(u):null,b=vV(r,u);s=s.concat(LV(d,p,y,b))}return i&&(s=s.concat(XP(i,n,r,t))),s}}function FV(n,e,t,r){const i=e.get(Nn());null==t&&null!=i&&(t=Sh(i,Nn()));let s=[];return e.children.inorderTraversal((u,d)=>{const p=t?t.getImmediateChild(u):null,y=vV(r,u),b=n.operationForChild(u);b&&(s=s.concat(FV(b,d,p,y)))}),i&&(s=s.concat(XP(i,n,r,t))),s}function VV(n,e){const t=e.query,r=v0(n,t);return{hashFn:()=>(function qG(n){return n.viewCache_.serverCache.getNode()}(e)||tn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function uz(n,e,t){const r=nN(n,t);if(r){const i=rN(r),s=i.path,u=i.queryId,d=ks(s,e);return iN(n,s,new p0($P(u),d))}return[]}(n,t._path,r):function lz(n,e){return ay(n,new p0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function lW(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return dT(n,t,null,s)}}}}function v0(n,e){const t=fT(e);return n.queryToTagMap.get(t)}function fT(n){return n._path.toString()+"$"+n._queryIdentifier}function nN(n,e){return n.tagToQueryMap.get(e)}function rN(n){const e=n.indexOf("$");return(0,U.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new $n(n.substr(0,e))}}function iN(n,e,t){const r=n.syncPointTree_.get(e);return(0,U.hu)(r,"Missing sync point for query tag that we're tracking"),XP(r,t,iT(n.pendingWriteTree_,e),null)}function w0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function iz(){return(0,U.hu)(cT,"Reference.ts has not been loaded"),cT}())(n._repo,n._path):n}class sN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new sN(t)}node(){return this.node_}}class oN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Dr(this.path_,e);return new oN(this.syncTree_,t)}node(){return hT(this.syncTree_,this.path_)}}const UV=function(n,e,t){return n&&"object"==typeof n?((0,U.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_z(n[".sv"],e,t):"object"==typeof n[".sv"]?yz(n[".sv"],e):void(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_z=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,U.hu)(!1,"Unexpected server value: "+n)},yz=function(n,e,t){n.hasOwnProperty("increment")||(0,U.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,U.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,U.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},BV=function(n,e,t,r){return lN(e,new oN(t,n),r)},aN=function(n,e,t){return lN(n,new sN(e),t)};function lN(n,e,t){const r=n.getPriority().val(),i=UV(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,d=UV(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new ey(d,Fr(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new ey(i))),u.forEachChild(ur,(d,p)=>{const y=lN(p,e.getImmediateChild(d),t);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class uN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function pT(n,e){let t=e instanceof $n?e:new $n(e),r=n,i=un(t);for(;null!==i;){const s=(0,U.DV)(r.node.children,i)||{children:{},childCount:0};r=new uN(i,r,s),t=rr(t),i=un(t)}return r}function Kp(n){return n.node.value}function cN(n,e){n.node.value=e,dN(n)}function HV(n){return n.node.childCount>0}function gT(n,e){Li(n.node.children,(t,r)=>{e(new uN(t,n,r))})}function jV(n,e,t,r){t&&!r&&e(n),gT(n,i=>{jV(i,e,!0,r)}),t&&r&&e(n)}function E0(n){return new $n(null===n.parent?n.name:E0(n.parent)+"/"+n.name)}function dN(n){null!==n.parent&&function Ez(n,e,t){const r=function vz(n){return void 0===Kp(n)&&!HV(n)}(t),i=(0,U.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,dN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,dN(n))}(n.parent,n.name,n)}const Iz=/[\[\].#$\/\u0000-\u001F\u007F]/,bz=/[\[\].#$\u0000-\u001F\u007F]/,hN=10485760,mT=function(n){return"string"==typeof n&&0!==n.length&&!Iz.test(n)},$V=function(n){return"string"==typeof n&&0!==n.length&&!bz.test(n)},I0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!jD(n)||n&&"object"==typeof n&&(0,U.r3)(n,".sv")},Vu=function(n,e,t,r){r&&void 0===e||b0((0,U.gK)(n,"value"),e,t)},b0=function(n,e,t){const r=t instanceof $n?new UW(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+$p(r));if("function"==typeof e)throw new Error(n+"contains a function "+$p(r)+" with contents = "+e.toString());if(jD(e))throw new Error(n+"contains "+e.toString()+" "+$p(r));if("string"==typeof e&&e.length>hN/3&&(0,U.ug)(e)>hN)throw new Error(n+"contains a string greater than "+hN+" utf8 bytes "+$p(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Li(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!mT(u)))throw new Error(n+" contains an invalid key ("+u+") "+$p(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function BW(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,U.ug)(e),ZF(n)})(r,u),b0(n,d,r),function HW(n){const e=n.parts_.pop();n.byteLength_-=(0,U.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+$p(r)+" in addition to actual children.")}},WV=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,U.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Li(e,(u,d)=>{const p=new $n(u);if(b0(i,d,Dr(t,p)),".priority"===SP(p)&&!I0(d))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=a0(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!mT(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(VW);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Va(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},fN=function(n,e,t){if(!t||void 0!==e){if(jD(e))throw new Error((0,U.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!I0(e))throw new Error((0,U.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},C0=function(n,e,t,r){if(!(r&&void 0===t||mT(t)))throw new Error((0,U.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},D0=function(n,e,t,r){if(!(r&&void 0===t||$V(t)))throw new Error((0,U.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ba=function(n,e){if(".info"===un(e))throw new Error(n+" failed = Can't modify data under /.info/")},GV=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!mT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$V(n)}(t))throw new Error((0,U.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Sz{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _T(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!AP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function zV(n,e,t){_T(n,t),qV(n,r=>AP(r,e))}function $o(n,e,t){_T(n,t),qV(n,r=>Va(r,e)||Va(e,r))}function qV(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Az(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Az(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Hp&&Oi("event: "+t.toString()),J_(r)}}}const KV="repo_interrupt";class xz{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sz,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=eT(),this.transactionQueueTree_=new uN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ZV(n){const t=n.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function T0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:ZV(n)})}function YV(n,e,t,r,i){n.dataUpdateCount++;const s=new $n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,U.UI)(t,y=>Fr(y));u=function cz(n,e,t,r){const i=nN(n,r);if(i){const s=rN(i),u=s.path,d=s.queryId,p=ks(u,e),y=cr.fromObject(t);return iN(n,u,new sy($P(d),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Fr(t);u=OV(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,U.UI)(t,y=>Fr(y));u=function az(n,e,t){const r=cr.fromObject(t);return ay(n,new sy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Fr(t);u=y0(n.serverSyncTree_,s,p)}let d=s;u.length>0&&(d=uy(n,s)),$o(n.eventQueue_,d,u)}function QV(n,e){pN(n,"connected",e),!1===e&&function Oz(n){ly(n,"onDisconnectEvents");const e=T0(n),t=eT();BP(n.onDisconnect_,Nn(),(i,s)=>{const u=BV(i,s,n.serverSyncTree_,e);iy(t,i,u)});let r=[];BP(t,Nn(),(i,s)=>{r=r.concat(y0(n.serverSyncTree_,i,s));const u=yN(n,i);uy(n,u)}),n.onDisconnect_=eT(),$o(n.eventQueue_,Nn(),r)}(n)}function pN(n,e,t){const r=new $n("/.info/"+e),i=Fr(t);n.infoData_.updateSnapshot(r,i);const s=y0(n.infoSyncTree_,r,i);$o(n.eventQueue_,r,s)}function yT(n){return n.nextWriteId_++}function gN(n,e,t,r,i){ly(n,"set",{path:e.toString(),value:t,priority:r});const s=T0(n),u=Fr(t,r),d=hT(n.serverSyncTree_,e),p=aN(u,d,s),y=yT(n),b=eN(n.serverSyncTree_,e,p,y,!0);_T(n.eventQueue_,b),n.server_.put(e.toString(),u.val(!0),(x,F)=>{const j="ok"===x;j||us("set at "+e+" failed: "+x);const ne=Rh(n.serverSyncTree_,y,!j);$o(n.eventQueue_,e,ne),xh(0,i,x,F)});const T=yN(n,e);uy(n,T),$o(n.eventQueue_,T,[])}function Lz(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&UP(n.onDisconnect_,e),xh(0,t,r,i)})}function JV(n,e,t,r){const i=Fr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&iy(n.onDisconnect_,e,i),xh(0,r,s,u)})}function mN(n,e,t){let r;r=".info"===un(e._path)?dT(n.infoSyncTree_,e,t):dT(n.serverSyncTree_,e,t),zV(n.eventQueue_,e._path,r)}function XV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(KV)}function ly(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Oi(t,...e)}function xh(n,e,t,r){e&&J_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function _N(n,e,t){return hT(n.serverSyncTree_,e,t)||tn.EMPTY_NODE}function vT(n,e=n.transactionQueueTree_){if(e||wT(n,e),Kp(e)){const t=tU(n,e);(0,U.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function jz(n,e,t){const r=t.map(y=>y.currentWriteId),i=_N(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const b=t[y];(0,U.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const T=ks(e,b.path);s=s.updateChild(T,b.currentOutputSnapshotRaw)}const d=s.val(!0),p=e;n.server_.put(p.toString(),d,y=>{ly(n,"transaction put response",{path:p.toString(),status:y});let b=[];if("ok"===y){const T=[];for(let x=0;x<t.length;x++)t[x].status=2,b=b.concat(Rh(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&T.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();wT(n,pT(n.transactionQueueTree_,e)),vT(n,n.transactionQueueTree_),$o(n.eventQueue_,e,b);for(let x=0;x<T.length;x++)J_(T[x])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{us("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}uy(n,e)}},u)}(n,E0(e),t)}else HV(e)&&gT(e,t=>{vT(n,t)})}function uy(n,e){const t=eU(n,e),r=E0(t);return function $z(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=ks(t,p.path);let T,b=!1;if((0,U.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,T=p.abortReason,i=i.concat(Rh(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)b=!0,T="maxretry",i=i.concat(Rh(n.serverSyncTree_,p.currentWriteId,!0));else{const x=_N(n,p.path,u);p.currentInputSnapshot=x;const F=e[d].update(x.val());if(void 0!==F){b0("transaction failed: Data returned ",F,p.path);let j=Fr(F);"object"==typeof F&&null!=F&&(0,U.r3)(F,".priority")||(j=j.updatePriority(x.getPriority()));const de=p.currentWriteId,qe=T0(n),tt=aN(j,x,qe);p.currentOutputSnapshotRaw=j,p.currentOutputSnapshotResolved=tt,p.currentWriteId=yT(n),u.splice(u.indexOf(de),1),i=i.concat(eN(n.serverSyncTree_,p.path,tt,p.currentWriteId,p.applyLocally)),i=i.concat(Rh(n.serverSyncTree_,de,!0))}else b=!0,T="nodata",i=i.concat(Rh(n.serverSyncTree_,p.currentWriteId,!0))}$o(n.eventQueue_,t,i),i=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}wT(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)J_(r[d]);vT(n,n.transactionQueueTree_)}(n,tU(n,t),r),r}function eU(n,e){let t,r=n.transactionQueueTree_;for(t=un(e);null!==t&&void 0===Kp(r);)r=pT(r,t),t=un(e=rr(e));return r}function tU(n,e){const t=[];return nU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function nU(n,e,t){const r=Kp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);gT(e,i=>{nU(n,i,t)})}function wT(n,e){const t=Kp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,cN(e,t.length>0?t:void 0)}gT(e,r=>{wT(n,r)})}function yN(n,e){const t=E0(eU(n,e)),r=pT(n.transactionQueueTree_,e);return function wz(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{vN(n,i)}),vN(n,r),jV(r,i=>{vN(n,i)}),t}function vN(n,e){const t=Kp(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,U.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,U.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Rh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?cN(e,void 0):t.length=s+1,$o(n.eventQueue_,E0(e),i);for(let u=0;u<r.length;u++)J_(r[u])}}const wN=function(n,e){const t=zz(n),r=t.namespace;return"firebase.com"===t.domain&&Ou(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ou("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new EP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new $n(t.pathString)}},zz=function(n){let e="",t="",r="",i="",s="",u=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let b=n.indexOf("/");-1===b&&(b=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(b,T)),b<T&&(i=function Wz(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,T)));const x=function Gz(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):us(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(u="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const F=e.slice(0,y);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),s=r}"ns"in x&&(s=x.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:s}};class rU{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,U.Wl)(this.snapshot.exportVal())}}class iU{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class EN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,U.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class sU{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new U.BH;return Lz(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ba("OnDisconnect.remove",this._path);const e=new U.BH;return JV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ba("OnDisconnect.set",this._path),Vu("OnDisconnect.set",e,this._path,!1);const t=new U.BH;return JV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ba("OnDisconnect.setWithPriority",this._path),Vu("OnDisconnect.setWithPriority",e,this._path,!1),fN("OnDisconnect.setWithPriority",t,!1);const r=new U.BH;return function Fz(n,e,t,r,i){const s=Fr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,d)=>{"ok"===u&&iy(n.onDisconnect_,e,s),xh(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ba("OnDisconnect.update",this._path),WV("OnDisconnect.update",e,this._path,!1);const t=new U.BH;return function Vz(n,e,t,r){if((0,U.xb)(t))return Oi("onDisconnect().update() called with empty data.  Don't do anything."),void xh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Li(t,(u,d)=>{const p=Fr(d);iy(n.onDisconnect_,Dr(e,u),p)}),xh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return cn(this._path)?null:SP(this._path)}get ref(){return new Ha(this._repo,this._path)}get _queryIdentifier(){const e=cV(this._queryParams),t=yP(e);return"{}"===t?"default":t}get _queryObject(){return cV(this._queryParams)}isEqual(e){if(!((e=(0,U.m9)(e))instanceof ao))return!1;const t=this._repo===e._repo,r=AP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function FW(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ET(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Mh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Fu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Qc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Lu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ur){if(null!=e&&!I0(e)||null!=t&&!I0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,U.hu)(n.getIndex()instanceof NP||n.getIndex()===kP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function IT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ha extends ao{constructor(e,t){super(e,t,new QD,!1)}get parent(){const e=KF(this._path);return null===e?null:new Ha(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Zp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new $n(e),r=Yp(this.ref,e);return new Zp(this._node.getChild(t),r,ur)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Zp(i,Yp(this.ref,r),ur)))}hasChild(e){const t=new $n(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function oU(n,e){return(n=(0,U.m9)(n))._checkNotDeleted("ref"),void 0!==e?Yp(n._root,e):n._root}function aU(n,e){(n=(0,U.m9)(n))._checkNotDeleted("refFromURL");const t=wN(e,n._repo.repoInfo_.nodeAdmin);GV("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ou("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),oU(n,t.path.toString())}function Yp(n,e){return null===un((n=(0,U.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),D0("child","path",t,!1)):D0("child","path",e,!1),new Ha(n._repo,Dr(n._path,e));var t}function IN(n,e){n=(0,U.m9)(n),Ba("set",n._path),Vu("set",e,n._path,!1);const t=new U.BH;return gN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Qz(n,e){WV("update",e,n._path,!1);const t=new U.BH;return function kz(n,e,t,r){ly(n,"update",{path:e.toString(),value:t});let i=!0;const s=T0(n),u={};if(Li(t,(d,p)=>{i=!1,u[d]=BV(Dr(e,d),Fr(p),n.serverSyncTree_,s)}),i)Oi("update() called with empty data.  Don't do anything."),xh(0,r,"ok",void 0);else{const d=yT(n),p=function oz(n,e,t,r){!function bG(n,e,t,r){(0,U.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=GP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=cr.fromObject(t);return ay(n,new sy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);_T(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,b)=>{const T="ok"===y;T||us("update at "+e+" failed: "+y);const x=Rh(n.serverSyncTree_,d,!T),F=x.length>0?uy(n,e):e;$o(n.eventQueue_,F,x),xh(0,r,y,b)}),Li(t,y=>{const b=yN(n,Dr(e,y));uy(n,b)}),$o(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Jz(n){n=(0,U.m9)(n);const e=new EN(()=>{}),t=new S0(e);return function Nz(n,e,t){const r=function dz(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,b)=>{const T=ks(y,t);r=r||Sh(b,T)});let i=n.syncPointTree_.get(t);i?r=r||Sh(i,Nn()):(i=new RV,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new Dh(r,!0,!1):null;return function KG(n){return rT(n.viewCache_)}(xV(i,e,iT(n.pendingWriteTree_,e._path),s?u.getNode():tn.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Fr(i).withIndex(e._queryParams.getIndex());let u;if(tN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=y0(n.serverSyncTree_,e._path,s);else{const d=v0(n.serverSyncTree_,e);u=OV(n.serverSyncTree_,e._path,s,d)}return $o(n.eventQueue_,e._path,u),dT(n.serverSyncTree_,e,t,null,!0),s},i=>(ly(n,"get for query "+(0,U.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Zp(r,new Ha(n._repo,n._path),n._queryParams.getIndex()))}class S0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new rU("value",this,new Zp(e.snapshotNode,new Ha(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new iU(this,e,t):null}matches(e){return e instanceof S0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new iU(this,e,t):null}createEvent(e,t){(0,U.hu)(null!=e.childName,"Child events should have a childName.");const r=Yp(new Ha(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new rU(e.type,this,new Zp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof bT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function A0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(b,T)=>{mN(n._repo,n,d),p(b,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new EN(t,s||void 0),d="value"===e?new S0(u):new bT(e,u);return function Uz(n,e,t){let r;r=".info"===un(e._path)?tN(n.infoSyncTree_,e,t):tN(n.serverSyncTree_,e,t),zV(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>mN(n._repo,n,d)}function bN(n,e,t,r){return A0(n,"value",e,t,r)}function lU(n,e,t,r){return A0(n,"child_added",e,t,r)}function uU(n,e,t,r){return A0(n,"child_changed",e,t,r)}function cU(n,e,t,r){return A0(n,"child_moved",e,t,r)}function dU(n,e,t,r){return A0(n,"child_removed",e,t,r)}function hU(n,e,t){let r=null;const i=t?new EN(t):null;"value"===e?r=new S0(i):e&&(r=new bT(e,i)),mN(n._repo,n,r)}class Bl{}class fU extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("endAt",this._value,e._path,!0);const t=VP(e._queryParams,this._value,this._key);if(IT(t),Mh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class e3 extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("endBefore",this._value,e._path,!1);const t=function cG(n,e,t){let r,i;return n.index_===Fu?("string"==typeof e&&(e=aV(e)),i=VP(n,e,t)):(r=null==t?Qc:aV(t),i=VP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(IT(t),Mh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class pU extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("startAt",this._value,e._path,!0);const t=FP(e._queryParams,this._value,this._key);if(IT(t),Mh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class r3 extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vu("startAfter",this._value,e._path,!1);const t=function uG(n,e,t){let r;if(n.index_===Fu)"string"==typeof e&&(e=oV(e)),r=FP(n,e,t);else{let i;i=null==t?Lu:oV(t),r=FP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(IT(t),Mh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ao(e._repo,e._path,t,e._orderByCalled)}}class o3 extends Bl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ao(e._repo,e._path,function aG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class l3 extends Bl{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ao(e._repo,e._path,function lG(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class c3 extends Bl{constructor(e){super(),this._path=e}_apply(e){ET(e,"orderByChild");const t=new $n(this._path);if(cn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new NP(t),i=JD(e._queryParams,r);return Mh(i),new ao(e._repo,e._path,i,!0)}}class h3 extends Bl{_apply(e){ET(e,"orderByKey");const t=JD(e._queryParams,Fu);return Mh(t),new ao(e._repo,e._path,t,!0)}}class p3 extends Bl{_apply(e){ET(e,"orderByPriority");const t=JD(e._queryParams,ur);return Mh(t),new ao(e._repo,e._path,t,!0)}}class m3 extends Bl{_apply(e){ET(e,"orderByValue");const t=JD(e._queryParams,kP);return Mh(t),new ao(e._repo,e._path,t,!0)}}class y3 extends Bl{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Vu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new fU(this._value,this._key)._apply(new pU(this._value,this._key)._apply(e))}}function Hl(n,...e){let t=(0,U.m9)(n);for(const r of e)t=r._apply(t);return t}(function JG(n){(0,U.hu)(!lT,"__referenceConstructor has already been defined"),lT=n})(Ha),function rz(n){(0,U.hu)(!cT,"__referenceConstructor has already been defined"),cT=n}(Ha);const CN={};function mU(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Ou("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=wN(s,i),d=u.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,u=wN(s,i),d=u.repoInfo):p=!u.repoInfo.secure;const b=i&&p?new o0(o0.OWNER):new hW(n.name,n.options,e);GV("Invalid Firebase Database URL",u),cn(u.path)||Ou("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function b3(n,e,t,r){let i=CN[e.name];i||(i={},CN[e.name]=i);let s=i[n.toURLString()];return s&&Ou("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new xz(n,false,t,r),i[n.toURLString()]=s,s}(d,n,b,new dW(n.name,t));return new D3(T,n)}class D3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Mz(n,e,t){if(n.stats_=CP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new XD(n.repoInfo_,(r,i,s,u)=>{YV(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>QV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,U.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Wp(n.repoInfo_,e,(r,i,s,u)=>{YV(n,r,i,s,u)},r=>{QV(n,r)},r=>{!function Pz(n,e){Li(e,(t,r)=>{pN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function gW(n,e){const t=n.toString();return bP[t]||(bP[t]=e()),bP[t]}(n.repoInfo_,()=>new mG(n.stats_,n.server_)),n.infoData_=new dG,n.infoSyncTree_=new kV({startListening:(r,i,s,u)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=y0(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),pN(n,"connected",!1),n.serverSyncTree_=new kV({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(d,p)=>{const y=u(d,p);$o(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ha(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function I3(n,e){const t=CN[e];(!t||t[n.key]!==n)&&Ou(`Database ${e}(${n.repoInfo_}) has already been deleted.`),XV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ou("Cannot call "+e+" on a deleted database.")}}function _U(){LF.IS_TRANSPORT_INITIALIZED&&us("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function T3(){_U(),bh.forceDisallow()}function S3(){_U(),X_.forceDisallow(),bh.forceAllow()}function A3(n=(0,os.getApp)(),e){const t=(0,os._getProvider)(n,"database").getImmediate({identifier:e}),r=(0,U.P0)("database");return r&&yU(t,...r),t}function yU(n,e,t,r={}){(n=(0,U.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ou("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ou('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new o0(o0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,U.Sg)(r.mockUserToken,n.app.options.projectId);s=new o0(u)}!function E3(n,e,t,r){n.repoInfo_=new EP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}function M3(n,e){mF(n,e)}const N3={".sv":"timestamp"};class L3{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Wp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function P3(n){dF(os.SDK_VERSION),(0,os._registerComponent)(new Lo.wA("database",(e,{instanceIdentifier:t})=>mU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,os.registerVersion)(uF,cF,n),(0,os.registerVersion)(uF,cF,"esm2017")}();const B3=new Fo.Yd("@firebase/database-compat"),vU=function(n){B3.warn("FIREBASE WARNING: "+n)};class $3{constructor(e){this._delegate=e}cancel(e){(0,U.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,U.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,U.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,U.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,U.Dv)("OnDisconnect.set",1,2,arguments.length),(0,U.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,U.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,U.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,vU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,U.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class W3{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,U.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ph{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,U.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,U.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,U.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,U.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,U.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),D0("DataSnapshot.child","path",e,!1),new Ph(this._database,this._delegate.child(e))}hasChild(e){return(0,U.Dv)("DataSnapshot.hasChild",1,1,arguments.length),D0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,U.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,U.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,U.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ph(this._database,t)))}hasChildren(){return(0,U.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,U.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,U.Dv)("DataSnapshot.ref",0,0,arguments.length),new Wo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class zi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,U.Dv)("Query.on",2,4,arguments.length),(0,U.Wj)("Query.on","callback",t,!1);const u=zi.getCancelAndContextArgs_("Query.on",r,i),d=(y,b)=>{t.call(u.context,new Ph(this.database,y),b)};d.userCallback=t,d.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return bN(this._delegate,d,p),t;case"child_added":return lU(this._delegate,d,p),t;case"child_removed":return dU(this._delegate,d,p),t;case"child_changed":return uU(this._delegate,d,p),t;case"child_moved":return cU(this._delegate,d,p),t;default:throw new Error((0,U.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,U.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,U.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,U.Wj)("Query.off","callback",t,!0),(0,U.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,hU(this._delegate,e,i)}else hU(this._delegate,e)}get(){return Jz(this._delegate).then(e=>new Ph(this.database,e))}once(e,t,r,i){(0,U.Dv)("Query.once",1,4,arguments.length),(0,U.Wj)("Query.once","callback",t,!0);const s=zi.getCancelAndContextArgs_("Query.once",r,i),u=new U.BH,d=(y,b)=>{const T=new Ph(this.database,y);t&&t.call(s.context,T,b),u.resolve(T)};d.userCallback=t,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(e){case"value":bN(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":lU(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":dU(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":uU(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":cU(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,U.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,U.Dv)("Query.limitToFirst",1,1,arguments.length),new zi(this.database,Hl(this._delegate,function a3(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new o3(n)}(e)))}limitToLast(e){return(0,U.Dv)("Query.limitToLast",1,1,arguments.length),new zi(this.database,Hl(this._delegate,function u3(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new l3(n)}(e)))}orderByChild(e){return(0,U.Dv)("Query.orderByChild",1,1,arguments.length),new zi(this.database,Hl(this._delegate,function d3(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return D0("orderByChild","path",n,!1),new c3(n)}(e)))}orderByKey(){return(0,U.Dv)("Query.orderByKey",0,0,arguments.length),new zi(this.database,Hl(this._delegate,function f3(){return new h3}()))}orderByPriority(){return(0,U.Dv)("Query.orderByPriority",0,0,arguments.length),new zi(this.database,Hl(this._delegate,function g3(){return new p3}()))}orderByValue(){return(0,U.Dv)("Query.orderByValue",0,0,arguments.length),new zi(this.database,Hl(this._delegate,function _3(){return new m3}()))}startAt(e=null,t){return(0,U.Dv)("Query.startAt",0,2,arguments.length),new zi(this.database,Hl(this._delegate,function n3(n=null,e){return C0("startAt","key",e,!0),new pU(n,e)}(e,t)))}startAfter(e=null,t){return(0,U.Dv)("Query.startAfter",0,2,arguments.length),new zi(this.database,Hl(this._delegate,function s3(n,e){return C0("startAfter","key",e,!0),new r3(n,e)}(e,t)))}endAt(e=null,t){return(0,U.Dv)("Query.endAt",0,2,arguments.length),new zi(this.database,Hl(this._delegate,function Xz(n,e){return C0("endAt","key",e,!0),new fU(n,e)}(e,t)))}endBefore(e=null,t){return(0,U.Dv)("Query.endBefore",0,2,arguments.length),new zi(this.database,Hl(this._delegate,function t3(n,e){return C0("endBefore","key",e,!0),new e3(n,e)}(e,t)))}equalTo(e,t){return(0,U.Dv)("Query.equalTo",1,2,arguments.length),new zi(this.database,Hl(this._delegate,function v3(n,e){return C0("equalTo","key",e,!0),new y3(n,e)}(e,t)))}toString(){return(0,U.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,U.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,U.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof zi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,U.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,U.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,U.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Wo(this.database,new Ha(this._delegate._repo,this._delegate._path))}}class Wo extends zi{constructor(e,t){super(e,new ao(t._repo,t._path,new QD,!1)),this.database=e,this._delegate=t}getKey(){return(0,U.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,U.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Wo(this.database,Yp(this._delegate,e))}getParent(){(0,U.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Wo(this.database,e):null}getRoot(){return(0,U.Dv)("Reference.root",0,0,arguments.length),new Wo(this.database,this._delegate.root)}set(e,t){(0,U.Dv)("Reference.set",1,2,arguments.length),(0,U.Wj)("Reference.set","onComplete",t,!0);const r=IN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,U.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,vU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ba("Reference.update",this._delegate._path),(0,U.Wj)("Reference.update","onComplete",t,!0);const r=Qz(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,U.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,U.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function Yz(n,e,t){if(Ba("setWithPriority",n._path),Vu("setWithPriority",e,n._path,!1),fN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new U.BH;return gN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,U.Dv)("Reference.remove",0,1,arguments.length),(0,U.Wj)("Reference.remove","onComplete",e,!0);const t=function Kz(n){return Ba("remove",n._path),IN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,U.Dv)("Reference.transaction",1,3,arguments.length),(0,U.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,U.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,U.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function F3(n,e,t){var r;if(n=(0,U.m9)(n),Ba("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new U.BH,d=bN(n,()=>{});return function Hz(n,e,t,r,i,s){ly(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:fF(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=_N(n,e,void 0);u.currentInputSnapshot=d;const p=u.update(d.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{b0("transaction failed: Data returned ",p,u.path),u.status=0;const y=pT(n.transactionQueueTree_,e),b=Kp(y)||[];let T;b.push(u),cN(y,b),"object"==typeof p&&null!==p&&(0,U.r3)(p,".priority")?(T=(0,U.DV)(p,".priority"),(0,U.hu)(I0(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(hT(n.serverSyncTree_,e)||tn.EMPTY_NODE).getPriority().val();const x=T0(n),F=Fr(p,T),j=aN(F,d,x);u.currentOutputSnapshotRaw=F,u.currentOutputSnapshotResolved=j,u.currentWriteId=yT(n);const ne=eN(n.serverSyncTree_,e,j,u.currentWriteId,u.applyLocally);$o(n.eventQueue_,e,ne),vT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,b)=>{let T=null;p?s.reject(p):(T=new Zp(b,new Ha(n._repo,n._path),ur),s.resolve(new L3(y,T)))},d,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new W3(s.committed,new Ph(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,U.Dv)("Reference.setPriority",1,2,arguments.length),(0,U.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Zz(n,e){n=(0,U.m9)(n),Ba("setPriority",n._path),fN("setPriority",e,!1);const t=new U.BH;return gN(n._repo,Dr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,U.Dv)("Reference.push",0,2,arguments.length),(0,U.Wj)("Reference.push","onComplete",t,!0);const r=function qz(n,e){n=(0,U.m9)(n),Ba("push",n._path),Vu("push",e,n._path,!0);const t=ZV(n._repo),r=rG(t),i=Yp(n,r),s=Yp(n,r);let u;return u=null!=e?IN(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Wo(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new Wo(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Ba("Reference.onDisconnect",this._delegate._path),new $3(new sU(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class R0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:T3,forceLongPolling:S3}}useEmulator(e,t,r={}){yU(this._delegate,e,t,r)}ref(e){if((0,U.Dv)("database.ref",0,1,arguments.length),e instanceof Wo){const t=aU(this._delegate,e.toString());return new Wo(this,t)}{const t=oU(this._delegate,e);return new Wo(this,t)}}refFromURL(e){(0,U.Dv)("database.refFromURL",1,1,arguments.length);const r=aU(this._delegate,e);return new Wo(this,r)}goOffline(){return(0,U.Dv)("database.goOffline",0,0,arguments.length),function R3(n){(n=(0,U.m9)(n))._checkNotDeleted("goOffline"),XV(n._repo)}(this._delegate)}goOnline(){return(0,U.Dv)("database.goOnline",0,0,arguments.length),function x3(n){(n=(0,U.m9)(n))._checkNotDeleted("goOnline"),function Bz(n){n.persistentConnection_&&n.persistentConnection_.resume(KV)}(n._repo)}(this._delegate)}}R0.ServerValue={TIMESTAMP:function k3(){return N3}(),increment:n=>function O3(n){return{".sv":{increment:n}}}(n)};var z3=Object.freeze({__proto__:null,initStandalone:function G3({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){dF(t);const u=new Lo.zt("auth-internal",new Lo.H0("database-standalone"));return u.setComponent(new Lo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new R0(mU(n,u,void 0,e,s),n),namespace:i}}});const q3=R0.ServerValue;function wU(n){return null==n}function EU(n){return"function"==typeof n.set}function IU(n,e){return EU(e)?e:n.ref(e)}function bU(n,e){if(function Z3(n){return"string"==typeof n}(n))return e.stringCase();if(EU(n))return e.firebaseCase();if(function Y3(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function x0(n,e,t="on",r=e0.z){return new mr.y(i=>{let s=null;return s=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,at.U)(i=>{const{snapshot:s,prevKey:u}=i;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:u,key:d}}),(0,Vf.B)())}function CU(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function X3(n,e){const{payload:t,prevKey:r,key:i}=e,s=CU(n,i),u=function J3(n,e){if(wU(e))return 0;{const t=CU(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function DU(n){return(wU(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function TU(n,e,t){return function Q3(n,e,t){return x0(n,"value","once",t).pipe(Xn(r=>{const i=[ft(r)];return e.forEach(s=>i.push(x0(n,s,"on",t))),(0,$i.T)(...i).pipe(At(X3,[]))}),pP())}(n,e=DU(e),t)}function SU(n,e,t){const r=(e=DU(e)).map(i=>x0(n,i,"on",t));return(0,$i.T)(...r)}function AU(n,e){return function(r,i){return bU(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function rq(n){return function(t){return t?bU(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function RU(n,e){return function(){return x0(n,"value","on",e)}}!function K3(n){n.INTERNAL.registerComponent(new Lo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new R0(i,r)},"PUBLIC").setServiceProps({Reference:Wo,Query:zi,Database:R0,DataSnapshot:Ph,enableLogging:M3,INTERNAL:z3,ServerValue:q3}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(lF.Z);const oq=new h.OlP("angularfire2.realtimeDatabaseURL"),aq=new h.OlP("angularfire2.database.use-emulator");let cy=(()=>{class n{constructor(t,r,i,s,u,d,p,y,b,T,x,F,j,ne,de){this.schedulers=d;const qe=p,tt=(0,jr.on)(t,u,r);y&&uw(tt,u,b,x,F,j,T,ne),this.database=(0,jr.cc)(`${tt.name}.database.${i}`,"AngularFireDatabase",tt.name,()=>{const ct=u.runOutsideAngular(()=>tt.database(i||void 0));return qe&&ct.useEmulator(...qe),ct},[qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>IU(this.database,t));let s=i;return r&&(s=r(i)),function iq(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:AU(r,"update"),set:AU(r,"set"),push:i=>r.push(i),remove:rq(r),snapshotChanges:i=>TU(n,i,t).pipe(Qt.iC),stateChanges:i=>SU(n,i,t).pipe(Qt.iC),auditTrail:i=>function eq(n,e,t){return function nq(n,e,t){return function tq(n,e){return x0(n,"value","on",e).pipe((0,at.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function X$(...n){const e=(0,ts.jO)(n);return(0,Sn.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),d=!1;for(let p=0;p<i;p++)(0,rs.Xf)(n[p]).subscribe((0,Hn.x)(r,y=>{s[p]=y,!d&&!u[p]&&(u[p]=!0,(d=u.every(Gs.y))&&(u=null))},aF.Z));t.subscribe((0,Hn.x)(r,p=>{if(d){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,at.U)(([i,s])=>{const u=i.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:d}}),function eW(n){return(0,Sn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Hn.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,at.U)(i=>i.actions))}(n,SU(n,e).pipe(At((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Qt.iC),valueChanges:(i,s)=>TU(n,i,t).pipe((0,at.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Qt.iC)}}(s,this)}object(t){return function sq(n,e){return{query:n,snapshotChanges:()=>RU(n,e.schedulers.outsideAngular)().pipe(Qt.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>RU(n,e.schedulers.outsideAngular)().pipe(Qt.iC,(0,at.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>IU(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jr.Dh),h.LFG(jr.xv,8),h.LFG(oq,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qt.HU),h.LFG(aq,8),h.LFG(xm,8),h.LFG(Dm,8),h.LFG(Tm,8),h.LFG(Sm,8),h.LFG(Am,8),h.LFG(Rm,8),h.LFG(Rl,8),h.LFG(Zd,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lq=(()=>{class n{constructor(){ko.Z.registerVersion("angularfire",Qt.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[cy]}),n})();function DN(){return(0,Sn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Hn.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function TN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function xU(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function MU(){if(!function wx(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}class M0{constructor(e){this._delegate=e}static fromBase64String(e){return MU(),new M0(ku.fromBase64String(e))}static fromUint8Array(e){return xU(),new M0(ku.fromUint8Array(e))}toBase64(){return MU(),this._delegate.toBase64()}toUint8Array(){return xU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function SN(n){return function dq(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hq{enableIndexedDbPersistence(e,t){return function o$(n,e){UL(n=_n(n,Er));const t=Qr(n),r=n._freezeSettings(),i=new ZM;return VL(t,i,new wL(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function a$(n){UL(n=_n(n,Er));const e=Qr(n),t=n._freezeSettings(),r=new ZM;return VL(e,r,new jj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function l$(n){if(n._initialized&&!n._terminated)throw new Ue(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,De.Z)(function*(){try{yield(t=(0,De.Z)(function*(r){if(!Fa.C())return Promise.resolve();const i=r+"main";yield Fa.delete(i)}),function(r){return t.apply(this,arguments)})(jx(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class PU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $c||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Au("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function SL(n,e,t,r={}){var i;const s=(n=_n(n,ZE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Au("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=Kn.MOCK_USER;else{u=(0,U.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ue(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Kn(p)}n._authCredentials=new QC(new mE(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function c$(n){return function Yj(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield NL(n),t=yield rP(n);return e.setNetworkEnabled(!0),function(r){const i=et(r);return i._u.delete(0),qE(i)}(t)}))}(Qr(n=_n(n,Er)))}(this._delegate)}disableNetwork(){return function d$(n){return function Qj(n){return n.asyncQueue.enqueue((0,De.Z)(function*(){const e=yield NL(n),t=yield rP(n);return e.setNetworkEnabled(!1),(r=(0,De.Z)(function*(i){const s=et(i);s._u.add(0),yield j_(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Qr(n=_n(n,Er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,EL("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function u$(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return function xj(n,e){return NM.apply(this,arguments)}(yield iP(e),t)})),t.promise}(Qr(n=_n(n,Er)))}(this._delegate)}onSnapshotsInSync(e){return function j$(n,e){return function e$(n,e){const t=new PD(e);return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Z_(n),i=t,et(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return r=yield Z_(n),i=t,void et(r).Ru.delete(i);var r,i}))}}(Qr(n=_n(n,Er)),oP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dy(this,AL(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ja(this,MD(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ls(this,function $j(n,e){if(n=_n(n,ZE),YM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ls(n,null,(t=e,new Gc(vn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function G$(n,e,t){n=_n(n,Er);const r=Object.assign(Object.assign({},$$),t);return function(i){if(i.maxAttempts<1)throw new Ue(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,u){const d=new $r;return i.asyncQueue.enqueueAndForget((0,De.Z)(function*(){const p=yield function kL(n){return ND(n).then(e=>e.datastore)}(i);new Kj(i.asyncQueue,p,u,s,d).run()})),d.promise}(Qr(n),i=>e(new W$(n,i)),r)}(this._delegate,t=>e(new NU(this,t)))}batch(){return Qr(this._delegate),new kU(new sF(this._delegate,e=>Y_(this._delegate,e)))}loadBundle(e){return function h$(n,e){const t=Qr(n=_n(n,Er)),r=new i$;return function t$(n,e,t,r){const i=function(s,u){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return xL(p,y);if(p instanceof ArrayBuffer)return xL(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new Wj(p,u);var p}(t,zE(e));n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){!function Hj(n,e,t){const r=et(n);var i;(i=(0,De.Z)(function*(s,u,d){try{const p=yield u.getMetadata();if(yield function(x,F){const j=et(x),ne=Pi(F.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",de=>j.Ns.getBundleMetadata(de,F.id)).then(de=>!!de&&de.createTime.compareTo(ne)>=0)}(s.localStore,p))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(cL(p));const y=new wj(p,s.localStore,u.It);let b=yield u.mc();for(;b;){const x=yield y.Fu(b);x&&d._updateProgress(x),b=yield u.mc()}const T=yield y.complete();return yield Kc(s,T.Lu,void 0),yield function(x,F){const j=et(x);return j.persistence.runTransaction("Save bundle","readwrite",ne=>j.Ns.saveBundleMetadata(ne,F))}(s.localStore,p),d._completeWith(T.progress),Promise.resolve(T.Bu)}catch(p){return Au("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var x}),function(s,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield iP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function f$(n,e){return function n$(n,e){return n.asyncQueue.enqueue((0,De.Z)(function*(){return function(t,r){const i=et(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield kD(n),e)}))}(Qr(n=_n(n,Er)),e).then(t=>t?new ls(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ls(this,t):null)}}class CT extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new M0(new ku(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ja.forKey(t,this.firestore,null)}}class NU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CT(e)}get(e){const t=Jp(e);return this._delegate.get(t).then(r=>new P0(this._firestore,new Yc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Jp(e);return r?(TN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}}class kU{constructor(e){this._delegate=e}set(e,t,r){const i=Jp(e);return r?(TN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Jp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Qp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new XE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Qp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Qp(e,new CT(e),t),i.set(t,s)),s}}Qp.INSTANCES=new WeakMap;class ja{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ja(t,new wr(t._delegate,r,new Qe(e)))}static forKey(e,t,r){return new ja(t,new wr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dy(this.firestore,AL(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,U.m9)(e))instanceof wr&&RL(this._delegate,e)}set(e,t){t=TN("DocumentReference.set",t);try{return t?nF(this._delegate,e,t):nF(this._delegate,e)}catch(r){throw Os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?rF(this._delegate,e):rF(this._delegate,e,t,...r)}catch(i){throw Os(i,"updateDoc()","DocumentReference.update()")}}delete(){return function B$(n){return Y_(_n(n.firestore,Er),[new O_(n._key,Cr.none())])}(this._delegate)}onSnapshot(...e){const t=OU(e),r=LU(e,i=>new P0(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return iF(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function O$(n){n=_n(n,wr);const e=_n(n.firestore,Er),t=Qr(e),r=new Eh(e);return function Jj(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,u){try{const d=yield function(p,y){const b=et(p);return b.persistence.runTransaction("read document","readonly",T=>b.localDocuments.getDocument(T,y))}(i,s);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Ue(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=G_(d,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield kD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Yc(e,r,n._key,i,new Up(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function L$(n){n=_n(n,wr);const e=_n(n.firestore,Er);return OL(Qr(e),n._key,{source:"server"}).then(t=>fP(e,n,t))}(this._delegate):function k$(n){n=_n(n,wr);const e=_n(n.firestore,Er);return OL(Qr(e),n._key).then(t=>fP(e,n,t))}(this._delegate),t.then(r=>new P0(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ja(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function OU(n){for(const e of n)if("object"==typeof e&&!SN(e))return e;return{}}function LU(n,e){var t,r;let i;return i=SN(n[0])?n[0]:SN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class P0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ja(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return tF(this._delegate,e._delegate)}}class N0 extends P0{data(e){const t=this._delegate.data(e);return function ZC(n,e){n||dt()}(void 0!==t),t}}class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CT(e)}where(e,t,r){try{return new Ls(this.firestore,vh(this._delegate,function b$(n,e,t){const r=e,i=BD("where",n);return new I$(i,r,t)}(e,t,r)))}catch(i){throw Os(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ls(this.firestore,vh(this._delegate,function D$(n,e="asc"){const t=e,r=BD("orderBy",n);return new C$(r,t)}(e,t)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ls(this.firestore,vh(this._delegate,function T$(n){return CL("limit",n),new KL("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ls(this.firestore,vh(this._delegate,function S$(n){return CL("limitToLast",n),new KL("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ls(this.firestore,vh(this._delegate,function A$(...n){return new ZL("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ls(this.firestore,vh(this._delegate,function R$(...n){return new ZL("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ls(this.firestore,vh(this._delegate,function x$(...n){return new YL("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ls(this.firestore,vh(this._delegate,function M$(...n){return new YL("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return QM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function V$(n){n=_n(n,ls);const e=_n(n.firestore,Er),t=Qr(e),r=new Eh(e);return function Xj(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,De.Z)(function*(){return(r=(0,De.Z)(function*(i,s,u){try{const d=yield CD(i,s,!0),p=new fL(s,d.Hi),y=p.Wu(d.documents),b=p.applyChanges(y,!1);u.resolve(b.snapshot)}catch(d){const p=G_(d,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield kD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new wh(e,r,n,i))}(this._delegate):"server"===e?.source?function U$(n){n=_n(n,ls);const e=_n(n.firestore,Er),t=Qr(e),r=new Eh(e);return LL(t,n._query,{source:"server"}).then(i=>new wh(e,r,n,i))}(this._delegate):function F$(n){n=_n(n,ls);const e=_n(n.firestore,Er),t=Qr(e),r=new Eh(e);return qL(n._query),LL(t,n._query).then(i=>new wh(e,r,n,i))}(this._delegate),t.then(r=>new AN(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OU(e),r=LU(e,i=>new AN(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return iF(this._delegate,t,r)}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}class pq{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AN{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new N0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pq(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new N0(this._firestore,r))})}isEqual(e){return tF(this._delegate,e._delegate)}}class dy extends Ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ja(this.firestore,e):null}doc(e){try{return new ja(this.firestore,void 0===e?MD(this._delegate):MD(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function H$(n,e){const t=_n(n.firestore,Er),r=MD(n),i=HD(n.converter,e);return Y_(t,[FD(Fp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ja(this.firestore,t))}isEqual(e){return RL(this._delegate,e._delegate)}withConverter(e){return new dy(this.firestore,this._delegate.withConverter(e?Qp.getInstance(this.firestore,e):null))}}function Jp(n){return _n(n,wr)}class RN{constructor(...e){this._delegate=new Zc(...e)}static documentId(){return new RN(Or.keyField().canonicalString())}isEqual(e){return(e=(0,U.m9)(e))instanceof Zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function q$(){return new aP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xp(e)}static delete(){const e=function z$(){return new YE("deleteField")}();return e._methodName="FieldValue.delete",new Xp(e)}static arrayUnion(...e){const t=function K$(...n){return new _$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xp(t)}static arrayRemove(...e){const t=function Z$(...n){return new y$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xp(t)}static increment(e){const t=function Y$(n){return new v$("increment",n)}(e);return t._methodName="FieldValue.increment",new Xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gq={Firestore:PU,GeoPoint:OD,Timestamp:tr,Blob:M0,Transaction:NU,WriteBatch:kU,DocumentReference:ja,DocumentSnapshot:P0,Query:Ls,QueryDocumentSnapshot:N0,QuerySnapshot:AN,CollectionReference:dy,FieldPath:RN,FieldValue:Xp,setLogLevel:function fq(n){!function hx(n){Bc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function FU(n,e){return function yq(n,e=e0.z){return new mr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function xN(n,e){return FU(n,e).pipe((0,at.U)(t=>({payload:t,type:"query"})))}function DT(n,e){return xN(n,e).pipe(Is(void 0),DN(),(0,at.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const p=i.find(b=>b.doc.ref.isEqual(u.ref)),y=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),s}))}function VU(n,e,t){return DT(n,t).pipe(At((r,i)=>function wq(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Eq(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return MN(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return MN(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return MN(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),pP(),(0,at.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function MN(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function UU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function _q(n){(function mq(n,e){n.INTERNAL.registerComponent(new Lo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},gq)))})(n,(e,t)=>new PU(e,t,new hq)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(lF.Z);class BU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=DT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,at.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Is(void 0),DN(),Di(([r,i])=>i.length>0||!r),(0,at.U)(([r,i])=>i),Qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(At((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UU(e);return VU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return xN(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Qt.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(Qt.iC)}add(e){return this.ref.add(e)}doc(e){return new HU(this.ref.doc(e),this.afs)}}class HU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=jU(r,t);return new BU(i,s,this.afs)}snapshotChanges(){return function vq(n,e){return FU(n,e).pipe(Is(void 0),DN(),(0,at.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,at.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,yn.D)(this.ref.get(e)).pipe(Qt.iC)}}class Iq{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?DT(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Di(t=>t.length>0),Qt.iC):DT(this.query,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}auditTrail(e){return this.stateChanges(e).pipe(At((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UU(e);return VU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt.iC)}valueChanges(e={}){return xN(this.query,this.afs.schedulers.outsideAngular).pipe((0,at.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Qt.iC)}get(e){return(0,yn.D)(this.query.get(e)).pipe(Qt.iC)}}const bq=new h.OlP("angularfire2.enableFirestorePersistence"),Cq=new h.OlP("angularfire2.firestore.persistenceSettings"),Dq=new h.OlP("angularfire2.firestore.settings"),Tq=new h.OlP("angularfire2.firestore.use-emulator");function jU(n,e=(t=>t)){return{query:e(n),ref:n}}let Sq=(()=>{class n{constructor(t,r,i,s,u,d,p,y,b,T,x,F,j,ne,de,qe,tt){this.schedulers=p;const ct=(0,jr.on)(t,d,r),ht=b;T&&uw(ct,d,x,j,ne,de,F,qe),[this.firestore,this.persistenceEnabled$]=(0,jr.cc)(`${ct.name}.firestore`,"AngularFirestore",ct.name,()=>{const Pt=d.runOutsideAngular(()=>ct.firestore());if(s&&Pt.settings(s),ht&&Pt.useEmulator(...ht),i&&!na(u)){const Ut=()=>{try{return(0,yn.D)(Pt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(wn){return typeof console<"u"&&console.warn(wn),ft(!1)}};return[Pt,d.runOutsideAngular(Ut)]}return[Pt,ft(!1)]},[s,ht,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=jU(i,r),d=this.schedulers.ngZone.run(()=>s);return new BU(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new Iq(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new HU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jr.Dh),h.LFG(jr.xv,8),h.LFG(bq,8),h.LFG(Dq,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Qt.HU),h.LFG(Cq,8),h.LFG(Tq,8),h.LFG(xm,8),h.LFG(Dm,8),h.LFG(Tm,8),h.LFG(Sm,8),h.LFG(Am,8),h.LFG(Rm,8),h.LFG(Rl,8),h.LFG(Zd,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Aq=(()=>{class n{constructor(t,r){this.db=t,this.afs=r,this.messageList=t.list("items")}createmessage(t){this.afs.collection("items").add({from:t.from,to:t.to,content:t.content,timestamp:t.timestamp}).catch(r=>{console.error(r)})}getmessages(){return this.db.list("messages").snapshotChanges()}getmessageById(t){return this.db.list("items",r=>r.orderByKey().equalTo(t)).snapshotChanges()}getmessageBySender(t){return this.db.list("items",r=>r.orderByChild("from").equalTo(t)).snapshotChanges()}getmessageBySenderAndReceiver(t,r){const i=this.afs.collection("items",u=>u.where("from","==",t).where("to","==",r).orderBy("timestamp","asc")).snapshotChanges(),s=this.afs.collection("items",u=>u.where("from","==",r).where("to","==",t).orderBy("timestamp","asc")).snapshotChanges();return(0,$i.T)(i,s).pipe((0,at.U)(u=>u.map(d=>({id:d.payload.doc.id,...d.payload.doc.data()}))),At((u,d)=>{const p=d.filter(y=>!u.some(b=>b.id===y.id));return[...u,...p].sort((y,b)=>y.timestamp-b.timestamp)},[]),pP((u,d)=>JSON.stringify(u)===JSON.stringify(d)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cy),h.LFG(Sq))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PN=(()=>{class n{constructor(t){this.db=t,this.userList=t.list("users")}createUser(t){this.userList.push({email:t.email,firstname:t.firstname,lastname:t.lastname,phone:t.phone,profilePhoto:t.profilePhoto}).catch(r=>{console.error(r)})}getUsers(){return this.db.list("users").snapshotChanges()}getUserById(t){return this.db.list("users",r=>r.orderByKey().equalTo(t)).snapshotChanges()}getUserByEmail(t){return this.db.list("users",r=>r.orderByChild("email").equalTo(t)).snapshotChanges().pipe((0,at.U)(r=>r.map(i=>({data:i.payload.val()}))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(cy))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var $U=V(4408);const k0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=k0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new qs.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=k0;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=k0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var WU=V(7565);const GU=new class xq extends WU.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Rq extends $U.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=k0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(k0.cancelAnimationFrame(t),e._scheduled=void 0)}});let NN,Mq=1;const TT={};function zU(n){return n in TT&&(delete TT[n],!0)}const Pq={setImmediate(n){const e=Mq++;return TT[e]=!0,NN||(NN=Promise.resolve()),NN.then(()=>zU(e)&&n()),e},clearImmediate(n){zU(n)}},{setImmediate:Nq,clearImmediate:kq}=Pq,ST={setImmediate(...n){const{delegate:e}=ST;return(e?.setImmediate||Nq)(...n)},clearImmediate(n){const{delegate:e}=ST;return(e?.clearImmediate||kq)(n)},delegate:void 0};new class Lq extends WU.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Oq extends $U.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ST.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(ST.clearImmediate(t),e._scheduled=void 0)}});var Uq=V(3532);function qU(n=0,e,t=e0.P){let r=-1;return null!=e&&((0,Uq.K)(e)?t=e:r=e),new mr.y(i=>{let s=function Bq(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}let kN;try{kN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{kN=!1}let O0,ON,jq=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Ii(n){return n===Ei}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!kN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function L0(n){return function $q(){if(null==O0&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>O0=!0}))}finally{O0=O0||!1}return O0}()?n:!!n.capture}function ZU(n){if(function Wq(){if(null==ON){const n=typeof document<"u"?document.head:null;ON=!(!n||!n.createShadowRoot&&!n.attachShadow)}return ON}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function RT(n){return n.composedPath?n.composedPath()[0]:n.target}let zq=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new pn.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function Hq(n,e=e0.z){return function Vq(n){return(0,Sn.e)((e,t)=>{let r=!1,i=null,s=null,u=!1;const d=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}u&&t.complete()},p=()=>{s=null,u&&t.complete()};e.subscribe((0,Hn.x)(t,y=>{r=!0,i=y,s||(0,rs.Xf)(n(y)).subscribe(s=(0,Hn.x)(t,d,p))},()=>{u=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>qU(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jq),h.LFG(h.R0b),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function YU(n){return null!=n&&"false"!=`${n}`}function Go(n){return n instanceof h.SBq?n.nativeElement:n}function LN(n){return(0,Sn.e)((e,t)=>{(0,rs.Xf)(n).subscribe((0,Hn.x)(t,()=>t.complete(),aF.Z)),!t.closed&&e.subscribe(t)})}const hK=new h.OlP("cdk-dir-doc",{providedIn:"root",factory:function fK(){return(0,h.f3M)(ge)}}),pK=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let mK=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new h.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function gK(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?pK.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hK,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FN(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function fy(n,e){const t=e?"":"none";FN(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function eB(n,e,t){FN(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function xT(n,e){return e&&"none"!=e?n+" "+e:n}function tB(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function VN(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function UN(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function BN(n,e,t){const{top:r,bottom:i,left:s,right:u}=n;return t>=r&&t<=i&&e>=s&&e<=u}function F0(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function nB(n,e,t,r){const{top:i,right:s,bottom:u,left:d,width:p,height:y}=n,b=p*e,T=y*e;return r>i-T&&r<u+T&&t>d-b&&t<s+b}class rB{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:UN(t)})})}handleScroll(e){const t=RT(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let s,u;if(t===this._document){const y=this.getViewportScrollPosition();s=y.top,u=y.left}else s=t.scrollTop,u=t.scrollLeft;const d=i.top-s,p=i.left-u;return this.positions.forEach((y,b)=>{y.clientRect&&t!==b&&t.contains(b)&&F0(y.clientRect,d,p)}),i.top=s,i.left=u,{top:d,left:p}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function iB(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?aB(n,e):("input"===r||"select"===r||"textarea"===r)&&oB(n,e),sB("canvas",n,e,aB),sB("input, textarea, select",n,e,oB),e}function sB(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let u=0;u<i.length;u++)r(i[u],s[u])}}let yK=0;function oB(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${yK++}`)}function aB(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const lB=L0({passive:!0}),MT=L0({passive:!1}),HN=new Set(["position"]);class wK{constructor(e,t,r,i,s,u){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=u,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new pn.x,this._pointerMoveSubscription=qs.w0.EMPTY,this._pointerUpSubscription=qs.w0.EMPTY,this._scrollSubscription=qs.w0.EMPTY,this._resizeSubscription=qs.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new pn.x,this.started=new pn.x,this.released=new pn.x,this.ended=new pn.x,this.entered=new pn.x,this.exited=new pn.x,this.dropped=new pn.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const p=this._getTargetHandle(d);p&&!this._disabledHandles.has(p)&&!this.disabled&&this._initializeDragSequence(p,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const p=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(p.x-this._pickupPositionOnPage.x)+Math.abs(p.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const F=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),j=this._dropContainer;if(!F)return void this._endDragSequence(d);(!j||!j.isDragging()&&!j.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const y=this._getConstrainedPointerPosition(p);if(this._hasMoved=!0,this._lastKnownPointerPosition=p,this._updatePointerDirectionDelta(y),this._dropContainer)this._updateActiveDropContainer(y,p);else{const b=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,T=this._activeTransform;T.x=y.x-b.x+this._passiveTransform.x,T.y=y.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(T.x,T.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:y,event:d,distance:this._getDragDistance(y),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const p=this._getTargetHandle(d);p&&!this._disabledHandles.has(p)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new rB(r),u.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=YU(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>fy(r,t)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Go(r)),this._handles.forEach(r=>fy(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Go(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,MT),t.addEventListener("touchstart",this._pointerDown,lB),t.addEventListener("dragstart",this._nativeDragStart,MT)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Go(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),fy(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),fy(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){V0(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),u=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();i.insertBefore(u,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),eB(r,!1,HN),this._document.body.appendChild(i.replaceChild(s,r)),this._getPreviewInsertionPoint(i,d).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=V0(t),s=!i&&0!==t.button,u=this._rootElement,d=RT(t),p=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),y=i?function uK(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(t):function lK(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(t);if(d&&d.draggable&&"mousedown"===t.type&&t.preventDefault(),r||s||p||y)return;if(this._handles.length){const x=u.style;this._rootElementTapHighlight=x.webkitTapHighlightColor||"",x.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(x=>this._updateOnScroll(x)),this._boundaryElement&&(this._boundaryRect=UN(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const T=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:T.x,y:T.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){eB(this._rootElement,!0,HN),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),u=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:u,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,u,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const s=e.matchSize?this._initialClientRect:null,u=e.viewContainer.createEmbeddedView(r,e.context);u.detectChanges(),i=cB(u,this._document),this._previewRef=u,e.matchSize?dB(i,s):i.style.transform=PT(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=iB(this._rootElement),dB(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return FN(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},HN),fy(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function _K(n){const e=getComputedStyle(n),t=VN(e,"transition-property"),r=t.find(d=>"transform"===d||"all"===d);if(!r)return 0;const i=t.indexOf(r),s=VN(e,"transition-duration"),u=VN(e,"transition-delay");return tB(s[i])+tB(u[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=u=>{(!u||RT(u)===this._preview&&"transform"===u.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(s))},s=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=cB(this._placeholderRef,this._document)):r=iB(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,u=V0(r)?r.targetTouches[0]:r,d=this._getViewportScrollPosition();return{x:s.left-e.left+(u.pageX-s.left-d.left),y:s.top-e.top+(u.pageY-s.top-d.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=V0(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){const u=this._ownerSVGElement.getScreenCTM();if(u){const d=this._ownerSVGElement.createSVGPoint();return d.x=i,d.y=s,d.matrixTransform(u.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:u}=this._pickupPositionInElement,d=this._boundaryRect,{width:p,height:y}=this._getPreviewRect(),b=d.top+u,T=d.bottom-(y-u);r=uB(r,d.left+s,d.right-(p-s)),i=uB(i,b,T)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,u=Math.abs(t-s.x),d=Math.abs(r-s.y);return u>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),d>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,fy(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,MT),e.removeEventListener("touchstart",this._pointerDown,lB),e.removeEventListener("dragstart",this._nativeDragStart,MT)}_applyRootElementTransform(e,t){const r=PT(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=xT(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=PT(e,t);this._preview.style.transform=xT(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,u=r.right-i.right,d=i.top-r.top,p=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),u>0&&(e-=u)):e=0,i.height>r.height?(d>0&&(t+=d),p>0&&(t-=p)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:V0(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=RT(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&F0(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=ZU(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Go(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function PT(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function uB(n,e,t){return Math.max(e,Math.min(t,n))}function V0(n){return"t"===n.type[0]}function cB(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function dB(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=PT(e.left,e.top)}function U0(n,e){return Math.max(0,Math.min(e,n))}class IK{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const s=this._itemPositions,u=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===u&&s.length>0)return null;const d="horizontal"===this.orientation,p=s.findIndex(de=>de.drag===e),y=s[u],T=y.clientRect,x=p>u?1:-1,F=this._getItemOffsetPx(s[p].clientRect,T,x),j=this._getSiblingOffsetPx(p,s,x),ne=s.slice();return function EK(n,e,t){const r=U0(e,n.length-1),i=U0(t,n.length-1);if(r===i)return;const s=n[r],u=i<r?-1:1;for(let d=r;d!==i;d+=u)n[d]=n[d+u];n[i]=s}(s,p,u),s.forEach((de,qe)=>{if(ne[qe]===de)return;const tt=de.drag===e,ct=tt?F:j,ht=tt?e.getPlaceholderElement():de.drag.getRootElement();de.offset+=ct,d?(ht.style.transform=xT(`translate3d(${Math.round(de.offset)}px, 0, 0)`,de.initialTransform),F0(de.clientRect,0,ct)):(ht.style.transform=xT(`translate3d(0, ${Math.round(de.offset)}px, 0)`,de.initialTransform),F0(de.clientRect,ct,0))}),this._previousSwap.overlaps=BN(T,t,r),this._previousSwap.drag=y.drag,this._previousSwap.delta=d?i.x:i.y,{previousIndex:p,currentIndex:u}}enter(e,t,r,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,u=this._activeDraggables,d=u.indexOf(e),p=e.getPlaceholderElement();let y=u[s];if(y===e&&(y=u[s+1]),!y&&(null==s||-1===s||s<u.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(y=u[0]),d>-1&&u.splice(d,1),y&&!this._dragDropRegistry.isDragging(y)){const b=y.getRootElement();b.parentElement.insertBefore(p,b),u.splice(s,0,e)}else Go(this._element).appendChild(p),u.push(e);p.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{F0(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:UN(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let s=i?t.left-e.left:t.top-e.top;return-1===r&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,s=t[e].clientRect,u=t[e+-1*r];let d=s[i?"width":"height"]*r;if(u){const p=i?"left":"top",y=i?"right":"bottom";-1===r?d-=u.clientRect[p]-s[y]:d+=s[p]-u.clientRect[y]}return d}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const u=r[r.length-1].clientRect;return i?e>=u.right:t>=u.bottom}{const u=r[0].clientRect;return i?e<=u.left:t<=u.top}}_getItemIndexFromPointerPosition(e,t,r,i){const s="horizontal"===this.orientation,u=this._itemPositions.findIndex(({drag:d,clientRect:p})=>{if(d===e)return!1;if(i){const y=s?i.x:i.y;if(d===this._previousSwap.drag&&this._previousSwap.overlaps&&y===this._previousSwap.delta)return!1}return s?t>=Math.floor(p.left)&&t<Math.floor(p.right):r>=Math.floor(p.top)&&r<Math.floor(p.bottom)});return-1!==u&&this._sortPredicate(u,e)?u:-1}}class bK{constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new pn.x,this.entered=new pn.x,this.exited=new pn.x,this.dropped=new pn.x,this.sorted=new pn.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=qs.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new pn.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function dK(n=0,e=e0.z){return n<0&&(n=0),qU(n,n,e)}(0,GU).pipe(LN(this._stopScrollTimers)).subscribe(()=>{const u=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?u.scrollBy(0,-d):2===this._verticalScrollDirection&&u.scrollBy(0,d),1===this._horizontalScrollDirection?u.scrollBy(-d,0):2===this._horizontalScrollDirection&&u.scrollBy(d,0)})},this.element=Go(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new rB(r),this._sortStrategy=new IK(this.element,t),this._sortStrategy.withSortPredicate((u,d)=>this.sortPredicate(u,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,u,d,p={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:u,dropPoint:d,event:p})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=Go(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!nB(this._clientRect,.05,t,r))return;const s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,s=0;if(this._parentPositions.positions.forEach((u,d)=>{d===this._document||!u.clientRect||r||nB(u.clientRect,.05,e,t)&&([i,s]=function CK(n,e,t,r){const i=pB(e,r),s=gB(e,t);let u=0,d=0;if(i){const p=n.scrollTop;1===i?p>0&&(u=1):n.scrollHeight-p>n.clientHeight&&(u=2)}if(s){const p=n.scrollLeft;1===s?p>0&&(d=1):n.scrollWidth-p>n.clientWidth&&(d=2)}return[u,d]}(d,u.clientRect,e,t),(i||s)&&(r=d))}),!i&&!s){const{width:u,height:d}=this._viewportRuler.getViewportSize(),p={width:u,height:d,top:0,right:u,bottom:d,left:0};i=pB(p,t),s=gB(p,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Go(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Go(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Go(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&BN(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!BN(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const s=Go(this.element);return i===s||s.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=ZU(Go(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function pB(n,e){const{top:t,bottom:r,height:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}function gB(n,e){const{left:t,right:r,width:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}const NT=L0({passive:!1,capture:!0});let DK=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new pn.x,this.pointerUp=new pn.x,this.scroll=new pn.x,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,NT)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,NT)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:NT}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:NT}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,u)=>{this._document.addEventListener(u,s.handler,s.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new mr.y(i=>this._ngZone.runOutsideAngular(()=>{const u=d=>{this._activeDragInstances.length&&i.next(d)};return t.addEventListener("scroll",u,!0),()=>{t.removeEventListener("scroll",u,!0)}}))),(0,$i.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TK={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let mB=(()=>{class n{constructor(t,r,i,s){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,r=TK){return new wK(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new bK(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(h.R0b),h.LFG(zq),h.LFG(DK))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _B=new h.OlP("CDK_DRAG_PARENT"),SK=new h.OlP("CDK_DRAG_CONFIG"),AK=new h.OlP("CdkDropList"),yB=new h.OlP("CdkDragHandle"),RK=new h.OlP("CdkDragPlaceholder"),xK=new h.OlP("CdkDragPreview");let PK=(()=>{class n{constructor(t,r,i,s,u,d,p,y,b,T,x){this.element=t,this.dropContainer=r,this._ngZone=s,this._viewContainerRef=u,this._dir=p,this._changeDetectorRef=b,this._selfHandle=T,this._parentDrag=x,this._destroyed=new pn.x,this.started=new h.vpe,this.released=new h.vpe,this.ended=new h.vpe,this.entered=new h.vpe,this.exited=new h.vpe,this.dropped=new h.vpe,this.moved=new mr.y(F=>{const j=this._dragRef.moved.pipe((0,at.U)(ne=>({source:this,pointerPosition:ne.pointerPosition,event:ne.event,delta:ne.delta,distance:ne.distance}))).subscribe(F);return()=>{j.unsubscribe()}}),this._dragRef=y.createDrag(t,{dragStartThreshold:d&&null!=d.dragStartThreshold?d.dragStartThreshold:5,pointerDirectionChangeThreshold:d&&null!=d.pointerDirectionChangeThreshold?d.pointerDirectionChangeThreshold:5,zIndex:d?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),d&&this._assignDefaults(d),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=YU(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Pn(1),LN(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let r=t;this.rootElementSelector&&(r=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):Go(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,u=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:function Kq(n,e=0){return function Zq(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(u).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Pn(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(i=>i.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:u,boundaryElement:d,draggingDisabled:p,rootElementSelector:y,previewContainer:b}=t;this.disabled=p??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),s&&(this.constrainPosition=s),u&&(this.previewClass=u),d&&(this.boundaryElement=d),y&&(this.rootElementSelector=y),b&&(this.previewContainer=b)}_setupHandlesListener(){this._handles.changes.pipe(Is(this._handles),(0,be.b)(t=>{const r=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Xn(t=>(0,$i.T)(...t.map(r=>r._stateChanges.pipe(Is(r))))),LN(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}}return n._dragInstances=[],n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(AK,12),h.Y36(ge),h.Y36(h.R0b),h.Y36(h.s_b),h.Y36(SK,8),h.Y36(mK,8),h.Y36(mB),h.Y36(h.sBO),h.Y36(yB,10),h.Y36(_B,12))},n.\u0275dir=h.lG2({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(t,r,i){if(1&t&&(h.Suo(i,xK,5),h.Suo(i,RK,5),h.Suo(i,yB,5)),2&t){let s;h.iGM(s=h.CRH())&&(r._previewTemplate=s.first),h.iGM(s=h.CRH())&&(r._placeholderTemplate=s.first),h.iGM(s=h.CRH())&&(r._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,r){2&t&&h.ekj("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[h._Bn([{provide:_B,useExisting:n}]),h.TTD]}),n})(),NK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[mB],imports:[qq]}),n})();const kK=["chatBox"];function OK(n,e){if(1&n&&(h.TgZ(0,"p",9),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(1),h.Oqu(t.content)}}function LK(n,e){if(1&n&&(h.TgZ(0,"p",10),h._uU(1),h.qZA()),2&n){const t=h.oxw().$implicit;h.xp6(1),h.Oqu(t.content)}}function FK(n,e){if(1&n&&(h.TgZ(0,"div",6),h.YNc(1,OK,2,1,"p",7),h.YNc(2,LK,2,1,"p",8),h.qZA()),2&n){const t=e.$implicit,r=h.oxw();h.xp6(1),h.Q6J("ngIf",t.from==r.receiver),h.xp6(1),h.Q6J("ngIf",t.from==r.user)}}let vB=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.db=r,this.auth=i,this.messagingService=s,this.userService=u,this.receiver="",this.title="the_project",this.message="",this.tabs=[],this.auth.currentUser.subscribe(d=>{this.user=d.email}),console.log(this.receiver)}ngOnInit(){null==this.auth.Auth().currentUser&&this.router.navigate(["/"]),this.auth.currentUser.subscribe(t=>{this.messagingService.getmessageBySenderAndReceiver(t.email,this.receiver).subscribe(r=>{this.data=r})}),this.ScrollDownMessageBox()}ngAfterViewChecked(){this.ScrollDownMessageBox()}send(){console.log(this.receiver),this.auth.currentUser.subscribe(t=>{this.messagingService.createmessage(new Q$(t.email,this.receiver,this.message,tr.now().toMillis().toString())),this.message=""})}ScrollDownMessageBox(){this.chatBox.nativeElement.scrollTop=this.chatBox.nativeElement.scrollHeight}slurp(){return(0,De.Z)(function*(){const r=(yield fetch("https://api.github.com/users/github")).json();console.log(r)})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(br),h.Y36(cy),h.Y36(cw),h.Y36(Aq),h.Y36(PN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-messaging"]],viewQuery:function(t,r){if(1&t&&h.Gf(kK,5),2&t){let i;h.iGM(i=h.CRH())&&(r.chatBox=i.first)}},inputs:{receiver:"receiver"},decls:9,vars:4,consts:[["cdkDrag","",1,"messageBox",3,"draggable"],["chatBox",""],[1,"receiver"],["class","chatBoxNgFor",4,"ngFor","ngForOf"],["type","text",1,"inputMessage",3,"ngModel","ngModelChange","keydown.enter"],[1,"send",3,"click"],[1,"chatBoxNgFor"],["class","incomingMessage",4,"ngIf"],["class","outcomingMessage",4,"ngIf"],[1,"incomingMessage"],[1,"outcomingMessage"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0,1)(2,"div",2),h._uU(3),h.qZA(),h.YNc(4,FK,3,2,"div",3),h._UZ(5,"br"),h.TgZ(6,"input",4),h.NdJ("ngModelChange",function(s){return r.message=s})("keydown.enter",function(){return r.send()}),h.qZA(),h.TgZ(7,"button",5),h.NdJ("click",function(){return r.send()}),h._uU(8,"send"),h.qZA()()),2&t&&(h.Q6J("draggable",!0),h.xp6(3),h.Oqu(r.receiver),h.xp6(1),h.Q6J("ngForOf",r.data),h.xp6(2),h.Q6J("ngModel",r.message))},dependencies:[fs,zn,bs,Cs,Of,PK],styles:[".messageBox[_ngcontent-%COMP%]{width:300px;margin-top:100px;background-color:#fff8c9;border-radius:3%;box-shadow:0 0 20px #00000080;opacity:.9;display:flex;flex-direction:column;padding:10px;max-height:400px;overflow:scroll;min-height:300px;position:relative}.chatBoxNgFor[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:-9px;margin-bottom:-10px;width:auto;height:-moz-fit-content!important;height:fit-content!important;padding-top:0%}.incomingMessage[_ngcontent-%COMP%]{text-align:left;align-self:flex-start;padding:3%;background-color:#ad5e5e;border-radius:5px;box-shadow:0 0 10px #00000080;color:#fff;word-wrap:break-word;word-break:break-all;overflow-wrap:break-word;white-space:pre-wrap;font-size:14px;opacity:1}.outcomingMessage[_ngcontent-%COMP%]{opacity:1;border-radius:5px;text-align:right;align-self:flex-end;margin-left:auto;background-color:#6969eb;padding:3%;box-shadow:0 0 10px #00000080;color:#fff;word-wrap:break-word;word-break:break-all;overflow-wrap:break-word;white-space:pre-wrap;font-size:14px}.receiver[_ngcontent-%COMP%]{text-align:center;background-color:#f0f0f0;border-radius:5px;padding:5px;margin:-10px 5px 5px;box-shadow:0 0 10px #00000080;font-size:14px;position:fixed;align-self:center}.send[_ngcontent-%COMP%]{background-color:#2a2caf;color:#fff;border-radius:5px;box-shadow:0 0 10px #00000080;font-size:12px;position:absolute;bottom:10px;left:50%;transform:translate(-50%);width:280px}.inputMessage[_ngcontent-%COMP%]{position:absolute;bottom:30px;left:50%;transform:translate(-50%);width:280px}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[draggable=true][_ngcontent-%COMP%]{cursor:move}"]}),n})();class VK{constructor(e,t,r,i,s){this.email=e,this.firstname=t,this.lastname=r,this.phone=i,this.profilePhoto=s}}function UK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"First name is required"),h.qZA())}function BK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"First name is too short"),h.qZA())}function HK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"First name is too long"),h.qZA())}function jK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"First name should only contain alphabets"),h.qZA())}function $K(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,UK,2,0,"small",14),h.YNc(2,BK,2,0,"small",14),h.YNc(3,HK,2,0,"small",14),h.YNc(4,jK,2,0,"small",14),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.firstName.errors.required),h.xp6(1),h.Q6J("ngIf",t.firstName.errors.minlength),h.xp6(1),h.Q6J("ngIf",t.firstName.errors.maxlength),h.xp6(1),h.Q6J("ngIf",t.firstName.errors.pattern)}}function WK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Last name is required"),h.qZA())}function GK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Last name is too short"),h.qZA())}function zK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Last name is too long"),h.qZA())}function qK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Last name should only contain alphabets"),h.qZA())}function KK(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,WK,2,0,"small",14),h.YNc(2,GK,2,0,"small",14),h.YNc(3,zK,2,0,"small",14),h.YNc(4,qK,2,0,"small",14),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.lastName.errors.required),h.xp6(1),h.Q6J("ngIf",t.lastName.errors.minlength),h.xp6(1),h.Q6J("ngIf",t.lastName.errors.maxlength),h.xp6(1),h.Q6J("ngIf",t.lastName.errors.pattern)}}function ZK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Email is required"),h.qZA())}function YK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Email is too short"),h.qZA())}function QK(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,ZK,2,0,"small",14),h.YNc(2,YK,2,0,"small",14),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.email.errors.required),h.xp6(1),h.Q6J("ngIf",t.email.errors.email)}}function JK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Phone number is required"),h.qZA())}function XK(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Phone number should be all numbers"),h.qZA())}function e6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Phone number is too short"),h.qZA())}function t6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Phone number is too long"),h.qZA())}function n6(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,JK,2,0,"small",14),h.YNc(2,XK,2,0,"small",14),h.YNc(3,e6,2,0,"small",14),h.YNc(4,t6,2,0,"small",14),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.phone.errors.required),h.xp6(1),h.Q6J("ngIf",t.phone.errors.pattern),h.xp6(1),h.Q6J("ngIf",t.phone.errors.minlength),h.xp6(1),h.Q6J("ngIf",t.phone.errors.maxlength)}}function r6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Password is required"),h.qZA())}function i6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Password is too short"),h.qZA())}function s6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Password is too long"),h.qZA())}function o6(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,r6,2,0,"small",14),h.YNc(2,i6,2,0,"small",14),h.YNc(3,s6,2,0,"small",14),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.password.errors.required),h.xp6(1),h.Q6J("ngIf",t.password.errors.minlength),h.xp6(1),h.Q6J("ngIf",t.password.errors.maxlength)}}function a6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Password is required"),h.qZA())}function l6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Password is too short"),h.qZA())}function u6(n,e){1&n&&(h.TgZ(0,"small",15),h._uU(1,"Password is too long"),h.qZA())}function c6(n,e){if(1&n&&(h.TgZ(0,"div"),h.YNc(1,a6,2,0,"small",14),h.YNc(2,l6,2,0,"small",14),h.YNc(3,u6,2,0,"small",14),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",t.confirmPassword.errors.required),h.xp6(1),h.Q6J("ngIf",t.confirmPassword.errors.minlength),h.xp6(1),h.Q6J("ngIf",t.confirmPassword.errors.maxlength)}}let wB=(()=>{class n{constructor(t,r,i,s,u){this.fb=t,this.authservice=r,this.router=i,this.db=s,this.userService=u,this.userList=s.list("users")}ngOnInit(){this.initRegisterForm()}uploadImage(t){const r=new FileReader;r.readAsDataURL(t.target.files[0]),r.onload=()=>{this.file=r.result,console.log(r.result)}}initRegisterForm(){this.registerForm=this.fb.group({firstName:new ss("",[xr.required,xr.minLength(3),xr.maxLength(15),xr.pattern("[a-zA-Z ]+")]),lastName:new ss("",[xr.required,xr.minLength(3),xr.maxLength(15),xr.pattern("[a-zA-Z ]+")]),email:new ss("",[xr.required,xr.email]),phone:new ss("",[xr.required,xr.pattern("[0-9]+"),xr.minLength(8),xr.maxLength(13)]),password:new ss("",[xr.required,xr.minLength(6)]),confirmPassword:new ss("",[xr.required,xr.minLength(6)])})}get email(){return this.registerForm?.get("email")}get password(){return this.registerForm?.get("password")}get firstName(){return this.registerForm?.get("firstName")}get lastName(){return this.registerForm?.get("lastName")}get phone(){return this.registerForm?.get("phone")}get confirmPassword(){return this.registerForm?.get("confirmPassword")}register(){const t=this.registerForm.get("email").value,r=this.registerForm.get("password").value;this.authservice.CreateNewUser(t,r).then(()=>{this.userService.createUser(new VK(this.email.value,this.firstName.value,this.lastName.value,this.phone.value,this.file)),this.router.navigate(["/"])},i=>{this.errorMessage=i,console.log(this.errorMessage)})}pushUser(){this.userList.push({email:this.email,firstname:this.firstName,lastname:this.lastName,phone:this.phone,sex:"male",profilePhoto:this.file}).then(r=>{this.router.navigate(["/"])}).catch(r=>{console.error(r)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(xA),h.Y36(cw),h.Y36(br),h.Y36(cy),h.Y36(PN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:7,consts:[[1,"login-page"],[1,"login-form"],[1,"user",3,"formGroup","ngSubmit"],[1,"p-field"],["formControlName","firstName","type","text","placeholder","First Name"],[4,"ngIf"],["formControlName","lastName","type","text","placeholder","Last Name"],["formControlName","email","type","email","placeholder","Email Address"],["formControlName","phone","type","text","placeholder","Phone Number"],["formControlName","password","type","password","placeholder","Password"],["formControlName","confirmPassword","type","password","placeholder","Repeat Password"],["formControlName","profilePhoto","type","file","placeholder","Profile Photo",3,"change"],[1,"butts"],["type","submit",1,"btn","btn-primary","btn-user","btn-block"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"h2"),h._uU(3,"Create an Account!"),h.qZA(),h.TgZ(4,"form",2),h.NdJ("ngSubmit",function(){return r.register()}),h.TgZ(5,"div",3),h._UZ(6,"input",4),h.YNc(7,$K,5,4,"div",5),h.qZA(),h.TgZ(8,"div",3),h._UZ(9,"input",6),h.YNc(10,KK,5,4,"div",5),h.qZA(),h.TgZ(11,"div",3),h._UZ(12,"input",7),h.YNc(13,QK,3,2,"div",5),h.qZA(),h.TgZ(14,"div",3),h._UZ(15,"input",8),h.YNc(16,n6,5,4,"div",5),h.qZA(),h.TgZ(17,"div",3),h._UZ(18,"input",9),h.YNc(19,o6,4,3,"div",5),h.qZA(),h.TgZ(20,"div",3),h._UZ(21,"input",10),h.YNc(22,c6,4,3,"div",5),h.qZA(),h.TgZ(23,"div",3)(24,"input",11),h.NdJ("change",function(s){return r.uploadImage(s)}),h.qZA()(),h.TgZ(25,"div",12)(26,"button",13),h._uU(27,"Register Account"),h.qZA()()()()()),2&t&&(h.xp6(4),h.Q6J("formGroup",r.registerForm),h.xp6(3),h.Q6J("ngIf",r.firstName.touched&&r.firstName.invalid),h.xp6(3),h.Q6J("ngIf",r.lastName.touched&&r.lastName.invalid),h.xp6(3),h.Q6J("ngIf",r.email.touched&&r.email.invalid),h.xp6(3),h.Q6J("ngIf",r.phone.touched&&r.phone.invalid),h.xp6(3),h.Q6J("ngIf",r.password.touched&&r.password.invalid),h.xp6(3),h.Q6J("ngIf",r.confirmPassword.touched&&r.confirmPassword.invalid))},dependencies:[zn,Cv,bs,Cs,Af,am,um],styles:[".login-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-size:cover;background-position:center}.login-form[_ngcontent-%COMP%]{width:300px;margin-top:100px;background-color:#fff8c9;border-radius:3%;box-shadow:0 0 20px #00000080;opacity:.9;display:flex;flex-direction:column;align-items:center;padding:10px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#e74900}.p-field[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:#fff}input[_ngcontent-%COMP%]{width:100%;padding:8px}button[_ngcontent-%COMP%]{background-color:#beadfa;width:100%;justify-content:center;align-items:center;padding:10px;text-align:center;display:inline-block;margin-bottom:10px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px}.butts[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px;flex-wrap:wrap;border-radius:3px}"]}),n})();function d6(n,e){1&n&&h._UZ(0,"app-messaging",5),2&n&&h.Q6J("receiver",e.$implicit)}const h6=[{path:"register",component:wB},{path:"messaging",component:vB},{path:"",component:oC},{path:"register",component:wB},{path:"desktop",component:(()=>{class n{constructor(t,r,i){this.userService=t,this.auth=r,this.sanitizer=i,this.tabs=[]}ngOnInit(){this.getProfilePhoto()}getProfilePhoto(){this.auth.currentUser.subscribe(t=>{console.log("current email: "+t.email),this.userService.getUserByEmail(t.email).subscribe(r=>{console.log(r),console.log(r[0].data.profilePhoto),this.profilePhotoUrl=r[0].data.profilePhoto})})}addTab(t){this.userService.getUserByEmail(t).subscribe(r=>{r?(console.log(r),this.tabs.push(r[0].data.email)):console.log("user not found")}),this.userToAdd=""}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(PN),h.Y36(cw),h.Y36(ba))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-desktop"]],decls:6,vars:3,consts:[[1,"desk"],["id","profilePhoto","alt","",3,"src"],["label","Add",3,"click"],["type","text","pInputText","",3,"ngModel","ngModelChange","keydown.enter"],[3,"receiver",4,"ngFor","ngForOf"],[3,"receiver"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"img",1),h.TgZ(2,"p-button",2),h.NdJ("click",function(){return r.addTab(r.userToAdd)}),h.qZA(),h.TgZ(3,"div")(4,"input",3),h.NdJ("ngModelChange",function(s){return r.userToAdd=s})("keydown.enter",function(){return r.addTab(r.userToAdd)}),h.qZA()(),h.YNc(5,d6,1,1,"app-messaging",4),h.qZA()),2&t&&(h.xp6(1),h.Q6J("src",r.profilePhotoUrl,h.LSH),h.xp6(3),h.Q6J("ngModel",r.userToAdd),h.xp6(1),h.Q6J("ngForOf",r.tabs))},dependencies:[fs,bs,Cs,Of,Pm,Nm,vB],styles:[".desk[_ngcontent-%COMP%]{display:flex}#profilePhoto[_ngcontent-%COMP%]{position:absolute;width:100px;height:100px;border-radius:50%;margin-left:94%}"]}),n})()}];let f6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Yy.forRoot(h6),Yy]}),n})(),p6=(()=>{class n{constructor(t){this.db=t,this.title="the_project",this.message=""}ngOnInit(){this.db.list("items").valueChanges().subscribe(r=>{this.data=r})}slurp(){return(0,De.Z)(function*(){const r=(yield fetch("https://api.github.com/users/github")).json();console.log(r)})()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cy))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Ly]}),n})();var g6=V(8247);class jN{constructor(e){return e}}class IB{constructor(){return(0,Qt.vb)("auth")}}const $N=new h.OlP("angularfire2.auth-instances");function _6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new jN(r)}}const y6={provide:IB,deps:[[new h.FiY,$N]]},v6={provide:jN,useFactory:function m6(n,e){const t=(0,Qt.JM)("auth",n,e);return t&&new jN(t)},deps:[[new h.FiY,$N],Oo]};let w6=(()=>{class n{constructor(){(0,Ts.KN)("angularfire",Qt.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[v6,y6]}),n})();function E6(n,...e){return{ngModule:w6,providers:[{provide:$N,useFactory:_6(n),multi:!0,deps:[h.R0b,h.zs3,Qt.HU,Du,[new h.FiY,Zd],...e]}]}}const I6=(0,Qt.u3)(g6.n,!0);class WN{constructor(e){return e}}const bB="database",GN=new h.OlP("angularfire2.database-instances");function D6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new WN(r)}}const T6={provide:class b6{constructor(){return(0,Qt.vb)(bB)}},deps:[[new h.FiY,GN]]},S6={provide:WN,useFactory:function C6(n,e){const t=(0,Qt.JM)(bB,n,e);return t&&new WN(t)},deps:[[new h.FiY,GN],Oo]};let A6=(()=>{class n{constructor(){(0,Ts.KN)("angularfire",Qt.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[S6,T6]}),n})();function R6(n,...e){return{ngModule:A6,providers:[{provide:GN,useFactory:D6(n),multi:!0,deps:[h.R0b,h.zs3,Qt.HU,Du,[new h.FiY,IB],[new h.FiY,Zd],...e]}]}}const x6=(0,Qt.u3)(A3,!0);function CB(n){return new h.vHH(3e3,!1)}function d4(){return typeof window<"u"&&typeof window.document<"u"}function zN(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Nh(n){switch(n.length){case 0:return new Yd;case 1:return n[0];default:return new Xf(n)}}function DB(n,e,t,r,i=new Map,s=new Map){const u=[],d=[];let p=-1,y=null;if(r.forEach(b=>{const T=b.get("offset"),x=T==p,F=x&&y||new Map;b.forEach((j,ne)=>{let de=ne,qe=j;if("offset"!==ne)switch(de=e.normalizePropertyName(de,u),qe){case"!":qe=i.get(ne);break;case Ss:qe=s.get(ne);break;default:qe=e.normalizeStyleValue(ne,de,qe,u)}F.set(de,qe)}),x||d.push(F),y=F,p=T}),u.length)throw function X6(n){return new h.vHH(3502,!1)}();return d}function qN(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&KN(t,"start",n)));break;case"done":n.onDone(()=>r(t&&KN(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&KN(t,"destroy",n)))}}function KN(n,e,t){const s=ZN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function ZN(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function zo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function TB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let YN=(n,e)=>!1,SB=(n,e,t)=>[],AB=null;function QN(n){const e=n.parentNode||n.host;return e===AB?null:e}(zN()||typeof Element<"u")&&(d4()?(AB=(()=>document.documentElement)(),YN=(n,e)=>{for(;e;){if(e===n)return!0;e=QN(e)}return!1}):YN=(n,e)=>n.contains(e),SB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let tg=null,RB=!1;const xB=YN,MB=SB;let PB=(()=>{class n{validateStyleProperty(t){return function f4(n){tg||(tg=function p4(){return typeof document<"u"?document.body:null}()||{},RB=!!tg.style&&"WebkitAppearance"in tg.style);let e=!0;return tg.style&&!function h4(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in tg.style,!e&&RB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in tg.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return xB(t,r)}getParentElement(t){return QN(t)}query(t,r,i){return MB(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,d=[],p){return new Yd(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),JN=(()=>{class n{}return n.NOOP=new PB,n})();const XN="ng-enter",kT="ng-leave",OT="ng-trigger",LT=".ng-trigger",kB="ng-animating",ek=".ng-animating";function Xc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tk(parseFloat(e[1]),e[2])}function tk(n,e){return"s"===e?1e3*n:n}function FT(n,e,t){return n.hasOwnProperty("duration")?n:function _4(n,e,t){let i,s=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(CB()),{duration:0,delay:0,easing:""};i=tk(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=tk(parseFloat(p),d[4]));const y=d[5];y&&(u=y)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function M6(){return new h.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function P6(){return new h.vHH(3101,!1)}()),d=!0),d&&e.splice(p,0,CB())}return{duration:i,delay:s,easing:u}}(n,e,t)}function B0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function OB(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function kh(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function FB(n,e,t){return t?e+":"+t+";":""}function VB(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=FB(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=FB(0,E4(t),n.style[t]));n.setAttribute("style",e)}function Uu(n,e,t){n.style&&(e.forEach((r,i)=>{const s=rk(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),zN()&&VB(n))}function ng(n,e){n.style&&(e.forEach((t,r)=>{const i=rk(r);n.style[i]=""}),zN()&&VB(n))}function H0(n){return Array.isArray(n)?1==n.length?n[0]:pw(n):n}const nk=new RegExp("{{\\s*(.+?)\\s*}}","g");function UB(n){let e=[];if("string"==typeof n){let t;for(;t=nk.exec(n);)e.push(t[1]);nk.lastIndex=0}return e}function j0(n,e,t){const r=n.toString(),i=r.replace(nk,(s,u)=>{let d=e[u];return null==d&&(t.push(function k6(n){return new h.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function VT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const w4=/-+([a-z0-9])/g;function rk(n){return n.replace(w4,(...e)=>e[1].toUpperCase())}function E4(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function qo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function O6(n){return new h.vHH(3004,!1)}()}}function BB(n,e){return window.getComputedStyle(n)[e]}function S4(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function A4(n,e,t){if(":"==n[0]){const p=function R4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Z6(n){return new h.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function K6(n){return new h.vHH(3015,!1)}()),e;const i=r[1],s=r[2],u=r[3];e.push(HB(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(HB(u,i))}(r,t,e)):t.push(n),t}const jT=new Set(["true","1"]),$T=new Set(["false","0"]);function HB(n,e){const t=jT.has(n)||$T.has(n),r=jT.has(e)||$T.has(e);return(i,s)=>{let u="*"==n||n==i,d="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?jT.has(n):$T.has(n)),!d&&r&&"boolean"==typeof s&&(d=s?jT.has(e):$T.has(e)),u&&d}}const x4=new RegExp("s*:selfs*,?","g");function ik(n,e,t,r){return new M4(n).build(e,t,r)}class M4{constructor(e){this._driver=e}build(e,t,r){const i=new k4(t);return this._resetContextStyleTimingState(i),qo(this,H0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function F6(){return new h.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push(function V6(){return new h.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{UB(p).forEach(y=>{u.hasOwnProperty(y)||s.add(y)})})}),s.size&&(VT(s.values()),t.errors.push(function U6(n,e){return new h.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=qo(this,H0(e.animation),t);return{type:1,matchers:S4(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:rg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>qo(this,r,t)),options:rg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const d=qo(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:s,options:rg(e.options)}}visitAnimate(e,t){const r=function L4(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return sk(FT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=sk(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=FT(t,e);return sk(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Jf({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,d=!1;if(!u){d=!0;const y={};r.easing&&(y.easing=r.easing),u=Jf(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===Ss?r.push(d):t.errors.push(new h.vHH(3002,!1)):r.push(OB(d));let s=!1,u=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(u=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((d,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),b=y.get(p);let T=!0;b&&(s!=i&&s>=b.startTime&&i<=b.endTime&&(t.errors.push(function H6(n,e,t,r,i){return new h.vHH(3010,!1)}()),T=!1),s=b.startTime),T&&y.set(p,{startTime:s,endTime:i}),t.options&&function v4(n,e,t){const r=e.params||{},i=UB(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function N6(n){return new h.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function j6(){return new h.vHH(3011,!1)}()),r;let s=0;const u=[];let d=!1,p=!1,y=0;const b=e.steps.map(qe=>{const tt=this._makeStyleAst(qe,t);let ct=null!=tt.offset?tt.offset:function O4(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(tt.styles),ht=0;return null!=ct&&(s++,ht=tt.offset=ct),p=p||ht<0||ht>1,d=d||ht<y,y=ht,u.push(ht),tt});p&&t.errors.push(function $6(){return new h.vHH(3012,!1)}()),d&&t.errors.push(function W6(){return new h.vHH(3200,!1)}());const T=e.steps.length;let x=0;s>0&&s<T?t.errors.push(function G6(){return new h.vHH(3202,!1)}()):0==s&&(x=1/(T-1));const F=T-1,j=t.currentTime,ne=t.currentAnimateTimings,de=ne.duration;return b.forEach((qe,tt)=>{const ct=x>0?tt==F?1:x*tt:u[tt],ht=ct*de;t.currentTime=j+ne.delay+ht,ne.duration=ht,this._validateStyleAst(qe,t),qe.offset=ct,r.styles.push(qe)}),r}visitReference(e,t){return{type:8,animation:qo(this,H0(e.animation),t),options:rg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:rg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:rg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function P4(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(x4,"")),n=n.replace(/@\*/g,LT).replace(/@\w+/g,t=>LT+"-"+t.slice(1)).replace(/:animating/g,ek),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,zo(t.collectedStyles,t.currentQuerySelector,new Map);const d=qo(this,H0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:rg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function z6(){return new h.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:FT(e.timings,t.errors,!0);return{type:12,animation:qo(this,H0(e.animation),t),timings:r,options:null}}}class k4{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function rg(n){return n?(n=B0(n)).params&&(n.params=function N4(n){return n?B0(n):null}(n.params)):n={},n}function sk(n,e,t){return{duration:n,delay:e,easing:t}}function ok(n,e,t,r,i,s,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:d}}class WT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const U4=new RegExp(":enter","g"),H4=new RegExp(":leave","g");function ak(n,e,t,r,i,s=new Map,u=new Map,d,p,y=[]){return(new j4).buildKeyframes(n,e,t,r,i,s,u,d,p,y)}class j4{buildKeyframes(e,t,r,i,s,u,d,p,y,b=[]){y=y||new WT;const T=new lk(e,t,y,i,s,b,[]);T.options=p;const x=p.delay?Xc(p.delay):0;T.currentTimeline.delayNextStep(x),T.currentTimeline.setStyles([u],null,T.errors,p),qo(this,r,T);const F=T.timelines.filter(j=>j.containsAnimation());if(F.length&&d.size){let j;for(let ne=F.length-1;ne>=0;ne--){const de=F[ne];if(de.element===t){j=de;break}}j&&!j.allowOnlyTimelineStyles()&&j.setStyles([d],null,T.errors,p)}return F.length?F.map(j=>j.buildKeyframes()):[ok(t,[],[],[],0,x,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const u="number"==typeof s?s:Xc(j0(s,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?Xc(r.duration):null,d=null!=r.delay?Xc(r.delay):null;return 0!==u&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,u,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),qo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=GT);const u=Xc(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>qo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Xc(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),qo(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return FT(t.params?j0(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Xc(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=GT);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,b)=>{t.currentQueryIndex=b;const T=t.createSubContext(e.options,y);s&&T.delayNextStep(s),y===t.element&&(p=T.currentTimeline),qo(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),d=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const b=t.currentTimeline;p&&b.delayNextStep(p);const T=b.currentTime;qo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const GT={};class lk{constructor(e,t,r,i,s,u,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=GT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new zT(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Xc(r.duration)),null!=r.delay&&(i.delay=Xc(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=j0(s[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new lk(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=GT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new $4(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(U4,"."+this._enterClassName)).replace(H4,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!s&&0==d.length&&u.push(function q6(n){return new h.vHH(3014,!1)}()),d}}class zT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new zT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ss),this._currentKeyframe.set(t,Ss);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},u=function W4(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,Ss)}else kh(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,p]of u){const y=j0(p,s,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Ss),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const y=kh(d,new Map,this._backFill);y.forEach((b,T)=>{"!"===b?e.add(T):b===Ss&&t.add(T)}),r||y.set("offset",p/this.duration),i.push(y)});const s=e.size?VT(e.values()):[],u=t.size?VT(t.values()):[];if(r){const d=i[0],p=new Map(d);d.set("offset",0),p.set("offset",1),i=[d,p]}return ok(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class $4 extends zT{constructor(e,t,r,i,s,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,d=t/u,p=kh(e[0]);p.set("offset",0),s.push(p);const y=kh(e[0]);y.set("offset",WB(d)),s.push(y);const b=e.length-1;for(let T=1;T<=b;T++){let x=kh(e[T]);const F=x.get("offset");x.set("offset",WB((t+F*r)/u)),s.push(x)}r=u,t=0,i="",e=s}return ok(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function WB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class uk{}const G4=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class z4 extends uk{normalizePropertyName(e,t){return rk(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(G4.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function L6(n,e){return new h.vHH(3005,!1)}())}return u+s}}function GB(n,e,t,r,i,s,u,d,p,y,b,T,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:b,totalTime:T,errors:x}}const ck={};class zB{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function q4(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,u,d,p,y,b){const T=[],x=this.ast.options&&this.ast.options.params||ck,j=this.buildStyles(r,d&&d.params||ck,T),ne=p&&p.params||ck,de=this.buildStyles(i,ne,T),qe=new Set,tt=new Map,ct=new Map,ht="void"===i,Pt={params:K4(ne,x),delay:this.ast.options?.delay},Ut=b?[]:ak(e,t,this.ast.animation,s,u,j,de,Pt,y,T);let wn=0;if(Ut.forEach(ed=>{wn=Math.max(ed.duration+ed.delay,wn)}),T.length)return GB(t,this._triggerName,r,i,ht,j,de,[],[],tt,ct,wn,T);Ut.forEach(ed=>{const td=ed.element,l2=zo(tt,td,new Set);ed.preStyleProps.forEach(ig=>l2.add(ig));const W0=zo(ct,td,new Set);ed.postStyleProps.forEach(ig=>W0.add(ig)),td!==t&&qe.add(td)});const Fs=VT(qe.values());return GB(t,this._triggerName,r,i,ht,j,de,Ut,Fs,tt,ct,wn)}}function K4(n,e){const t=B0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Z4{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=B0(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!==u&&(i[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,d)=>{u&&(u=j0(u,i,t));const p=this.normalizer.normalizePropertyName(d,t);u=this.normalizer.normalizeStyleValue(d,p,u,t),r.set(p,u)})}),r}}class Q4{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Z4(i.style,i.options&&i.options.params||{},r))}),qB(this.states,"true","1"),qB(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new zB(e,i,this.states))}),this.fallbackTransition=function J4(n,e,t){return new zB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function qB(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const X4=new WT;class eZ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=ik(this._driver,t,r,[]);if(r.length)throw function e4(n){return new h.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=DB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let u;const d=new Map;if(s?(u=ak(this._driver,t,s,XN,kT,new Map,new Map,r,X4,i),u.forEach(b=>{const T=zo(d,b.element,new Map);b.postStyleProps.forEach(x=>T.set(x,null))})):(i.push(function t4(){return new h.vHH(3300,!1)}()),u=[]),i.length)throw function n4(n){return new h.vHH(3504,!1)}();d.forEach((b,T)=>{b.forEach((x,F)=>{b.set(F,this._driver.computeStyle(T,F,Ss))})});const y=Nh(u.map(b=>{const T=d.get(b.element);return this._buildPlayer(b,new Map,T)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function r4(n){return new h.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=ZN(t,"","","");return qN(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const KB="ng-animate-queued",dk="ng-animate-disabled",sZ=[],ZB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},oZ={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$a="__ng_removed";class hk{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function cZ(n){return n??null}(r?e.value:e),r){const s=B0(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const $0="void",fk=new hk($0);class aZ{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function i4(n,e){return new h.vHH(3302,!1)}();if(null==r||0==r.length)throw function s4(n){return new h.vHH(3303,!1)}();if(!function dZ(n){return"start"==n||"done"==n}(r))throw function o4(n,e){return new h.vHH(3400,!1)}();const s=zo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const d=zo(this._engine.statesByElement,e,new Map);return d.has(t)||(Wa(e,OT),Wa(e,OT+"-"+t),d.set(t,fk)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function a4(n){return new h.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new pk(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Wa(e,OT),Wa(e,OT+"-"+t),this._engine.statesByElement.set(e,d=new Map));let p=d.get(t);const y=new hk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d.set(t,y),p||(p=fk),y.value!==$0&&p.value===y.value){if(!function pZ(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const ne=[],de=s.matchStyles(p.value,p.params,ne),qe=s.matchStyles(y.value,y.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{ng(e,de),Uu(e,qe)})}return}const x=zo(this._engine.playersByElement,e,[]);x.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let F=s.matchTransition(p.value,y.value,e,y.params),j=!1;if(!F){if(!i)return;F=s.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:F,fromState:p,toState:y,player:u,isFallbackTransition:j}),j||(Wa(e,KB),u.onStart(()=>{py(e,KB)})),u.onDone(()=>{let ne=this.players.indexOf(u);ne>=0&&this.players.splice(ne,1);const de=this._engine.playersByElement.get(e);if(de){let qe=de.indexOf(u);qe>=0&&de.splice(qe,1)}}),this.players.push(u),x.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,LT,!0);r.forEach(i=>{if(i[$a])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const d=[];if(s.forEach((p,y)=>{if(u.set(y,p.value),this._triggers.has(y)){const b=this.trigger(e,y,$0,i);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Nh(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const p=this._triggers.get(u).fallbackTransition,y=r.get(u)||fk,b=new hk($0),T=new pk(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:y,toState:b,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[$a];(!s||s===ZB)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Wa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(d=>{if(d.name==r.triggerName){const p=ZN(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,qN(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class lZ{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new aZ(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(qT(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!qT(t))return;const s=t[$a];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wa(e,dk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),py(e,dk))}removeNode(e,t,r,i){if(qT(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[$a]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return qT(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,LT,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ek,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Nh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[$a];if(t&&t.setForRemoval){if(e[$a]=ZB,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(dk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Wa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Nh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function l4(n){return new h.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new WT,i=[],s=new Map,u=[],d=new Map,p=new Map,y=new Map,b=new Set;this.disabledNodes.forEach(bt=>{b.add(bt);const Nt=this.driver.query(bt,".ng-animate-queued",!0);for(let qt=0;qt<Nt.length;qt++)b.add(Nt[qt])});const T=this.bodyNode,x=Array.from(this.statesByElement.keys()),F=JB(x,this.collectedEnterElements),j=new Map;let ne=0;F.forEach((bt,Nt)=>{const qt=XN+ne++;j.set(Nt,qt),bt.forEach(Rn=>Wa(Rn,qt))});const de=[],qe=new Set,tt=new Set;for(let bt=0;bt<this.collectedLeaveElements.length;bt++){const Nt=this.collectedLeaveElements[bt],qt=Nt[$a];qt&&qt.setForRemoval&&(de.push(Nt),qe.add(Nt),qt.hasAnimation?this.driver.query(Nt,".ng-star-inserted",!0).forEach(Rn=>qe.add(Rn)):tt.add(Nt))}const ct=new Map,ht=JB(x,Array.from(qe));ht.forEach((bt,Nt)=>{const qt=kT+ne++;ct.set(Nt,qt),bt.forEach(Rn=>Wa(Rn,qt))}),e.push(()=>{F.forEach((bt,Nt)=>{const qt=j.get(Nt);bt.forEach(Rn=>py(Rn,qt))}),ht.forEach((bt,Nt)=>{const qt=ct.get(Nt);bt.forEach(Rn=>py(Rn,qt))}),de.forEach(bt=>{this.processLeaveNode(bt)})});const Pt=[],Ut=[];for(let bt=this._namespaceList.length-1;bt>=0;bt--)this._namespaceList[bt].drainQueuedTransitions(t).forEach(qt=>{const Rn=qt.player,Fi=qt.element;if(Pt.push(Rn),this.collectedEnterElements.length){const cs=Fi[$a];if(cs&&cs.setForMove){if(cs.previousTriggersValues&&cs.previousTriggersValues.has(qt.triggerName)){const sg=cs.previousTriggersValues.get(qt.triggerName),Ga=this.statesByElement.get(qt.element);if(Ga&&Ga.has(qt.triggerName)){const YT=Ga.get(qt.triggerName);YT.value=sg,Ga.set(qt.triggerName,YT)}}return void Rn.destroy()}}const Bu=!T||!this.driver.containsElement(T,Fi),Ko=ct.get(Fi),Oh=j.get(Fi),Vr=this._buildInstruction(qt,r,Oh,Ko,Bu);if(Vr.errors&&Vr.errors.length)return void Ut.push(Vr);if(Bu)return Rn.onStart(()=>ng(Fi,Vr.fromStyles)),Rn.onDestroy(()=>Uu(Fi,Vr.toStyles)),void i.push(Rn);if(qt.isFallbackTransition)return Rn.onStart(()=>ng(Fi,Vr.fromStyles)),Rn.onDestroy(()=>Uu(Fi,Vr.toStyles)),void i.push(Rn);const d2=[];Vr.timelines.forEach(cs=>{cs.stretchStartingKeyframe=!0,this.disabledNodes.has(cs.element)||d2.push(cs)}),Vr.timelines=d2,r.append(Fi,Vr.timelines),u.push({instruction:Vr,player:Rn,element:Fi}),Vr.queriedElements.forEach(cs=>zo(d,cs,[]).push(Rn)),Vr.preStyleProps.forEach((cs,sg)=>{if(cs.size){let Ga=p.get(sg);Ga||p.set(sg,Ga=new Set),cs.forEach((YT,_k)=>Ga.add(_k))}}),Vr.postStyleProps.forEach((cs,sg)=>{let Ga=y.get(sg);Ga||y.set(sg,Ga=new Set),cs.forEach((YT,_k)=>Ga.add(_k))})});if(Ut.length){const bt=[];Ut.forEach(Nt=>{bt.push(function u4(n,e){return new h.vHH(3505,!1)}())}),Pt.forEach(Nt=>Nt.destroy()),this.reportError(bt)}const wn=new Map,Fs=new Map;u.forEach(bt=>{const Nt=bt.element;r.has(Nt)&&(Fs.set(Nt,Nt),this._beforeAnimationBuild(bt.player.namespaceId,bt.instruction,wn))}),i.forEach(bt=>{const Nt=bt.element;this._getPreviousPlayers(Nt,!1,bt.namespaceId,bt.triggerName,null).forEach(Rn=>{zo(wn,Nt,[]).push(Rn),Rn.destroy()})});const ed=de.filter(bt=>e2(bt,p,y)),td=new Map;QB(td,this.driver,tt,y,Ss).forEach(bt=>{e2(bt,p,y)&&ed.push(bt)});const W0=new Map;F.forEach((bt,Nt)=>{QB(W0,this.driver,new Set(bt),p,"!")}),ed.forEach(bt=>{const Nt=td.get(bt),qt=W0.get(bt);td.set(bt,new Map([...Array.from(Nt?.entries()??[]),...Array.from(qt?.entries()??[])]))});const ig=[],u2=[],c2={};u.forEach(bt=>{const{element:Nt,player:qt,instruction:Rn}=bt;if(r.has(Nt)){if(b.has(Nt))return qt.onDestroy(()=>Uu(Nt,Rn.toStyles)),qt.disabled=!0,qt.overrideTotalTime(Rn.totalTime),void i.push(qt);let Fi=c2;if(Fs.size>1){let Ko=Nt;const Oh=[];for(;Ko=Ko.parentNode;){const Vr=Fs.get(Ko);if(Vr){Fi=Vr;break}Oh.push(Ko)}Oh.forEach(Vr=>Fs.set(Vr,Fi))}const Bu=this._buildAnimation(qt.namespaceId,Rn,wn,s,W0,td);if(qt.setRealPlayer(Bu),Fi===c2)ig.push(qt);else{const Ko=this.playersByElement.get(Fi);Ko&&Ko.length&&(qt.parentPlayer=Nh(Ko)),i.push(qt)}}else ng(Nt,Rn.fromStyles),qt.onDestroy(()=>Uu(Nt,Rn.toStyles)),u2.push(qt),b.has(Nt)&&i.push(qt)}),u2.forEach(bt=>{const Nt=s.get(bt.element);if(Nt&&Nt.length){const qt=Nh(Nt);bt.setRealPlayer(qt)}}),i.forEach(bt=>{bt.parentPlayer?bt.syncPlayerEvents(bt.parentPlayer):bt.destroy()});for(let bt=0;bt<de.length;bt++){const Nt=de[bt],qt=Nt[$a];if(py(Nt,kT),qt&&qt.hasAnimation)continue;let Rn=[];if(d.size){let Bu=d.get(Nt);Bu&&Bu.length&&Rn.push(...Bu);let Ko=this.driver.query(Nt,ek,!0);for(let Oh=0;Oh<Ko.length;Oh++){let Vr=d.get(Ko[Oh]);Vr&&Vr.length&&Rn.push(...Vr)}}const Fi=Rn.filter(Bu=>!Bu.destroyed);Fi.length?hZ(this,Nt,Fi):this.processLeaveNode(Nt)}return de.length=0,ig.forEach(bt=>{this.players.push(bt),bt.onDone(()=>{bt.destroy();const Nt=this.players.indexOf(bt);this.players.splice(Nt,1)}),bt.play()}),ig}elementContainsData(e,t){let r=!1;const i=t[$a];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==$0;d.forEach(y=>{y.queued||!p&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,b=y!==s,T=zo(r,y,[]);this._getPreviousPlayers(y,b,u,d,t.toState).forEach(F=>{const j=F.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),F.destroy(),T.push(F)})}ng(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const d=t.triggerName,p=t.element,y=[],b=new Set,T=new Set,x=t.timelines.map(j=>{const ne=j.element;b.add(ne);const de=ne[$a];if(de&&de.removedBeforeQueried)return new Yd(j.duration,j.delay);const qe=ne!==p,tt=function fZ(n){const e=[];return XB(n,e),e}((r.get(ne)||sZ).map(wn=>wn.getRealPlayer())).filter(wn=>!!wn.element&&wn.element===ne),ct=s.get(ne),ht=u.get(ne),Pt=DB(0,this._normalizer,0,j.keyframes,ct,ht),Ut=this._buildPlayer(j,Pt,tt);if(j.subTimeline&&i&&T.add(ne),qe){const wn=new pk(e,d,ne);wn.setRealPlayer(Ut),y.push(wn)}return Ut});y.forEach(j=>{zo(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function uZ(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,j.element,j))}),b.forEach(j=>Wa(j,kB));const F=Nh(x);return F.onDestroy(()=>{b.forEach(j=>py(j,kB)),Uu(p,t.toStyles)}),T.forEach(j=>{zo(i,j,[]).push(F)}),F}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Yd(e.duration,e.delay)}}class pk{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Yd,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>qN(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){zo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qT(n){return n&&1===n.nodeType}function YB(n,e){const t=n.style.display;return n.style.display=e??"none",t}function QB(n,e,t,r,i){const s=[];t.forEach(p=>s.push(YB(p)));const u=[];r.forEach((p,y)=>{const b=new Map;p.forEach(T=>{const x=e.computeStyle(y,T,i);b.set(T,x),(!x||0==x.length)&&(y[$a]=oZ,u.push(y))}),n.set(y,b)});let d=0;return t.forEach(p=>YB(p,s[d++])),u}function JB(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:i.has(y)?1:u(y),s.set(d,p),p}return e.forEach(d=>{const p=u(d);1!==p&&t.get(p).push(d)}),t}function Wa(n,e){n.classList?.add(e)}function py(n,e){n.classList?.remove(e)}function hZ(n,e,t){Nh(t).onDone(()=>n.processLeaveNode(e))}function XB(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Xf?XB(r.players,e):e.push(r)}}function e2(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class KT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new lZ(e,t,r),this._timelineEngine=new eZ(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const p=[],b=ik(this._driver,s,p,[]);if(p.length)throw function J6(n,e){return new h.vHH(3404,!1)}();d=function Y4(n,e,t){return new Q4(n,e,t)}(i,b,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=TB(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,d]=TB(r);return this._timelineEngine.listen(u,t,d,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let mZ=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Uu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Uu(this._element,this._initialStyles),this._endStyles&&(Uu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ng(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ng(this._element,this._endStyles),this._endStyles=null),Uu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function gk(n){let e=null;return n.forEach((t,r)=>{(function _Z(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class t2{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:BB(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class yZ{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return xB(e,t)}getParentElement(e){return QN(e)}query(e,t,r){return MB(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,u=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const y=new Map,b=u.filter(F=>F instanceof t2);(function I4(n,e){return 0===n||0===e})(r,i)&&b.forEach(F=>{F.currentSnapshot.forEach((j,ne)=>y.set(ne,j))});let T=function y4(n){return n.length?n[0]instanceof Map?n:n.map(e=>OB(e)):[]}(t).map(F=>kh(F));T=function b4(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,u)=>{r.has(u)||i.push(u),r.set(u,s)}),i.length)for(let s=1;s<e.length;s++){let u=e[s];i.forEach(d=>u.set(d,BB(n,d)))}}return e}(e,T,y);const x=function gZ(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=gk(e[0]),e.length>1&&(r=gk(e[e.length-1]))):e instanceof Map&&(t=gk(e)),t||r?new mZ(n,t,r):null}(e,T);return new t2(e,T,p,x)}}let vZ=(()=>{class n extends eC{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?pw(t):t;return n2(this._renderer,null,r,"register",[i]),new wZ(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(ge))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class wZ extends class Qf{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new EZ(this._id,e,t||{},this._renderer)}}class EZ{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return n2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function n2(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const r2="@.disabled";let IZ=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const d=u?.parentNode(s);d&&u.removeChild(d,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let b=this._rendererCache.get(s);return b||(b=new s2("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,b)),b}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(u,d,t,b.name,b)};return r.data.animation.forEach(p),new bZ(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,d]=s;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(KT),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class s2{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==r2?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class bZ extends s2{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==r2?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function CZ(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function DZ(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let TZ=(()=>{class n extends KT{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(JN),h.LFG(uk),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const o2=[{provide:eC,useClass:vZ},{provide:uk,useFactory:function SZ(){return new z4}},{provide:KT,useClass:TZ},{provide:h.FYo,useFactory:function AZ(n,e,t){return new IZ(n,e,t)},deps:[ul,KT,h.R0b]}],mk=[{provide:JN,useFactory:()=>new yZ},{provide:h.QbO,useValue:"BrowserAnimations"},...o2],a2=[{provide:JN,useClass:PB},{provide:h.QbO,useValue:"NoopAnimations"},...o2];let RZ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?a2:mk}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:mk,imports:[Io]}),n})(),xZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[p6]}),n.\u0275inj=h.cJS({imports:[Io,jr.hO.initializeApp(mm_firebase),lq,f6,RA,Eb,Xb,RZ,fw,xR,NK,Sb(()=>Ab(mm_firebase)),E6(()=>I6()),R6(()=>x6())]}),n})();(0,h.G48)(),fl().bootstrapModule(xZ).catch(n=>console.error(n))},5867:(gt,xe,V)=>{V.d(xe,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=V(9681);(0,h.registerVersion)("firebase","9.14.0","app")},127:(gt,xe,V)=>{V.d(xe,{Z:()=>h.Z});var h=V(3942);h.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(gt,xe,V)=>{V.r(xe);var h=V(5861),G=V(3942),O=V(8247),le=V(2090),ge=(V(9681),V(1877),V(4859));function me(){return window}function q(){return(q=(0,h.Z)(function*(W,N,H){var se;const{BuildInfo:Fe}=me();(0,O.ap)(N.sessionId,"AuthEvent did not contain a session ID");const lt=yield ve(N.sessionId),ut={};return(0,O.aq)()?ut.ibi=Fe.packageName:(0,O.ar)()?ut.apn=Fe.packageName:(0,O.as)(W,"operation-not-supported-in-this-environment"),Fe.displayName&&(ut.appDisplayName=Fe.displayName),ut.sessionId=lt,(0,O.at)(W,H,N.type,void 0,null!==(se=N.eventId)&&void 0!==se?se:void 0,ut)})).apply(this,arguments)}function Ge(){return(Ge=(0,h.Z)(function*(W){const{BuildInfo:N}=me(),H={};(0,O.aq)()?H.iosBundleId=N.packageName:(0,O.ar)()?H.androidPackageName=N.packageName:(0,O.as)(W,"operation-not-supported-in-this-environment"),yield(0,O.au)(W,H)})).apply(this,arguments)}function ot(){return(ot=(0,h.Z)(function*(W,N,H){const{cordova:se}=me();let Fe=()=>{};try{yield new Promise((lt,ut)=>{let Me=null;function Be(){var Ht;lt();const bn=null===(Ht=se.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof bn&&bn(),"function"==typeof H?.close&&H.close()}function Ot(){Me||(Me=window.setTimeout(()=>{ut((0,O.aw)(W,"redirect-cancelled-by-user"))},2e3))}function In(){"visible"===document?.visibilityState&&Ot()}N.addPassiveListener(Be),document.addEventListener("resume",Ot,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",In,!1),Fe=()=>{N.removePassiveListener(Be),document.removeEventListener("resume",Ot,!1),document.removeEventListener("visibilitychange",In,!1),Me&&window.clearTimeout(Me)}})}finally{Fe()}})).apply(this,arguments)}function ve(W){return nt.apply(this,arguments)}function nt(){return(nt=(0,h.Z)(function*(W){const N=Je(W),H=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(H)).map(Fe=>Fe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Je(W){if((0,O.ap)(/[0-9a-zA-Z]+/.test(W),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(W);const N=new ArrayBuffer(W.length),H=new Uint8Array(N);for(let se=0;se<W.length;se++)H[se]=W.charCodeAt(se);return H}class ke extends O.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(N)),super.onEvent(N)}initialized(){var N=this;return(0,h.Z)(function*(){yield N.initPromise})()}}function ae(W){return fe.apply(this,arguments)}function fe(){return(fe=(0,h.Z)(function*(W){const N=yield re()._get(_e(W));return N&&(yield re()._remove(_e(W))),N})).apply(this,arguments)}function ee(){const W=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const se=Math.floor(Math.random()*N.length);W.push(N.charAt(se))}return W.join("")}function re(){return(0,O.az)(O.b)}function _e(W){return(0,O.aA)("authEvent",W.config.apiKey,W.name)}function je(W){if(!W?.includes("?"))return{};const[N,...H]=W.split("?");return(0,le.zd)(H.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Jt(){var W;return(null===(W=self?.location)||void 0===W?void 0:W.protocol)||null}function Ur(W=(0,le.z$)()){return!("file:"!==Jt()&&"ionic:"!==Jt()&&"capacitor:"!==Jt()||!W.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zi(){try{const W=self.localStorage,N=O.aI();if(W)return W.setItem(N,"1"),W.removeItem(N),!function Ki(W=(0,le.z$)()){return function Jr(){return(0,le.w1)()&&11===document?.documentMode}()||function Gn(W=(0,le.z$)()){return/Edge\/\d+/.test(W)}(W)}()||(0,le.hl)()}catch{return Xr()&&(0,le.hl)()}return!1}function Xr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Zn(){return(function $t(){return"http:"===Jt()||"https:"===Jt()}()||(0,le.ru)()||Ur())&&!function qi(){return(0,le.b$)()||(0,le.UG)()}()&&Zi()&&!Xr()}function Vi(){return Ur()&&typeof document<"u"}function Xe(){return(Xe=(0,h.Z)(function*(){return!!Vi()&&new Promise(W=>{const N=setTimeout(()=>{W(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),W(!0)})})})).apply(this,arguments)}const ir={LOCAL:"local",NONE:"none",SESSION:"session"},xn=O.ax,Tr="persistence";function Mn(W){return On.apply(this,arguments)}function On(){return(On=(0,h.Z)(function*(W){yield W._initializationPromise;const N=_t(),H=O.aA(Tr,W.config.apiKey,W.name);N&&N.setItem(H,W._getPersistence())})).apply(this,arguments)}function _t(){var W;try{return(null===(W=function dr(){return typeof window<"u"?window:null}())||void 0===W?void 0:W.sessionStorage)||null}catch{return null}}const yt=O.ax;class kt{constructor(){this.browserResolver=O.az(O.k),this.cordovaResolver=O.az(class dn{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(N){var H=this;return(0,h.Z)(function*(){const se=N._key();let Fe=H.eventManagers.get(se);return Fe||(Fe=new ke(N),H.eventManagers.set(se,Fe),H.attachCallbackListeners(N,Fe)),Fe})()}_openPopup(N){(0,O.as)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,H,se,Fe){var lt=this;return(0,h.Z)(function*(){!function Ce(W){var N,H,se,Fe,lt,ut,Me,Be,Ot,In;const Ht=me();(0,O.ax)("function"==typeof(null===(N=Ht?.universalLinks)||void 0===N?void 0:N.subscribe),W,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(H=Ht?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(lt=null===(Fe=null===(se=Ht?.cordova)||void 0===se?void 0:se.plugins)||void 0===Fe?void 0:Fe.browsertab)||void 0===lt?void 0:lt.openUrl),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Be=null===(Me=null===(ut=Ht?.cordova)||void 0===ut?void 0:ut.plugins)||void 0===Me?void 0:Me.browsertab)||void 0===Be?void 0:Be.isAvailable),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(In=null===(Ot=Ht?.cordova)||void 0===Ot?void 0:Ot.InAppBrowser)||void 0===In?void 0:In.open),W,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const ut=yield lt._initialize(N);yield ut.initialized(),ut.resetRedirect(),(0,O.aD)(),yield lt._originValidation(N);const Me=function Se(W,N,H=null){return{type:N,eventId:H,urlResponse:null,sessionId:ee(),postBody:null,tenantId:W.tenantId,error:(0,O.aw)(W,"no-auth-event")}}(N,se,Fe);yield function Ke(W,N){return re()._set(_e(W),N)}(N,Me);const Be=yield function Y(W,N,H){return q.apply(this,arguments)}(N,Me,H),Ot=yield function Le(W){const{cordova:N}=me();return new Promise(H=>{N.plugins.browsertab.isAvailable(se=>{let Fe=null;se?N.plugins.browsertab.openUrl(W):Fe=N.InAppBrowser.open(W,(0,O.av)()?"_blank":"_system","location=yes"),H(Fe)})})}(Be);return function Ae(W,N,H){return ot.apply(this,arguments)}(N,ut,Ot)})()}_isIframeWebStorageSupported(N,H){throw new Error("Method not implemented.")}_originValidation(N){const H=N._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function te(W){return Ge.apply(this,arguments)}(N)),this.originValidationPromises[H]}attachCallbackListeners(N,H){const{universalLinks:se,handleOpenURL:Fe,BuildInfo:lt}=me(),ut=setTimeout((0,h.Z)(function*(){yield ae(N),H.onEvent(Ze())}),500),Me=function(){var In=(0,h.Z)(function*(Ht){clearTimeout(ut);const bn=yield ae(N);let ds=null;bn&&Ht?.url&&(ds=function Ie(W,N){var H,se;const Fe=function He(W){const N=je(W),H=N.link?decodeURIComponent(N.link):void 0,se=je(H).link,Fe=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return je(Fe).link||Fe||se||H||W}(N);if(Fe.includes("/__/auth/callback")){const lt=je(Fe),ut=lt.firebaseError?function ue(W){try{return JSON.parse(W)}catch{return null}}(decodeURIComponent(lt.firebaseError)):null,Me=null===(se=null===(H=ut?.code)||void 0===H?void 0:H.split("auth/"))||void 0===se?void 0:se[1],Be=Me?(0,O.aw)(Me):null;return Be?{type:W.type,eventId:W.eventId,tenantId:W.tenantId,error:Be,urlResponse:null,sessionId:null,postBody:null}:{type:W.type,eventId:W.eventId,tenantId:W.tenantId,sessionId:W.sessionId,urlResponse:Fe,postBody:null}}return null}(bn,Ht.url)),H.onEvent(ds||Ze())});return function(bn){return In.apply(this,arguments)}}();typeof se<"u"&&"function"==typeof se.subscribe&&se.subscribe(null,Me);const Be=Fe,Ot=`${lt.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var In=(0,h.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Ot)&&Me({url:Ht}),"function"==typeof Be)try{Be(Ht)}catch(bn){console.error(bn)}});return function(Ht){return In.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(N){var H=this;return(0,h.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,H,se,Fe){var lt=this;return(0,h.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openPopup(N,H,se,Fe)})()}_openRedirect(N,H,se,Fe){var lt=this;return(0,h.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openRedirect(N,H,se,Fe)})()}_isIframeWebStorageSupported(N,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,H)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return Vi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,h.Z)(function*(){if(N.underlyingResolver)return;const H=yield function Yi(){return Xe.apply(this,arguments)}();N.underlyingResolver=H?N.cordovaResolver:N.browserResolver})()}}function ei(W){return W.unwrap()}function Wr(W){return Gr(W)}function Gr(W){const{_tokenResponse:N}=W instanceof le.ZR?W.customData:W;if(!N)return null;if(!(W instanceof le.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return O.P.credentialFromResult(W);const H=N.providerId;if(!H||H===O.o.PASSWORD)return null;let se;switch(H){case O.o.GOOGLE:se=O.Q;break;case O.o.FACEBOOK:se=O.N;break;case O.o.GITHUB:se=O.T;break;case O.o.TWITTER:se=O.W;break;default:const{oauthIdToken:Fe,oauthAccessToken:lt,oauthTokenSecret:ut,pendingToken:Me,nonce:Be}=N;return lt||ut||Fe||Me?Me?H.startsWith("saml.")?O.aL._create(H,Me):O.J._fromParams({providerId:H,signInMethod:H,pendingToken:Me,idToken:Fe,accessToken:lt}):new O.U(H).credential({idToken:Fe,accessToken:lt,rawNonce:Be}):null}return W instanceof le.ZR?se.credentialFromError(W):se.credentialFromResult(W)}function Bt(W,N){return N.catch(H=>{throw H instanceof le.ZR&&function xt(W,N){var H,se;const Fe=null===(H=N.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===(null===(se=N)||void 0===se?void 0:se.code))N.resolver=new Ir(W,O.an(W,N));else if(Fe){const lt=Gr(N),ut=N;lt&&(ut.credential=lt,ut.tenantId=Fe.tenantId||void 0,ut.email=Fe.email||void 0,ut.phoneNumber=Fe.phoneNumber||void 0)}}(W,H),H}).then(H=>{const Fe=H.user;return{operationType:H.operationType,credential:Wr(H),additionalUserInfo:O.al(H),user:Un.getOrCreate(Fe)}})}function ai(W,N){return nn.apply(this,arguments)}function nn(){return(nn=(0,h.Z)(function*(W,N){const H=yield N;return{verificationId:H.verificationId,confirm:se=>Bt(W,H.confirm(se))}})).apply(this,arguments)}class Ir{constructor(N,H){this.resolver=H,this.auth=function sr(W){return W.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Bt(ei(this.auth),this.resolver.resolveSignIn(N))}}class Un{constructor(N){this._delegate=N,this.multiFactor=O.ao(N)}static getOrCreate(N){return Un.USER_MAP.has(N)||Un.USER_MAP.set(N,new Un(N)),Un.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var H=this;return(0,h.Z)(function*(){return Bt(H.auth,O.Z(H._delegate,N))})()}linkWithPhoneNumber(N,H){var se=this;return(0,h.Z)(function*(){return ai(se.auth,O.l(se._delegate,N,H))})()}linkWithPopup(N){var H=this;return(0,h.Z)(function*(){return Bt(H.auth,O.d(H._delegate,N,kt))})()}linkWithRedirect(N){var H=this;return(0,h.Z)(function*(){return yield Mn(O.aE(H.auth)),O.g(H._delegate,N,kt)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var H=this;return(0,h.Z)(function*(){return Bt(H.auth,O._(H._delegate,N))})()}reauthenticateWithPhoneNumber(N,H){return ai(this.auth,O.r(this._delegate,N,H))}reauthenticateWithPopup(N){return Bt(this.auth,O.e(this._delegate,N,kt))}reauthenticateWithRedirect(N){var H=this;return(0,h.Z)(function*(){return yield Mn(O.aE(H.auth)),O.h(H._delegate,N,kt)})()}sendEmailVerification(N){return O.ab(this._delegate,N)}unlink(N){var H=this;return(0,h.Z)(function*(){return yield O.ak(H._delegate,N),H})()}updateEmail(N){return O.ag(this._delegate,N)}updatePassword(N){return O.ah(this._delegate,N)}updatePhoneNumber(N){return O.u(this._delegate,N)}updateProfile(N){return O.af(this._delegate,N)}verifyBeforeUpdateEmail(N,H){return O.ac(this._delegate,N,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Un.USER_MAP=new WeakMap;const rt=O.ax;let Re=(()=>{class W{constructor(H,se){if(this.app=H,se.isInitialized())return this._delegate=se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Fe}=H.options;rt(Fe,"invalid-api-key",{appName:H.name}),rt(Fe,"invalid-api-key",{appName:H.name});const lt=typeof window<"u"?kt:void 0;this._delegate=se.initialize({options:{persistence:Dt(Fe,H.name),popupRedirectResolver:lt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Un.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,se){O.G(this._delegate,H,se)}applyActionCode(H){return O.a2(this._delegate,H)}checkActionCode(H){return O.a3(this._delegate,H)}confirmPasswordReset(H,se){return O.a1(this._delegate,H,se)}createUserWithEmailAndPassword(H,se){var Fe=this;return(0,h.Z)(function*(){return Bt(Fe._delegate,O.a5(Fe._delegate,H,se))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return O.aa(this._delegate,H)}isSignInWithEmailLink(H){return O.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,h.Z)(function*(){rt(Zn(),H._delegate,"operation-not-supported-in-this-environment");const se=yield O.j(H._delegate,kt);return se?Bt(H._delegate,Promise.resolve(se)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function En(W,N){(0,O.aE)(W)._logFramework(N)}(this._delegate,H)}onAuthStateChanged(H,se,Fe){const{next:lt,error:ut,complete:Me}=it(H,se,Fe);return this._delegate.onAuthStateChanged(lt,ut,Me)}onIdTokenChanged(H,se,Fe){const{next:lt,error:ut,complete:Me}=it(H,se,Fe);return this._delegate.onIdTokenChanged(lt,ut,Me)}sendSignInLinkToEmail(H,se){return O.a7(this._delegate,H,se)}sendPasswordResetEmail(H,se){return O.a0(this._delegate,H,se||void 0)}setPersistence(H){var se=this;return(0,h.Z)(function*(){let Fe;switch(function lo(W,N){xn(Object.values(ir).includes(N),W,"invalid-persistence-type"),(0,le.b$)()?xn(N!==ir.SESSION,W,"unsupported-persistence-type"):(0,le.UG)()?xn(N===ir.NONE,W,"unsupported-persistence-type"):Xr()?xn(N===ir.NONE||N===ir.LOCAL&&(0,le.hl)(),W,"unsupported-persistence-type"):xn(N===ir.NONE||Zi(),W,"unsupported-persistence-type")}(se._delegate,H),H){case ir.SESSION:Fe=O.a;break;case ir.LOCAL:Fe=(yield O.az(O.i)._isAvailable())?O.i:O.b;break;case ir.NONE:Fe=O.L;break;default:return O.as("argument-error",{appName:se._delegate.name})}return se._delegate.setPersistence(Fe)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Bt(this._delegate,O.X(this._delegate))}signInWithCredential(H){return Bt(this._delegate,O.Y(this._delegate,H))}signInWithCustomToken(H){return Bt(this._delegate,O.$(this._delegate,H))}signInWithEmailAndPassword(H,se){return Bt(this._delegate,O.a6(this._delegate,H,se))}signInWithEmailLink(H,se){return Bt(this._delegate,O.a9(this._delegate,H,se))}signInWithPhoneNumber(H,se){return ai(this._delegate,O.s(this._delegate,H,se))}signInWithPopup(H){var se=this;return(0,h.Z)(function*(){return rt(Zn(),se._delegate,"operation-not-supported-in-this-environment"),Bt(se._delegate,O.c(se._delegate,H,kt))})()}signInWithRedirect(H){var se=this;return(0,h.Z)(function*(){return rt(Zn(),se._delegate,"operation-not-supported-in-this-environment"),yield Mn(se._delegate),O.f(se._delegate,H,kt)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return O.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return W.Persistence=ir,W})();function it(W,N,H){let se=W;"function"!=typeof W&&({next:se,error:N,complete:H}=W);const Fe=se;return{next:ut=>Fe(ut&&Un.getOrCreate(ut)),error:N,complete:H}}function Dt(W,N){const H=function Tn(W,N){const H=_t();if(!H)return[];const se=O.aA(Tr,W,N);switch(H.getItem(se)){case ir.NONE:return[O.L];case ir.LOCAL:return[O.i,O.a];case ir.SESSION:return[O.a];default:return[]}}(W,N);if(typeof self<"u"&&!H.includes(O.i)&&H.push(O.i),typeof window<"u")for(const se of[O.b,O.a])H.includes(se)||H.push(se);return H.includes(O.L)||H.push(O.L),H}class Tt{constructor(){this.providerId="phone",this._delegate=new O.P(ei(G.Z.auth()))}static credential(N,H){return O.P.credential(N,H)}verifyPhoneNumber(N,H){return this._delegate.verifyPhoneNumber(N,H)}unwrap(){return this._delegate}}Tt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Tt.PROVIDER_ID=O.P.PROVIDER_ID;const sn=O.ax;class K{constructor(N,H,se=G.Z.app()){var Fe;sn(null===(Fe=se.options)||void 0===Fe?void 0:Fe.apiKey,"invalid-api-key",{appName:se.name}),this._delegate=new O.R(N,H,se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function J(W){W.INTERNAL.registerComponent(new ge.wA("auth-compat",N=>{const H=N.getProvider("app-compat").getImmediate(),se=N.getProvider("auth");return new Re(H,se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:Tt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:K,TwitterAuthProvider:O.W,Auth:Re,AuthCredential:O.H,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),W.registerVersion("@firebase/auth-compat","0.2.24")}(G.Z)},9751:(gt,xe,V)=>{V.d(xe,{y:()=>me});var h=V(930),G=V(727),O=V(8822),le=V(9635),he=V(2416),we=V(576),ge=V(2806);let me=(()=>{class te{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const Ae=new te;return Ae.source=this,Ae.operator=Le,Ae}subscribe(Le,Ae,ot){const Ce=function q(te){return te&&te instanceof h.Lv||function Y(te){return te&&(0,we.m)(te.next)&&(0,we.m)(te.error)&&(0,we.m)(te.complete)}(te)&&(0,G.Nn)(te)}(Le)?Le:new h.Hp(Le,Ae,ot);return(0,ge.x)(()=>{const{operator:ve,source:nt}=this;Ce.add(ve?ve.call(Ce,nt):nt?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Le){try{return this._subscribe(Le)}catch(Ae){Le.error(Ae)}}forEach(Le,Ae){return new(Ae=Ee(Ae))((ot,Ce)=>{const ve=new h.Hp({next:nt=>{try{Le(nt)}catch(Je){Ce(Je),ve.unsubscribe()}},error:Ce,complete:ot});this.subscribe(ve)})}_subscribe(Le){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(Le)}[O.L](){return this}pipe(...Le){return(0,le.U)(Le)(this)}toPromise(Le){return new(Le=Ee(Le))((Ae,ot)=>{let Ce;this.subscribe(ve=>Ce=ve,ve=>ot(ve),()=>Ae(Ce))})}}return te.create=Ge=>new te(Ge),te})();function Ee(te){var Ge;return null!==(Ge=te??he.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(gt,xe,V)=>{V.d(xe,{x:()=>ge});var h=V(9751),G=V(727);const le=(0,V(3888).d)(Ee=>function(){Ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=V(8737),we=V(2806);let ge=(()=>{class Ee extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const te=new me(this,this);return te.operator=q,te}_throwIfClosed(){if(this.closed)throw new le}next(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(q)}})}error(q){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:te}=this;for(;te.length;)te.shift().error(q)}})}complete(){(0,we.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:te,isStopped:Ge,observers:Le}=this;return te||Ge?G.Lc:(this.currentObservers=null,Le.push(q),new G.w0(()=>{this.currentObservers=null,(0,he.P)(Le,q)}))}_checkFinalizedStatuses(q){const{hasError:te,thrownError:Ge,isStopped:Le}=this;te?q.error(Ge):Le&&q.complete()}asObservable(){const q=new h.y;return q.source=this,q}}return Ee.create=(Y,q)=>new me(Y,q),Ee})();class me extends ge{constructor(Y,q){super(),this.destination=Y,this.source=q}next(Y){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===te||te.call(q,Y)}error(Y){var q,te;null===(te=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===te||te.call(q,Y)}complete(){var Y,q;null===(q=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===q||q.call(Y)}_subscribe(Y){var q,te;return null!==(te=null===(q=this.source)||void 0===q?void 0:q.subscribe(Y))&&void 0!==te?te:G.Lc}}},930:(gt,xe,V)=>{V.d(xe,{Hp:()=>ot,Lv:()=>te});var h=V(576),G=V(727),O=V(2416),le=V(7849),he=V(5032);const we=Ee("C",void 0,void 0);function Ee(Ve,ke,Se){return{kind:Ve,value:ke,error:Se}}var Y=V(3410),q=V(2806);class te extends G.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,G.Nn)(ke)&&ke.add(this)):this.destination=Je}static create(ke,Se,Ke){return new ot(ke,Se,Ke)}next(ke){this.isStopped?nt(function me(Ve){return Ee("N",Ve,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?nt(function ge(Ve){return Ee("E",void 0,Ve)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?nt(we,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Le(Ve,ke){return Ge.call(Ve,ke)}class Ae{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:Se}=this;if(Se.next)try{Se.next(ke)}catch(Ke){Ce(Ke)}}error(ke){const{partialObserver:Se}=this;if(Se.error)try{Se.error(ke)}catch(Ke){Ce(Ke)}else Ce(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(Se){Ce(Se)}}}class ot extends te{constructor(ke,Se,Ke){let ae;if(super(),(0,h.m)(ke)||!ke)ae={next:ke??void 0,error:Se??void 0,complete:Ke??void 0};else{let fe;this&&O.v.useDeprecatedNextContext?(fe=Object.create(ke),fe.unsubscribe=()=>this.unsubscribe(),ae={next:ke.next&&Le(ke.next,fe),error:ke.error&&Le(ke.error,fe),complete:ke.complete&&Le(ke.complete,fe)}):ae=ke}this.destination=new Ae(ae)}}function Ce(Ve){O.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(Ve):(0,le.h)(Ve)}function nt(Ve,ke){const{onStoppedNotification:Se}=O.v;Se&&Y.z.setTimeout(()=>Se(Ve,ke))}const Je={closed:!0,next:he.Z,error:function ve(Ve){throw Ve},complete:he.Z}},727:(gt,xe,V)=>{V.d(xe,{Lc:()=>we,w0:()=>he,Nn:()=>ge});var h=V(576);const O=(0,V(3888).d)(Ee=>function(q){Ee(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((te,Ge)=>`${Ge+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var le=V(8737);class he{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Le of q)Le.remove(this);else q.remove(this);const{initialTeardown:te}=this;if((0,h.m)(te))try{te()}catch(Le){Y=Le instanceof O?Le.errors:[Le]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Le of Ge)try{me(Le)}catch(Ae){Y=Y??[],Ae instanceof O?Y=[...Y,...Ae.errors]:Y.push(Ae)}}if(Y)throw new O(Y)}}add(Y){var q;if(Y&&Y!==this)if(this.closed)me(Y);else{if(Y instanceof he){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(Y)}}_hasParent(Y){const{_parentage:q}=this;return q===Y||Array.isArray(q)&&q.includes(Y)}_addParent(Y){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(Y),q):q?[q,Y]:Y}_removeParent(Y){const{_parentage:q}=this;q===Y?this._parentage=null:Array.isArray(q)&&(0,le.P)(q,Y)}remove(Y){const{_finalizers:q}=this;q&&(0,le.P)(q,Y),Y instanceof he&&Y._removeParent(this)}}he.EMPTY=(()=>{const Ee=new he;return Ee.closed=!0,Ee})();const we=he.EMPTY;function ge(Ee){return Ee instanceof he||Ee&&"closed"in Ee&&(0,h.m)(Ee.remove)&&(0,h.m)(Ee.add)&&(0,h.m)(Ee.unsubscribe)}function me(Ee){(0,h.m)(Ee)?Ee():Ee.unsubscribe()}},2416:(gt,xe,V)=>{V.d(xe,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,xe,V)=>{V.d(xe,{E:()=>G});const G=new(V(9751).y)(he=>he.complete())},8996:(gt,xe,V)=>{V.d(xe,{D:()=>ke});var h=V(8421),G=V(5363),O=V(9468),we=V(9751),me=V(2202),Ee=V(576),Y=V(9672);function te(Se,Ke){if(!Se)throw new Error("Iterable cannot be null");return new we.y(ae=>{(0,Y.f)(ae,Ke,()=>{const fe=Se[Symbol.asyncIterator]();(0,Y.f)(ae,Ke,()=>{fe.next().then(Ie=>{Ie.done?ae.complete():ae.next(Ie.value)})},0,!0)})})}var Ge=V(3670),Le=V(8239),Ae=V(1144),ot=V(6495),Ce=V(2206),ve=V(4532),nt=V(3260);function ke(Se,Ke){return Ke?function Ve(Se,Ke){if(null!=Se){if((0,Ge.c)(Se))return function le(Se,Ke){return(0,h.Xf)(Se).pipe((0,O.R)(Ke),(0,G.Q)(Ke))}(Se,Ke);if((0,Ae.z)(Se))return function ge(Se,Ke){return new we.y(ae=>{let fe=0;return Ke.schedule(function(){fe===Se.length?ae.complete():(ae.next(Se[fe++]),ae.closed||this.schedule())})})}(Se,Ke);if((0,Le.t)(Se))return function he(Se,Ke){return(0,h.Xf)(Se).pipe((0,O.R)(Ke),(0,G.Q)(Ke))}(Se,Ke);if((0,Ce.D)(Se))return te(Se,Ke);if((0,ot.T)(Se))return function q(Se,Ke){return new we.y(ae=>{let fe;return(0,Y.f)(ae,Ke,()=>{fe=Se[me.h](),(0,Y.f)(ae,Ke,()=>{let Ie,ee;try{({value:Ie,done:ee}=fe.next())}catch(re){return void ae.error(re)}ee?ae.complete():ae.next(Ie)},0,!0)}),()=>(0,Ee.m)(fe?.return)&&fe.return()})}(Se,Ke);if((0,nt.L)(Se))return function Je(Se,Ke){return te((0,nt.Q)(Se),Ke)}(Se,Ke)}throw(0,ve.z)(Se)}(Se,Ke):(0,h.Xf)(Se)}},8421:(gt,xe,V)=>{V.d(xe,{Xf:()=>Ge});var h=V(655),G=V(1144),O=V(8239),le=V(9751),he=V(3670),we=V(2206),ge=V(4532),me=V(6495),Ee=V(3260),Y=V(576),q=V(7849),te=V(8822);function Ge(Ve){if(Ve instanceof le.y)return Ve;if(null!=Ve){if((0,he.c)(Ve))return function Le(Ve){return new le.y(ke=>{const Se=Ve[te.L]();if((0,Y.m)(Se.subscribe))return Se.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,G.z)(Ve))return function Ae(Ve){return new le.y(ke=>{for(let Se=0;Se<Ve.length&&!ke.closed;Se++)ke.next(Ve[Se]);ke.complete()})}(Ve);if((0,O.t)(Ve))return function ot(Ve){return new le.y(ke=>{Ve.then(Se=>{ke.closed||(ke.next(Se),ke.complete())},Se=>ke.error(Se)).then(null,q.h)})}(Ve);if((0,we.D)(Ve))return ve(Ve);if((0,me.T)(Ve))return function Ce(Ve){return new le.y(ke=>{for(const Se of Ve)if(ke.next(Se),ke.closed)return;ke.complete()})}(Ve);if((0,Ee.L)(Ve))return function nt(Ve){return ve((0,Ee.Q)(Ve))}(Ve)}throw(0,ge.z)(Ve)}function ve(Ve){return new le.y(ke=>{(function Je(Ve,ke){var Se,Ke,ae,fe;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Se=(0,h.KL)(Ve);!(Ke=yield Se.next()).done;)if(ke.next(Ke.value),ke.closed)return}catch(Ie){ae={error:Ie}}finally{try{Ke&&!Ke.done&&(fe=Se.return)&&(yield fe.call(Se))}finally{if(ae)throw ae.error}}ke.complete()})})(Ve,ke).catch(Se=>ke.error(Se))})}},6451:(gt,xe,V)=>{V.d(xe,{T:()=>we});var h=V(8189),G=V(8421),O=V(515),le=V(3269),he=V(8996);function we(...ge){const me=(0,le.yG)(ge),Ee=(0,le._6)(ge,1/0),Y=ge;return Y.length?1===Y.length?(0,G.Xf)(Y[0]):(0,h.J)(Ee)((0,he.D)(Y,me)):O.E}},5403:(gt,xe,V)=>{V.d(xe,{x:()=>G});var h=V(930);function G(le,he,we,ge,me){return new O(le,he,we,ge,me)}class O extends h.Lv{constructor(he,we,ge,me,Ee,Y){super(he),this.onFinalize=Ee,this.shouldUnsubscribe=Y,this._next=we?function(q){try{we(q)}catch(te){he.error(te)}}:super._next,this._error=me?function(q){try{me(q)}catch(te){he.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(q){he.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:we}=this;super.unsubscribe(),!we&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(gt,xe,V)=>{V.d(xe,{U:()=>O});var h=V(4482),G=V(5403);function O(le,he){return(0,h.e)((we,ge)=>{let me=0;we.subscribe((0,G.x)(ge,Ee=>{ge.next(le.call(he,Ee,me++))}))})}},8189:(gt,xe,V)=>{V.d(xe,{J:()=>O});var h=V(5577),G=V(4671);function O(le=1/0){return(0,h.z)(G.y,le)}},5577:(gt,xe,V)=>{V.d(xe,{z:()=>me});var h=V(4004),G=V(8421),O=V(4482),le=V(9672),he=V(5403),ge=V(576);function me(Ee,Y,q=1/0){return(0,ge.m)(Y)?me((te,Ge)=>(0,h.U)((Le,Ae)=>Y(te,Le,Ge,Ae))((0,G.Xf)(Ee(te,Ge))),q):("number"==typeof Y&&(q=Y),(0,O.e)((te,Ge)=>function we(Ee,Y,q,te,Ge,Le,Ae,ot){const Ce=[];let ve=0,nt=0,Je=!1;const Ve=()=>{Je&&!Ce.length&&!ve&&Y.complete()},ke=Ke=>ve<te?Se(Ke):Ce.push(Ke),Se=Ke=>{Le&&Y.next(Ke),ve++;let ae=!1;(0,G.Xf)(q(Ke,nt++)).subscribe((0,he.x)(Y,fe=>{Ge?.(fe),Le?ke(fe):Y.next(fe)},()=>{ae=!0},void 0,()=>{if(ae)try{for(ve--;Ce.length&&ve<te;){const fe=Ce.shift();Ae?(0,le.f)(Y,Ae,()=>Se(fe)):Se(fe)}Ve()}catch(fe){Y.error(fe)}}))};return Ee.subscribe((0,he.x)(Y,ke,()=>{Je=!0,Ve()})),()=>{ot?.()}}(te,Ge,Ee,q)))}},5363:(gt,xe,V)=>{V.d(xe,{Q:()=>le});var h=V(9672),G=V(4482),O=V(5403);function le(he,we=0){return(0,G.e)((ge,me)=>{ge.subscribe((0,O.x)(me,Ee=>(0,h.f)(me,he,()=>me.next(Ee),we),()=>(0,h.f)(me,he,()=>me.complete(),we),Ee=>(0,h.f)(me,he,()=>me.error(Ee),we)))})}},3099:(gt,xe,V)=>{V.d(xe,{B:()=>he});var h=V(8421),G=V(7579),O=V(930),le=V(4482);function he(ge={}){const{connector:me=(()=>new G.x),resetOnError:Ee=!0,resetOnComplete:Y=!0,resetOnRefCountZero:q=!0}=ge;return te=>{let Ge,Le,Ae,ot=0,Ce=!1,ve=!1;const nt=()=>{Le?.unsubscribe(),Le=void 0},Je=()=>{nt(),Ge=Ae=void 0,Ce=ve=!1},Ve=()=>{const ke=Ge;Je(),ke?.unsubscribe()};return(0,le.e)((ke,Se)=>{ot++,!ve&&!Ce&&nt();const Ke=Ae=Ae??me();Se.add(()=>{ot--,0===ot&&!ve&&!Ce&&(Le=we(Ve,q))}),Ke.subscribe(Se),!Ge&&ot>0&&(Ge=new O.Hp({next:ae=>Ke.next(ae),error:ae=>{ve=!0,nt(),Le=we(Je,Ee,ae),Ke.error(ae)},complete:()=>{Ce=!0,nt(),Le=we(Je,Y),Ke.complete()}}),(0,h.Xf)(ke).subscribe(Ge))})(te)}}function we(ge,me,...Ee){if(!0===me)return void ge();if(!1===me)return;const Y=new O.Hp({next:()=>{Y.unsubscribe(),ge()}});return me(...Ee).subscribe(Y)}},9468:(gt,xe,V)=>{V.d(xe,{R:()=>G});var h=V(4482);function G(O,le=0){return(0,h.e)((he,we)=>{we.add(O.schedule(()=>he.subscribe(we),le))})}},8505:(gt,xe,V)=>{V.d(xe,{b:()=>he});var h=V(576),G=V(4482),O=V(5403),le=V(4671);function he(we,ge,me){const Ee=(0,h.m)(we)||ge||me?{next:we,error:ge,complete:me}:we;return Ee?(0,G.e)((Y,q)=>{var te;null===(te=Ee.subscribe)||void 0===te||te.call(Ee);let Ge=!0;Y.subscribe((0,O.x)(q,Le=>{var Ae;null===(Ae=Ee.next)||void 0===Ae||Ae.call(Ee,Le),q.next(Le)},()=>{var Le;Ge=!1,null===(Le=Ee.complete)||void 0===Le||Le.call(Ee),q.complete()},Le=>{var Ae;Ge=!1,null===(Ae=Ee.error)||void 0===Ae||Ae.call(Ee,Le),q.error(Le)},()=>{var Le,Ae;Ge&&(null===(Le=Ee.unsubscribe)||void 0===Le||Le.call(Ee)),null===(Ae=Ee.finalize)||void 0===Ae||Ae.call(Ee)}))}):le.y}},4408:(gt,xe,V)=>{V.d(xe,{o:()=>he});var h=V(727);class G extends h.w0{constructor(ge,me){super()}schedule(ge,me=0){return this}}const O={setInterval(we,ge,...me){const{delegate:Ee}=O;return Ee?.setInterval?Ee.setInterval(we,ge,...me):setInterval(we,ge,...me)},clearInterval(we){const{delegate:ge}=O;return(ge?.clearInterval||clearInterval)(we)},delegate:void 0};var le=V(8737);class he extends G{constructor(ge,me){super(ge,me),this.scheduler=ge,this.work=me,this.pending=!1}schedule(ge,me=0){var Ee;if(this.closed)return this;this.state=ge;const Y=this.id,q=this.scheduler;return null!=Y&&(this.id=this.recycleAsyncId(q,Y,me)),this.pending=!0,this.delay=me,this.id=null!==(Ee=this.id)&&void 0!==Ee?Ee:this.requestAsyncId(q,this.id,me),this}requestAsyncId(ge,me,Ee=0){return O.setInterval(ge.flush.bind(ge,this),Ee)}recycleAsyncId(ge,me,Ee=0){if(null!=Ee&&this.delay===Ee&&!1===this.pending)return me;null!=me&&O.clearInterval(me)}execute(ge,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(ge,me);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,me){let Y,Ee=!1;try{this.work(ge)}catch(q){Ee=!0,Y=q||new Error("Scheduled action threw falsy error")}if(Ee)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:ge,scheduler:me}=this,{actions:Ee}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Ee,this),null!=ge&&(this.id=this.recycleAsyncId(me,ge,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,xe,V)=>{V.d(xe,{v:()=>O});var h=V(6063);class G{constructor(he,we=G.now){this.schedulerActionCtor=he,this.now=we}schedule(he,we=0,ge){return new this.schedulerActionCtor(this,he).schedule(ge,we)}}G.now=h.l.now;class O extends G{constructor(he,we=G.now){super(he,we),this.actions=[],this._active=!1}flush(he){const{actions:we}=this;if(this._active)return void we.push(he);let ge;this._active=!0;do{if(ge=he.execute(he.state,he.delay))break}while(he=we.shift());if(this._active=!1,ge){for(;he=we.shift();)he.unsubscribe();throw ge}}}},4986:(gt,xe,V)=>{V.d(xe,{P:()=>le,z:()=>O});var h=V(4408);const O=new(V(7565).v)(h.o),le=O},6063:(gt,xe,V)=>{V.d(xe,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(gt,xe,V)=>{V.d(xe,{z:()=>h});const h={setTimeout(G,O,...le){const{delegate:he}=h;return he?.setTimeout?he.setTimeout(G,O,...le):setTimeout(G,O,...le)},clearTimeout(G){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(G)},delegate:void 0}},2202:(gt,xe,V)=>{V.d(xe,{h:()=>G});const G=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,xe,V)=>{V.d(xe,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(gt,xe,V)=>{V.d(xe,{_6:()=>we,jO:()=>le,yG:()=>he});var h=V(576),G=V(3532);function O(ge){return ge[ge.length-1]}function le(ge){return(0,h.m)(O(ge))?ge.pop():void 0}function he(ge){return(0,G.K)(O(ge))?ge.pop():void 0}function we(ge,me){return"number"==typeof O(ge)?ge.pop():me}},8737:(gt,xe,V)=>{function h(G,O){if(G){const le=G.indexOf(O);0<=le&&G.splice(le,1)}}V.d(xe,{P:()=>h})},3888:(gt,xe,V)=>{function h(G){const le=G(he=>{Error.call(he),he.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}V.d(xe,{d:()=>h})},2806:(gt,xe,V)=>{V.d(xe,{O:()=>le,x:()=>O});var h=V(2416);let G=null;function O(he){if(h.v.useDeprecatedSynchronousErrorHandling){const we=!G;if(we&&(G={errorThrown:!1,error:null}),he(),we){const{errorThrown:ge,error:me}=G;if(G=null,ge)throw me}}else he()}function le(he){h.v.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=he)}},9672:(gt,xe,V)=>{function h(G,O,le,he=0,we=!1){const ge=O.schedule(function(){le(),we?G.add(this.schedule(null,he)):this.unsubscribe()},he);if(G.add(ge),!we)return ge}V.d(xe,{f:()=>h})},4671:(gt,xe,V)=>{function h(G){return G}V.d(xe,{y:()=>h})},1144:(gt,xe,V)=>{V.d(xe,{z:()=>h});const h=G=>G&&"number"==typeof G.length&&"function"!=typeof G},2206:(gt,xe,V)=>{V.d(xe,{D:()=>G});var h=V(576);function G(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(gt,xe,V)=>{function h(G){return"function"==typeof G}V.d(xe,{m:()=>h})},3670:(gt,xe,V)=>{V.d(xe,{c:()=>O});var h=V(8822),G=V(576);function O(le){return(0,G.m)(le[h.L])}},6495:(gt,xe,V)=>{V.d(xe,{T:()=>O});var h=V(2202),G=V(576);function O(le){return(0,G.m)(le?.[h.h])}},8239:(gt,xe,V)=>{V.d(xe,{t:()=>G});var h=V(576);function G(O){return(0,h.m)(O?.then)}},3260:(gt,xe,V)=>{V.d(xe,{L:()=>le,Q:()=>O});var h=V(655),G=V(576);function O(he){return(0,h.FC)(this,arguments,function*(){const ge=he.getReader();try{for(;;){const{value:me,done:Ee}=yield(0,h.qq)(ge.read());if(Ee)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(me)}}finally{ge.releaseLock()}})}function le(he){return(0,G.m)(he?.getReader)}},3532:(gt,xe,V)=>{V.d(xe,{K:()=>G});var h=V(576);function G(O){return O&&(0,h.m)(O.schedule)}},4482:(gt,xe,V)=>{V.d(xe,{A:()=>G,e:()=>O});var h=V(576);function G(le){return(0,h.m)(le?.lift)}function O(le){return he=>{if(G(he))return he.lift(function(we){try{return le(we,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,xe,V)=>{function h(){}V.d(xe,{Z:()=>h})},9635:(gt,xe,V)=>{V.d(xe,{U:()=>O,z:()=>G});var h=V(4671);function G(...le){return O(le)}function O(le){return 0===le.length?h.y:1===le.length?le[0]:function(we){return le.reduce((ge,me)=>me(ge),we)}}},7849:(gt,xe,V)=>{V.d(xe,{h:()=>O});var h=V(2416),G=V(3410);function O(le){G.z.setTimeout(()=>{const{onUnhandledError:he}=h.v;if(!he)throw le;he(le)})}},4532:(gt,xe,V)=>{function h(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(xe,{z:()=>h})},655:(gt,xe,V)=>{function le(ee,re){var _e={};for(var ue in ee)Object.prototype.hasOwnProperty.call(ee,ue)&&re.indexOf(ue)<0&&(_e[ue]=ee[ue]);if(null!=ee&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ue=Object.getOwnPropertySymbols(ee);He<ue.length;He++)re.indexOf(ue[He])<0&&Object.prototype.propertyIsEnumerable.call(ee,ue[He])&&(_e[ue[He]]=ee[ue[He]])}return _e}function me(ee,re,_e,ue){return new(_e||(_e=Promise))(function(je,mt){function dn(En){try{Ze(ue.next(En))}catch(kn){mt(kn)}}function Kt(En){try{Ze(ue.throw(En))}catch(kn){mt(kn)}}function Ze(En){En.done?je(En.value):function He(je){return je instanceof _e?je:new _e(function(mt){mt(je)})}(En.value).then(dn,Kt)}Ze((ue=ue.apply(ee,re||[])).next())})}function Ce(ee){return this instanceof Ce?(this.v=ee,this):new Ce(ee)}function ve(ee,re,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ue=_e.apply(ee,re||[]),je=[];return He={},mt("next"),mt("throw"),mt("return"),He[Symbol.asyncIterator]=function(){return this},He;function mt(an){ue[an]&&(He[an]=function(ln){return new Promise(function(Jt,$t){je.push([an,ln,Jt,$t])>1||dn(an,ln)})})}function dn(an,ln){try{!function Kt(an){an.value instanceof Ce?Promise.resolve(an.value.v).then(Ze,En):kn(je[0][2],an)}(ue[an](ln))}catch(Jt){kn(je[0][3],Jt)}}function Ze(an){dn("next",an)}function En(an){dn("throw",an)}function kn(an,ln){an(ln),je.shift(),je.length&&dn(je[0][0],je[0][1])}}function Je(ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,re=ee[Symbol.asyncIterator];return re?re.call(ee):(ee=function te(ee){var re="function"==typeof Symbol&&Symbol.iterator,_e=re&&ee[re],ue=0;if(_e)return _e.call(ee);if(ee&&"number"==typeof ee.length)return{next:function(){return ee&&ue>=ee.length&&(ee=void 0),{value:ee&&ee[ue++],done:!ee}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(ee),_e={},ue("next"),ue("throw"),ue("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ue(je){_e[je]=ee[je]&&function(mt){return new Promise(function(dn,Kt){!function He(je,mt,dn,Kt){Promise.resolve(Kt).then(function(Ze){je({value:Ze,done:dn})},mt)}(dn,Kt,(mt=ee[je](mt)).done,mt.value)})}}}V.d(xe,{FC:()=>ve,KL:()=>Je,_T:()=>le,mG:()=>me,qq:()=>Ce})},4650:(gt,xe,V)=>{V.d(xe,{$8M:()=>tu,$Z:()=>av,AFp:()=>iE,AaK:()=>me,BQk:()=>Tc,CHM:()=>Uh,CRH:()=>Qm,CZH:()=>l_,CqO:()=>Vv,D6c:()=>Yr,EJc:()=>u_,EiD:()=>dI,EpF:()=>Rb,F$t:()=>$f,F4k:()=>xb,FYo:()=>Cf,FiY:()=>be,G48:()=>tD,Gf:()=>Zm,GfV:()=>DI,GkF:()=>Hf,Gpc:()=>q,Hsn:()=>vm,JOm:()=>is,JVY:()=>pS,KtG:()=>sa,L6k:()=>sI,LAX:()=>gS,LFG:()=>Pn,LSH:()=>Ld,Lbi:()=>kl,Lck:()=>cC,MAs:()=>os,MMx:()=>rp,NdJ:()=>Uv,OlP:()=>Fn,Oqu:()=>tw,PXZ:()=>hx,Q6J:()=>Lo,QGY:()=>Fv,QP$:()=>Fe,QbO:()=>lE,Qsj:()=>BS,R0b:()=>Rs,RDi:()=>oS,Rgc:()=>th,SBq:()=>_c,Sil:()=>Ep,Suo:()=>Ym,TTD:()=>Vs,TgZ:()=>Wd,Tol:()=>bm,VKq:()=>kw,W1O:()=>hp,WLB:()=>Ow,X6Q:()=>px,XFs:()=>Xe,Xpm:()=>Re,Xts:()=>Ug,Y36:()=>Ec,YKP:()=>Bm,YNc:()=>kA,Yjl:()=>W,Yz7:()=>ln,Z0I:()=>qi,ZZ4:()=>Ll,_Bn:()=>Ac,_UZ:()=>Lv,_Vd:()=>yu,_c5:()=>Ms,_uU:()=>Gb,aQg:()=>uh,c2e:()=>wp,cJS:()=>$t,cg1:()=>gn,dDg:()=>dx,dqk:()=>kt,eBb:()=>Og,eFA:()=>dt,ekj:()=>Kd,eoX:()=>GC,f3M:()=>Di,g9A:()=>oE,h0i:()=>Rc,hGG:()=>wx,iGM:()=>nh,ifc:()=>yt,ip1:()=>FC,jDz:()=>dC,kL8:()=>oR,l5B:()=>Lw,lG2:()=>J,lqb:()=>_u,lri:()=>WC,mCW:()=>gu,n5z:()=>$s,oAB:()=>sn,oxw:()=>Bv,pB0:()=>mS,q3G:()=>_r,q4F:()=>TI,qLn:()=>wu,qOj:()=>pm,qZA:()=>Bf,qbA:()=>Fw,qzn:()=>Ra,rWj:()=>p_,sBO:()=>tr,sIi:()=>gm,s_b:()=>cp,soG:()=>ah,tb:()=>aE,tp0:()=>vt,uIk:()=>_m,vHH:()=>Ae,vpe:()=>As,wAp:()=>St,xp6:()=>MI,ynx:()=>ym,z2F:()=>m_,z3N:()=>Aa,zSh:()=>Gy,zs3:()=>bs});var h=V(7579),G=V(727),O=V(9751),le=V(6451),he=V(3099);function we(o){for(let a in o)if(o[a]===we)return a;throw Error("Could not find renamed property on target object.")}function ge(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Ee(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Y=we({__forward_ref__:we});function q(o){return o.__forward_ref__=q,o.toString=function(){return me(this())},o}function te(o){return Ge(o)?o():o}function Ge(o){return"function"==typeof o&&o.hasOwnProperty(Y)&&o.__forward_ref__===q}class Ae extends Error{constructor(a,l){super(function ot(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function Ce(o){return"string"==typeof o?o:null==o?"":String(o)}function ke(o,a){throw new Ae(-201,!1)}function Kt(o,a){null==o&&function Ze(o,a,l,c){throw new Error(`ASSERTION ERROR: ${o}`+(null==c?"":` [Expected=> ${l} ${c} ${a} <=Actual]`))}(a,o,null,"!=")}function ln(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function $t(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ur(o){return Jr(o,Xr)||Jr(o,Vi)}function qi(o){return null!==Ur(o)}function Jr(o,a){return o.hasOwnProperty(a)?o[a]:null}function Zi(o){return o&&(o.hasOwnProperty(Zn)||o.hasOwnProperty(Yi))?o[Zn]:null}const Xr=we({\u0275prov:we}),Zn=we({\u0275inj:we}),Vi=we({ngInjectableDef:we}),Yi=we({ngInjectorDef:we});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let dr;function xn(o){const a=dr;return dr=o,a}function Tr(o,a,l){const c=Ur(o);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&Xe.Optional?null:void 0!==a?a:void ke(me(o))}function Mn(o){return{toString:o}.toString()}var On=(()=>((On=On||{})[On.OnPush=0]="OnPush",On[On.Default=1]="Default",On))(),yt=(()=>{return(o=yt||(yt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",yt;var o})();const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Wr={},xt=[],Gr=we({\u0275cmp:we}),Bt=we({\u0275dir:we}),ai=we({\u0275pipe:we}),nn=we({\u0275mod:we}),Ir=we({\u0275fac:we}),Un=we({__NG_ELEMENT_ID__:we});let rt=0;function Re(o){return Mn(()=>{const l=!0===o.standalone,c={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===On.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||xt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||yt.Emulated,id:"c"+rt++,styles:o.styles||xt,_:null,setInput:null,schemas:o.schemas||null,tView:null},g=o.dependencies,v=o.features;return f.inputs=z(o.inputs,c),f.outputs=z(o.outputs),v&&v.forEach(E=>E(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Dt).filter(Tt):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(se).filter(Tt):null,f})}function Dt(o){return N(o)||H(o)}function Tt(o){return null!==o}function sn(o){return Mn(()=>({type:o.type,bootstrap:o.bootstrap||xt,declarations:o.declarations||xt,imports:o.imports||xt,exports:o.exports||xt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function z(o,a){if(null==o)return Wr;const l={};for(const c in o)if(o.hasOwnProperty(c)){let f=o[c],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=c,a&&(a[f]=g)}return l}const J=Re;function W(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function N(o){return o[Gr]||null}function H(o){return o[Bt]||null}function se(o){return o[ai]||null}function Fe(o){const a=N(o)||H(o)||se(o);return null!==a&&a.standalone}function lt(o,a){const l=o[nn]||null;if(!l&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return l}function hr(o){return Array.isArray(o)&&"object"==typeof o[1]}function vi(o){return Array.isArray(o)&&!0===o[1]}function Yo(o){return 0!=(8&o.flags)}function ju(o){return 2==(2&o.flags)}function Ka(o){return 1==(1&o.flags)}function ui(o){return null!==o.template}function $u(o){return 0!=(256&o[2])}function Br(o,a){return o.hasOwnProperty(Ir)?o[Ir]:null}class ea{constructor(a,l,c){this.previousValue=a,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Vs(){return ad}function ad(o){return o.type.prototype.ngOnChanges&&(o.setInput=Wu),Wl}function Wl(){const o=ta(this),a=o?.current;if(a){const l=o.previous;if(l===Wr)o.previous=a;else for(let c in a)l[c]=a[c];o.current=null,this.ngOnChanges(a)}}function Wu(o,a,l,c){const f=ta(o)||function Qa(o,a){return o[ld]=a}(o,{previous:Wr,current:null}),g=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[l],C=v[E];g[E]=new ea(C&&C.currentValue,a,v===Wr),o[c]=a}Vs.ngInherit=!0;const ld="__ngSimpleChanges__";function ta(o){return o[ld]||null}function qn(o){for(;Array.isArray(o);)o=o[0];return o}function Ui(o,a){return qn(a[o])}function Sr(o,a){return qn(a[o.index])}function ra(o,a){return o.data[a]}function hn(o,a){const l=a[o];return hr(l)?l:l[0]}function Us(o){return 64==(64&o[2])}function bi(o,a){return null==a?null:o[a]}function Ja(o){o[18]=0}function Yn(o,a){o[5]+=a;let l=o,c=o[3];for(;null!==c&&(1===a&&1===l[5]||-1===a&&0===l[5]);)c[5]+=a,l=c,c=c[3]}const Vt={lFrame:ll(null),bindingsEnabled:!0};function vo(){return Vt.bindingsEnabled}function Ne(){return Vt.lFrame.lView}function en(){return Vt.lFrame.tView}function Uh(o){return Vt.lFrame.contextLView=o,o[8]}function sa(o){return Vt.lFrame.contextLView=null,o}function fr(){let o=oa();for(;null!==o&&64===o.type;)o=o.parent;return o}function oa(){return Vt.lFrame.currentTNode}function ti(o,a){const l=Vt.lFrame;l.currentTNode=o,l.isParent=a}function ql(){return Vt.lFrame.isParent}function aa(){Vt.lFrame.isParent=!1}function pr(){const o=Vt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function sl(){return Vt.lFrame.bindingIndex++}function _s(o){const a=Vt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function hd(o,a){const l=Vt.lFrame;l.bindingIndex=l.bindingRootIndex=o,la(a)}function la(o){Vt.lFrame.currentDirectiveIndex=o}function ol(){return Vt.lFrame.currentQueryIndex}function Yu(o){Vt.lFrame.currentQueryIndex=o}function al(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function fd(o,a,l){if(l&Xe.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&Xe.Host||(f=al(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const c=Vt.lFrame=jh();return c.currentTNode=a,c.lView=o,!0}function ua(o){const a=jh(),l=o[1];Vt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function jh(){const o=Vt.lFrame,a=null===o?null:o.child;return null===a?ll(o):a}function ll(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function $h(){const o=Vt.lFrame;return Vt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const pd=$h;function Bs(){const o=$h();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Wn(){return Vt.lFrame.selectedIndex}function ys(o){Vt.lFrame.selectedIndex=o}function Bn(){const o=Vt.lFrame;return ra(o.tView,o.selectedIndex)}function Kl(o,a){for(let l=a.directiveStart,c=a.directiveEnd;l<c;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:R,ngOnDestroy:k}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-l,v),E&&((o.contentHooks||(o.contentHooks=[])).push(l,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,E)),C&&(o.viewHooks||(o.viewHooks=[])).push(-l,C),R&&((o.viewHooks||(o.viewHooks=[])).push(l,R),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,R)),null!=k&&(o.destroyHooks||(o.destroyHooks=[])).push(l,k)}}function ca(o,a,l){ha(o,a,3,l)}function da(o,a,l,c){(3&o[2])===l&&ha(o,a,l,c)}function _d(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function ha(o,a,l,c){const g=c??-1,v=a.length-1;let E=0;for(let C=void 0!==c?65535&o[18]:0;C<v;C++)if("number"==typeof a[C+1]){if(E=a[C],null!=c&&E>=c)break}else a[C]<0&&(o[18]+=65536),(E<g||-1==g)&&(yd(o,l,a,C),o[18]=(4294901760&o[18])+C+2),C++}function yd(o,a,l,c){const f=l[c]<0,g=l[c+1],E=o[f?-l[c]:l[c]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Ci{constructor(a,l,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function vs(o,a,l){let c=0;for(;c<l.length;){const f=l[c];if("number"==typeof f){if(0!==f)break;c++;const g=l[c++],v=l[c++],E=l[c++];o.setAttribute(a,v,E,g)}else{const g=f,v=l[++c];nc(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),c++}}return c}function cl(o){return 3===o||4===o||6===o}function nc(o){return 64===o.charCodeAt(0)}function dl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let c=0;c<a.length;c++){const f=a[c];"number"==typeof f?l=f:0===l||wd(o,l,f,null,-1===l||2===l?a[++c]:null)}}return o}function wd(o,a,l,c,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const E=o[g++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=g-1;break}}}for(;g<o.length;){const E=o[g];if("number"==typeof E)break;if(E===l){if(null===c)return void(null!==f&&(o[g+1]=f));if(c===o[g+1])return void(o[g+2]=f)}g++,null!==c&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==c&&o.splice(g++,0,c),null!==f&&o.splice(g++,0,f)}function zh(o){return-1!==o}function gr(o){return 32767&o}function js(o,a){let l=function qh(o){return o>>16}(o),c=a;for(;l>0;)c=c[15],l--;return c}let rc=!0;function hl(o){const a=rc;return rc=o,a}let Ed=0;const di={};function ws(o,a){const l=Jl(o,a);if(-1!==l)return l;const c=a[1];c.firstCreatePass&&(o.injectorIndex=a.length,ic(c.data,o),ic(a,null),ic(c.blueprint,null));const f=fl(o,a),g=o.injectorIndex;if(zh(f)){const v=gr(f),E=js(f,a),C=E[1].data;for(let R=0;R<8;R++)a[g+R]=E[v+R]|C[v+R]}return a[g+8]=f,g}function ic(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Jl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function fl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,c=null,f=a;for(;null!==f;){if(c=va(f),null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Eo(o,a,l){!function Id(o,a,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Un)&&(c=l[Un]),null==c&&(c=l[Un]=Ed++);const f=255&c;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function pa(o,a,l){if(l&Xe.Optional||void 0!==o)return o;ke()}function Io(o,a,l,c){if(l&Xe.Optional&&void 0===c&&(c=null),0==(l&(Xe.Self|Xe.Host))){const f=o[9],g=xn(void 0);try{return f?f.get(a,c,l&Xe.Optional):Tr(a,c,l&Xe.Optional)}finally{xn(g)}}return pa(c,0,l)}function ga(o,a,l,c=Xe.Default,f){if(null!==o){if(1024&a[2]){const v=function Yh(o,a,l,c,f){let g=o,v=a;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=bd(g,v,l,c|Xe.Self,di);if(E!==di)return E;let C=g.parent;if(!C){const R=v[21];if(R){const k=R.get(l,di,c);if(k!==di)return k}C=va(v),v=v[15]}g=C}return f}(o,a,l,c,di);if(v!==di)return v}const g=bd(o,a,l,c,di);if(g!==di)return g}return Io(a,l,c,f)}function bd(o,a,l,c,f){const g=function Zh(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Un)?o[Un]:void 0;return"number"==typeof a?a>=0?255&a:sc:a}(l);if("function"==typeof g){if(!fd(a,o,c))return c&Xe.Host?pa(f,0,c):Io(a,l,c,f);try{const v=g(c);if(null!=v||c&Xe.Optional)return v;ke()}finally{pd()}}else if("number"==typeof g){let v=null,E=Jl(o,a),C=-1,R=c&Xe.Host?a[16][6]:null;for((-1===E||c&Xe.SkipSelf)&&(C=-1===E?fl(o,a):a[E+8],-1!==C&&eu(c,!1)?(v=a[1],E=gr(C),a=js(C,a)):E=-1);-1!==E;){const k=a[1];if(ma(g,E,k.data)){const B=Xl(E,a,l,v,c,R);if(B!==di)return B}C=a[E+8],-1!==C&&eu(c,a[1].data[E+8]===R)&&ma(g,E,a)?(v=k,E=gr(C),a=js(C,a)):E=-1}}return f}function Xl(o,a,l,c,f,g){const v=a[1],E=v.data[o+8],k=gl(E,v,l,null==c?ju(E)&&rc:c!=v&&0!=(3&E.type),f&Xe.Host&&g===E);return null!==k?Xi(a,v,k,E):di}function gl(o,a,l,c,f){const g=o.providerIndexes,v=a.data,E=1048575&g,C=o.directiveStart,k=g>>20,Q=f?E+k:o.directiveEnd;for(let oe=c?E:E+k;oe<Q;oe++){const Te=v[oe];if(oe<C&&l===Te||oe>=C&&Te.type===l)return oe}if(f){const oe=v[C];if(oe&&ui(oe)&&oe.type===l)return C}return null}function Xi(o,a,l,c){let f=o[l];const g=a.data;if(function tc(o){return o instanceof Ci}(f)){const v=f;v.resolving&&function nt(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${o}${l}`)}(function ve(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Ce(o)}(g[l]));const E=hl(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?xn(v.injectImpl):null;fd(o,c,Xe.Default);try{f=o[l]=v.factory(void 0,g,o,c),a.firstCreatePass&&l>=c.directiveStart&&function ec(o,a,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(c){const v=ad(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==C&&xn(C),hl(E),v.resolving=!1,pd()}}return f}function ma(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function eu(o,a){return!(o&Xe.Self||o&Xe.Host&&a)}class _a{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,c){return ga(this._tNode,this._lView,a,c,l)}}function sc(){return new _a(fr(),Ne())}function $s(o){return Mn(()=>{const a=o.prototype.constructor,l=a[Ir]||ya(a),c=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==c;){const g=f[Ir]||ya(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function ya(o){return Ge(o)?()=>{const a=ya(te(o));return a&&a()}:Br(o)}function va(o){const a=o[1],l=a.type;return 2===l?a.declTNode:1===l?o[6]:null}function tu(o){return function pl(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const g=l[f];if(cl(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(fr(),o)}const wa="__parameters__";function Ia(o,a,l){return Mn(()=>{const c=function oc(o){return function(...l){if(o){const c=o(...l);for(const f in c)this[f]=c[f]}}}(a);function f(...g){if(this instanceof f)return c.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(C,R,k){const B=C.hasOwnProperty(wa)?C[wa]:Object.defineProperty(C,wa,{value:[]})[wa];for(;B.length<=k;)B.push(null);return(B[k]=B[k]||[]).push(v),C}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Fn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=ln({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Vn(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let c=o[l];Array.isArray(c)?(a===o&&(a=o.slice(0,l)),Vn(c,a)):a!==o&&a.push(c)}return a}function Es(o,a){o.forEach(l=>Array.isArray(l)?Es(l,a):a(l))}function Co(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function mr(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Do(o,a){const l=[];for(let c=0;c<o;c++)l.push(a);return l}function at(o,a,l){let c=ns(o,a);return c>=0?o[1|c]=l:(c=~c,function Xh(o,a,l,c){let f=o.length;if(f==a)o.push(l,c);else if(1===f)o.push(c,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=c}}(o,c,a,l)),c}function ac(o,a){const l=ns(o,a);if(l>=0)return o[1|l]}function ns(o,a){return function ml(o,a,l){let c=0,f=o.length>>l;for(;f!==c;){const g=c+(f-c>>1),v=o[g<<l];if(a===v)return g<<l;v>a?f=g:c=g+1}return~(f<<l)}(o,a,1)}const Hi={},su="__NG_DI_FLAG__",zs="ngTempTokenPath",qr=/\n/gm,Sn="__source";let So;function Ao(o){const a=So;return So=o,a}function Xn(o,a=Xe.Default){if(void 0===So)throw new Ae(-203,!1);return null===So?Tr(o,void 0,a):So.get(o,a&Xe.Optional?null:void 0,a)}function Pn(o,a=Xe.Default){return(function ir(){return dr}()||Xn)(te(o),a)}function Di(o,a=Xe.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Pn(o,a)}function D(o){const a=[];for(let l=0;l<o.length;l++){const c=te(o[l]);if(Array.isArray(c)){if(0===c.length)throw new Ae(900,!1);let f,g=Xe.Default;for(let v=0;v<c.length;v++){const E=c[v],C=P(E);"number"==typeof C?-1===C?f=E.token:g|=C:f=E}a.push(Pn(f,g))}else a.push(Pn(c))}return a}function S(o,a){return o[su]=a,o.prototype[su]=a,o}function P(o){return o[su]}const be=S(Ia("Optional"),8),vt=S(Ia("SkipSelf"),4);var is=(()=>((is=is||{})[is.Important=1]="Important",is[is.DashCase=2]="DashCase",is))();const cc=new Map;let Eg=0;const m="__ngContext__";function _(o,a){hr(a)?(o[m]=a[20],function Dy(o){cc.set(o[20],o)}(a)):o[m]=a}function dc(o,a){return undefined(o,a)}function Il(o){const a=o[3];return vi(a)?a[3]:a}function bl(o){return Tg(o[13])}function Sa(o){return Tg(o[4])}function Tg(o){for(;null!==o&&!vi(o);)o=o[4];return o}function hu(o,a,l,c,f){if(null!=c){let g,v=!1;vi(c)?g=c:hr(c)&&(v=!0,c=c[0]);const E=qn(c);0===o&&null!==l?null==f?tI(a,l,E):fu(a,l,E,f||null,!0):1===o&&null!==l?fu(a,l,E,f||null,!0):2===o?function xg(o,a,l){const c=Ys(o,a);c&&function xy(o,a,l,c){o.removeChild(a,l,c)}(o,c,a,l)}(a,E,v):3===o&&a.destroyNode(E),null!=g&&function rS(o,a,l,c,f){const g=l[7];g!==qn(l)&&hu(a,o,c,g,f);for(let E=10;E<l.length;E++){const C=l[E];pc(C[1],C,o,a,c,g)}}(a,o,g,l,f)}}function df(o,a,l){return o.createElement(a,l)}function Q0(o,a){const l=o[9],c=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Yn(f,-1)),l.splice(c,1)}function Sy(o,a){if(o.length<=10)return;const l=10+a,c=o[l];if(c){const f=c[17];null!==f&&f!==o&&Q0(f,c),a>0&&(o[l-1][4]=c[4]);const g=mr(o,10+a);!function hc(o,a){pc(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function J0(o,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&pc(o,a,l,3,null,null),function QT(o){let a=o[13];if(!a)return Ay(o[1],o);for(;a;){let l=null;if(hr(a))l=a[13];else{const c=a[10];c&&(l=c)}if(!l){for(;a&&!a[4]&&a!==o;)hr(a)&&Ay(a[1],a),a=a[3];null===a&&(a=o),hr(a)&&Ay(a[1],a),l=a&&a[4]}a=l}}(a)}}function Ay(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function tS(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let c=0;c<l.length;c+=2){const f=a[l[c]];if(!(f instanceof Ci)){const g=l[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],C=g[v+1];try{C.call(E)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function eS(o,a){const l=o.cleanup,c=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],E="function"==typeof v?v(a):qn(a[v]),C=c[f=l[g+2]],R=l[g+3];"boolean"==typeof R?E.removeEventListener(l[g],C,R):R>=0?c[f=R]():c[f=-R].unsubscribe(),g+=2}else{const v=c[f=l[g+1]];l[g].call(v)}if(null!==c){for(let g=f+1;g<c.length;g++)(0,c[g])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&vi(a[3])){l!==a[3]&&Q0(l,a);const c=a[19];null!==c&&c.detachView(o)}!function xd(o){cc.delete(o[20])}(a)}}function X0(o,a,l){return function eI(o,a,l){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return l[0];if(2&c.flags){const f=o.data[c.directiveStart].encapsulation;if(f===yt.None||f===yt.Emulated)return null}return Sr(c,l)}(o,a.parent,l)}function fu(o,a,l,c,f){o.insertBefore(a,l,c,f)}function tI(o,a,l){o.appendChild(a,l)}function Ry(o,a,l,c,f){null!==c?fu(o,a,l,c,f):tI(o,a,l)}function Ys(o,a){return o.parentNode(a)}function My(o,a,l){return rI(o,a,l)}let pf,Fy,rI=function Py(o,a,l){return 40&o.type?Sr(o,l):null};function Rg(o,a,l,c){const f=X0(o,c,a),g=a[11],E=My(c.parent||a[6],c,a);if(null!=f)if(Array.isArray(l))for(let C=0;C<l.length;C++)Ry(g,f,l[C],E,!1);else Ry(g,f,l,E,!1)}function fc(o,a){if(null!==a){const l=a.type;if(3&l)return Sr(a,o);if(4&l)return hf(-1,o[a.index]);if(8&l){const c=a.child;if(null!==c)return fc(o,c);{const f=o[a.index];return vi(f)?hf(-1,f):qn(f)}}if(32&l)return dc(a,o)()||qn(o[a.index]);{const c=ky(o,a);return null!==c?Array.isArray(c)?c[0]:fc(Il(o[16]),c):fc(o,a.next)}}return null}function ky(o,a){return null!==a?o[16][6].projection[a.projection]:null}function hf(o,a){const l=10+o+1;if(l<a.length){const c=a[l],f=c[1].firstChild;if(null!==f)return fc(c,f)}return a[7]}function ff(o,a,l,c,f,g,v){for(;null!=l;){const E=c[l.index],C=l.type;if(v&&0===a&&(E&&_(qn(E),c),l.flags|=4),64!=(64&l.flags))if(8&C)ff(o,a,l.child,c,f,g,!1),hu(a,o,f,E,g);else if(32&C){const R=dc(l,c);let k;for(;k=R();)hu(a,o,f,k,g);hu(a,o,f,E,g)}else 16&C?kd(o,a,c,l,f,g):hu(a,o,f,E,g);l=v?l.projectionNext:l.next}}function pc(o,a,l,c,f,g){ff(l,c,o.firstChild,a,f,g,!1)}function kd(o,a,l,c,f,g){const v=l[16],C=v[6].projection[c.projection];if(Array.isArray(C))for(let R=0;R<C.length;R++)hu(a,o,f,C[R],g);else ff(o,a,C,v[3],f,g,!0)}function Mg(o,a,l){o.setAttribute(a,"style",l)}function Pg(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function pu(o){return function Ng(){if(void 0===pf&&(pf=null,kt.trustedTypes))try{pf=kt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return pf}()?.createHTML(o)||o}function oS(o){Fy=o}class Tl{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class cS extends Tl{getTypeName(){return"HTML"}}class dS extends Tl{getTypeName(){return"Style"}}class hS extends Tl{getTypeName(){return"Script"}}class Vy extends Tl{getTypeName(){return"URL"}}class Qs extends Tl{getTypeName(){return"ResourceURL"}}function Aa(o){return o instanceof Tl?o.changingThisBreaksApplicationSecurity:o}function Ra(o,a){const l=function fS(o){return o instanceof Tl&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function pS(o){return new cS(o)}function sI(o){return new dS(o)}function Og(o){return new hS(o)}function gS(o){return new Vy(o)}function mS(o){return new Qs(o)}class _f{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(pu(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class _S{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=pu(a),l;const c=this.inertDocument.createElement("body");return c.innerHTML=pu(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const yf=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function gu(o){return(o=String(o)).match(yf)?o:"unsafe:"+o}function Sl(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function vf(...o){const a={};for(const l of o)for(const c in l)l.hasOwnProperty(c)&&(a[c]=!0);return a}const oI=Sl("area,br,col,hr,img,wbr"),aI=Sl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),lI=Sl("rp,rt"),wf=vf(oI,vf(aI,Sl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vf(lI,Sl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vf(lI,aI)),Od=Sl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uI=vf(Od,Sl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Sl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vS=Sl("script,style,template");class wS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!wf.hasOwnProperty(l))return this.sanitizedSomething=!0,!vS.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=a.attributes;for(let f=0;f<c.length;f++){const g=c.item(f),v=g.name,E=v.toLowerCase();if(!uI.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let C=g.value;Od[E]&&(C=gu(C)),this.buf.push(" ",v,'="',cI(C),'"')}return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();wf.hasOwnProperty(l)&&!oI.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(cI(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const ES=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,IS=/([^\#-~ |!])/g;function cI(o){return o.replace(/&/g,"&amp;").replace(ES,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(IS,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Lg;function dI(o,a){let l=null;try{Lg=Lg||function gc(o){const a=new _S(o);return function yS(){try{return!!(new window.DOMParser).parseFromString(pu(""),"text/html")}catch{return!1}}()?new _f(a):a}(o);let c=a?String(a):"";l=Lg.getInertBodyElement(c);let f=5,g=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=g,g=l.innerHTML,l=Lg.getInertBodyElement(c)}while(c!==g);return pu((new wS).sanitizeChildren(Fg(l)||l))}finally{if(l){const c=Fg(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Fg(o){return"content"in o&&function bS(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function Ld(o){const a=function mu(){const o=Ne();return o&&o[12]}();return a?a.sanitize(_r.URL,o)||"":Ra(o,"URL")?Aa(o):gu(Ce(o))}const Ug=new Fn("ENVIRONMENT_INITIALIZER"),Fd=new Fn("INJECTOR",-1),Hy=new Fn("INJECTOR_DEF_TYPES");class gI{get(a,l=Hi){if(l===Hi){const c=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw c.name="NullInjectorError",c}return l}}function AS(...o){return{\u0275providers:mI(0,o)}}function mI(o,...a){const l=[],c=new Set;let f;return Es(a,g=>{const v=g;jy(v,l,[],c)&&(f||(f=[]),f.push(v))}),void 0!==f&&_I(f,l),l}function _I(o,a){for(let l=0;l<o.length;l++){const{providers:f}=o[l];Es(f,g=>{a.push(g)})}}function jy(o,a,l,c){if(!(o=te(o)))return!1;let f=null,g=Zi(o);const v=!g&&N(o);if(g||v){if(v&&!v.standalone)return!1;f=o}else{const C=o.ngModule;if(g=Zi(C),!g)return!1;f=C}const E=c.has(f);if(v){if(E)return!1;if(c.add(f),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of C)jy(R,a,l,c)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let R;c.add(f);try{Es(g.imports,k=>{jy(k,a,l,c)&&(R||(R=[]),R.push(k))})}finally{}void 0!==R&&_I(R,a)}if(!E){const R=Br(f)||(()=>new f);a.push({provide:f,useFactory:R,deps:xt},{provide:Hy,useValue:f,multi:!0},{provide:Ug,useValue:()=>Pn(f),multi:!0})}const C=g.providers;null==C||E||Es(C,k=>{a.push(k)})}}return f!==o&&void 0!==o.providers}const RS=we({provide:String,useValue:we});function Wy(o){return null!==o&&"object"==typeof o&&RS in o}function mc(o){return"function"==typeof o}const Gy=new Fn("Set Injector scope."),If={},MS={};let Bg;function bf(){return void 0===Bg&&(Bg=new gI),Bg}class _u{}class zy extends _u{constructor(a,l,c,f){super(),this.parent=l,this.source=c,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jg(a,v=>this.processProvider(v)),this.records.set(Fd,Vd(void 0,this)),f.has("environment")&&this.records.set(_u,Vd(void 0,this));const g=this.records.get(Gy);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Hy.multi,xt,Xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=Ao(this),c=xn(void 0);try{return a()}finally{Ao(l),xn(c)}}get(a,l=Hi,c=Xe.Default){this.assertNotDestroyed();const f=Ao(this),g=xn(void 0);try{if(!(c&Xe.SkipSelf)){let E=this.records.get(a);if(void 0===E){const C=function EI(o){return"function"==typeof o||"object"==typeof o&&o instanceof Fn}(a)&&Ur(a);E=C&&this.injectableDefInScope(C)?Vd(Hg(a),If):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(c&Xe.Self?bf():this.parent).get(a,l=c&Xe.Optional&&l===Hi?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[zs]=v[zs]||[]).unshift(me(a)),f)throw v;return function $(o,a,l,c){const f=o[zs];throw a[Sn]&&f.unshift(a[Sn]),o.message=function X(o,a,l,c=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):me(E)))}f=`{${g.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${o.replace(qr,"\n  ")}`}("\n"+o.message,f,l,c),o.ngTokenPath=f,o[zs]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{xn(g),Ao(f)}}resolveInjectorInitializers(){const a=Ao(this),l=xn(void 0);try{const c=this.get(Ug.multi,xt,Xe.Self);for(const f of c)f()}finally{Ao(a),xn(l)}}toString(){const a=[],l=this.records;for(const c of l.keys())a.push(me(c));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(a){let l=mc(a=te(a))?a:te(a&&a.provide);const c=function NS(o){return Wy(o)?Vd(void 0,o.useValue):Vd(wI(o),If)}(a);if(mc(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=Vd(void 0,If,!0),f.factory=()=>D(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,c)}hydrate(a,l){return l.value===If&&(l.value=MS,l.value=l.factory()),"object"==typeof l.value&&l.value&&function OS(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=te(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function Hg(o){const a=Ur(o),l=null!==a?a.factory:Br(o);if(null!==l)return l;if(o instanceof Fn)throw new Ae(204,!1);if(o instanceof Function)return function PS(o){const a=o.length;if(a>0)throw Do(a,"?"),new Ae(204,!1);const l=function Gn(o){const a=o&&(o[Xr]||o[Vi]);if(a){const l=function Ki(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Ae(204,!1)}function wI(o,a,l){let c;if(mc(o)){const f=te(o);return Br(f)||Hg(f)}if(Wy(o))c=()=>te(o.useValue);else if(function vI(o){return!(!o||!o.useFactory)}(o))c=()=>o.useFactory(...D(o.deps||[]));else if(function yI(o){return!(!o||!o.useExisting)}(o))c=()=>Pn(te(o.useExisting));else{const f=te(o&&(o.useClass||o.provide));if(!function kS(o){return!!o.deps}(o))return Br(f)||Hg(f);c=()=>new f(...D(o.deps))}return c}function Vd(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function qy(o){return!!o.\u0275providers}function jg(o,a){for(const l of o)Array.isArray(l)?jg(l,a):qy(l)?jg(l.\u0275providers,a):a(l)}class LS{}class VS{resolveComponentFactory(a){throw function FS(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let yu=(()=>{class o{}return o.NULL=new VS,o})();function CI(){return vu(fr(),Ne())}function vu(o,a){return new _c(Sr(o,a))}let _c=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=CI,o})();function US(o){return o instanceof _c?o.nativeElement:o}class Cf{}let BS=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function HS(){const o=Ne(),l=hn(fr().index,o);return(hr(l)?l:o)[11]}(),o})(),jS=(()=>{class o{}return o.\u0275prov=ln({token:o,providedIn:"root",factory:()=>null}),o})();class DI{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const TI=new DI("14.2.12"),$g={};function Wg(o){return o.ngOriginalError}class wu{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Wg(a);for(;l&&Wg(l);)l=Wg(l);return l||null}}function xa(o){return o instanceof Function?o():o}function Zy(o,a,l){let c=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===c||o.charCodeAt(f+g)<=32)return f}l=f+1}}const qg="ng-template";function ZS(o,a,l){let c=0;for(;c<o.length;){let f=o[c++];if(l&&"class"===f){if(f=o[c],-1!==Zy(f.toLowerCase(),a,0))return!0}else if(1===f){for(;c<o.length&&"string"==typeof(f=o[c++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function AI(o){return 4===o.type&&o.value!==qg}function YS(o,a,l){return a===(4!==o.type||l?o.value:qg)}function RI(o,a,l){let c=4;const f=o.attrs||[],g=function xI(o){for(let a=0;a<o.length;a++)if(cl(o[a]))return a;return o.length}(f);let v=!1;for(let E=0;E<a.length;E++){const C=a[E];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!YS(o,C,l)||""===C&&1===a.length){if(Po(c))return!1;v=!0}}else{const R=8&c?C:a[++E];if(8&c&&null!==o.attrs){if(!ZS(o.attrs,R,l)){if(Po(c))return!1;v=!0}continue}const B=Tk(8&c?"class":C,f,AI(o),l);if(-1===B){if(Po(c))return!1;v=!0;continue}if(""!==R){let Q;Q=B>g?"":f[B+1].toLowerCase();const oe=8&c?Q:null;if(oe&&-1!==Zy(oe,R,0)||2&c&&R!==Q){if(Po(c))return!1;v=!0}}}}else{if(!v&&!Po(c)&&!Po(C))return!1;if(v&&Po(C))continue;v=!1,c=C|1&c}}return Po(c)||v}function Po(o){return 0==(1&o)}function Tk(o,a,l,c){if(null===a)return-1;let f=0;if(c||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function QS(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const c=o[l];if("number"==typeof c)return-1;if(c===a)return l;l++}return-1}(a,o)}function Tf(o,a,l=!1){for(let c=0;c<a.length;c++)if(RI(o,a[c],l))return!0;return!1}function JS(o,a){e:for(let l=0;l<a.length;l++){const c=a[l];if(o.length===c.length){for(let f=0;f<o.length;f++)if(o[f]!==c[f])continue e;return!0}}return!1}function Yy(o,a){return o?":not("+a.trim()+")":a}function XS(o){let a=o[0],l=1,c=2,f="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&c){const E=o[++l];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?f+="."+v:4&c&&(f+=" "+v);else""!==f&&!Po(v)&&(a+=Yy(g,f),f=""),c=v,g=g||!Po(c);l++}return""!==f&&(a+=Yy(g,f)),a}const Zt={};function MI(o){Qy(en(),Ne(),Wn()+o,!1)}function Qy(o,a,l,c){if(!c)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&ca(a,g,l)}else{const g=o.preOrderHooks;null!==g&&da(a,g,0,l)}ys(l)}function kI(o,a=null,l=null,c){const f=OI(o,a,l,c);return f.resolveInjectorInitializers(),f}function OI(o,a=null,l=null,c,f=new Set){const g=[l||xt,AS(o)];return c=c||("object"==typeof o?void 0:me(o)),new zy(g,a||bf(),c||null,f)}let bs=(()=>{class o{static create(l,c){if(Array.isArray(l))return kI({name:""},c,l,"");{const f=l.name??"";return kI({name:f},l.parent,l.providers,f)}}}return o.THROW_IF_NOT_FOUND=Hi,o.NULL=new gI,o.\u0275prov=ln({token:o,providedIn:"any",factory:()=>Pn(Fd)}),o.__NG_ELEMENT_ID__=-1,o})();function Ec(o,a=Xe.Default){const l=Ne();return null===l?Pn(o,a):ga(fr(),l,te(o),a)}function av(){throw new Error("invalid")}function ni(o,a){return o<<17|a<<2}function ri(o){return o>>17&32767}function $I(o){return 2|o}function Cs(o){return(131068&o)>>2}function Af(o,a){return-131069&o|a<<2}function Ud(o){return 1|o}function XI(o,a){const l=o.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],g=l[c+1];if(-1!==g){const v=o.data[g];Yu(f),v.contentQueries(2,a[g],g)}}}function _v(o,a,l,c,f,g,v,E,C,R,k){const B=a.blueprint.slice();return B[0]=f,B[2]=76|c,(null!==k||o&&1024&o[2])&&(B[2]|=1024),Ja(B),B[3]=B[15]=o,B[8]=l,B[10]=v||o&&o[10],B[11]=E||o&&o[11],B[12]=C||o&&o[12]||null,B[9]=R||o&&o[9]||null,B[6]=g,B[20]=function Cy(){return Eg++}(),B[21]=k,B[16]=2==a.type?o[16]:B,B}function jd(o,a,l,c,f){let g=o.data[a];if(null===g)g=function im(o,a,l,c,f){const g=oa(),v=ql(),C=o.data[a]=function Lk(o,a,l,c,f,g){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,c,f);return null===o.firstChild&&(o.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(o,a,l,c,f),function dd(){return Vt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=c,g.attrs=f;const v=function zl(){const o=Vt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return ti(g,!0),g}function Nf(o,a,l,c){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(c),o.blueprint.push(c),o.data.push(null);return f}function kf(o,a,l){ua(a);try{const c=o.viewQuery;null!==c&&xv(1,c,l);const f=o.template;null!==f&&yv(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&XI(o,a),o.staticViewQueries&&xv(2,o.viewQuery,l);const g=o.components;null!==g&&function gA(o,a){for(let l=0;l<a.length;l++)CA(o,a[l])}(a,g)}catch(c){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),c}finally{a[2]&=-5,Bs()}}function sm(o,a,l,c){const f=a[2];if(128!=(128&f)){ua(a);try{Ja(a),function il(o){return Vt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&yv(o,a,l,2,c);const v=3==(3&f);if(v){const R=o.preOrderCheckHooks;null!==R&&ca(a,R,null)}else{const R=o.preOrderHooks;null!==R&&da(a,R,0,null),_d(a,0)}if(function bA(o){for(let a=bl(o);null!==a;a=Sa(a)){if(!a[2])continue;const l=a[9];for(let c=0;c<l.length;c++){const f=l[c],g=f[3];0==(512&f[2])&&Yn(g,1),f[2]|=512}}}(a),function Av(o){for(let a=bl(o);null!==a;a=Sa(a))for(let l=10;l<a.length;l++){const c=a[l],f=c[1];Us(c)&&sm(f,c,f.template,c[8])}}(a),null!==o.contentQueries&&XI(o,a),v){const R=o.contentCheckHooks;null!==R&&ca(a,R)}else{const R=o.contentHooks;null!==R&&da(a,R,1),_d(a,1)}!function JI(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)ys(~f);else{const g=f,v=l[++c],E=l[++c];hd(v,g),E(2,a[g])}}}finally{ys(-1)}}(o,a);const E=o.components;null!==E&&function eb(o,a){for(let l=0;l<a.length;l++)Rv(o,a[l])}(a,E);const C=o.viewQuery;if(null!==C&&xv(2,C,c),v){const R=o.viewCheckHooks;null!==R&&ca(a,R)}else{const R=o.viewHooks;null!==R&&da(a,R,2),_d(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Yn(a[3],-1))}finally{Bs()}}}function yv(o,a,l,c,f){const g=Wn(),v=2&c;try{ys(-1),v&&a.length>22&&Qy(o,a,22,!1),l(c,f)}finally{ys(g)}}function om(o,a,l){if(Yo(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function vv(o,a,l){!vo()||(function Cv(o,a,l,c){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||ws(l,a),_(c,a);const v=l.initialInputs;for(let E=f;E<g;E++){const C=o.data[E],R=ui(C);R&&lb(a,l,C);const k=Xi(a,o,E,l);_(k,a),null!==v&&ub(0,E-f,k,C,0,v),R&&(hn(l.index,a)[8]=k)}}(o,a,l,Sr(l,a)),128==(128&l.flags)&&function yA(o,a,l){const c=l.directiveStart,f=l.directiveEnd,g=l.index,v=function Hh(){return Vt.lFrame.currentDirectiveIndex}();try{ys(g);for(let E=c;E<f;E++){const C=o.data[E],R=a[E];la(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Dv(C,R)}}finally{ys(-1),la(v)}}(o,a,l))}function tb(o,a,l=Sr){const c=a.localNames;if(null!==c){let f=a.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],E=-1===v?l(a,o):o[v];o[f++]=E}}}function nb(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=bc(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function bc(o,a,l,c,f,g,v,E,C,R){const k=22+c,B=k+f,Q=function wv(o,a){const l=[];for(let c=0;c<a;c++)l.push(c<o?null:Zt);return l}(k,B),oe="function"==typeof R?R():R;return Q[1]={type:o,blueprint:Q,template:l,queries:null,viewQuery:E,declTNode:a,data:Q.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:oe,incompleteFirstPass:!1}}function ss(o,a,l,c){const f=Mv(a);null===l?f.push(c):(f.push(l),o.firstCreatePass&&hb(o).push(c,f.length-1))}function ib(o,a,l){for(let c in o)if(o.hasOwnProperty(c)){const f=o[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(a,f):l[c]=[a,f]}return l}function Ev(o,a){const c=a.directiveEnd,f=o.data,g=a.attrs,v=[];let E=null,C=null;for(let R=a.directiveStart;R<c;R++){const k=f[R],B=k.inputs,Q=null===g||AI(a)?null:IA(B,g);v.push(Q),E=ib(B,R,E),C=ib(k.outputs,R,C)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=E,a.outputs=C}function _A(o,a){const l=hn(a,o);16&l[2]||(l[2]|=32)}function Iv(o,a,l,c){let f=!1;if(vo()){const g=function vA(o,a,l){const c=o.directiveRegistry;let f=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];Tf(l,v.selectors,!1)&&(f||(f=[]),Eo(ws(l,a),o,v.type),ui(v)?(wA(o,l),f.unshift(v)):f.push(v))}return f}(o,a,l),v=null===c?null:{"":-1};if(null!==g){f=!0,Tv(l,o.data.length,g.length);for(let k=0;k<g.length;k++){const B=g[k];B.providersResolver&&B.providersResolver(B)}let E=!1,C=!1,R=Nf(o,a,g.length,null);for(let k=0;k<g.length;k++){const B=g[k];l.mergedAttrs=dl(l.mergedAttrs,B.hostAttrs),ab(o,l,a,R,B),EA(R,B,v),null!==B.contentQueries&&(l.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(l.flags|=128);const Q=B.type.prototype;!E&&(Q.ngOnChanges||Q.ngOnInit||Q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),E=!0),!C&&(Q.ngOnChanges||Q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),C=!0),R++}Ev(o,l)}v&&function ob(o,a,l){if(a){const c=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Ae(-301,!1);c.push(a[f],g)}}}(l,c,v)}return l.mergedAttrs=dl(l.mergedAttrs,l.attrs),f}function bv(o,a,l,c,f,g){const v=g.hostBindings;if(v){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const C=~a.index;(function Of(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=C&&E.push(C),E.push(c,f,v)}}function Dv(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function wA(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function EA(o,a,l){if(l){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)l[a.exportAs[c]]=o;ui(a)&&(l[""]=o)}}function Tv(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function ab(o,a,l,c,f){o.data[c]=f;const g=f.factory||(f.factory=Br(f.type)),v=new Ci(g,ui(f),Ec);o.blueprint[c]=v,l[c]=v,bv(o,a,0,c,Nf(o,l,f.hostVars,Zt),f)}function lb(o,a,l){const c=Sr(a,o),f=nb(l),g=o[10],v=cm(o,_v(o,f,null,l.onPush?32:16,c,a,g,g.createRenderer(c,l),null,null,null));o[a.index]=v}function eo(o,a,l,c,f,g){const v=Sr(o,a);!function Sv(o,a,l,c,f,g,v){if(null==g)o.removeAttribute(a,f,l);else{const E=null==v?Ce(g):v(g,c||"",f);o.setAttribute(a,f,E,l)}}(a[11],v,g,o.value,l,c,f)}function ub(o,a,l,c,f,g){const v=g[a];if(null!==v){const E=c.setInput;for(let C=0;C<v.length;){const R=v[C++],k=v[C++],B=v[C++];null!==E?c.setInput(l,B,R,k):l[k]=B}}}function IA(o,a){let l=null,c=0;for(;c<a.length;){const f=a[c];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[c+1])),c+=2}else c+=2;else c+=4}return l}function cb(o,a,l,c){return new Array(o,!0,!1,a,null,0,c,l,null,null)}function Rv(o,a){const l=hn(a,o);if(Us(l)){const c=l[1];48&l[2]?sm(c,l,c.template,l[8]):l[5]>0&&lm(l)}}function lm(o){for(let c=bl(o);null!==c;c=Sa(c))for(let f=10;f<c.length;f++){const g=c[f];if(Us(g))if(512&g[2]){const v=g[1];sm(v,g,v.template,g[8])}else g[5]>0&&lm(g)}const l=o[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=hn(l[c],o);Us(f)&&f[5]>0&&lm(f)}}function CA(o,a){const l=hn(a,o),c=l[1];(function um(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(c,l),kf(c,l,l[8])}function cm(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function dm(o){for(;o;){o[2]|=32;const a=Il(o);if($u(o)&&!a)return o;o=a}return null}function hm(o,a,l,c=!0){const f=a[10];f.begin&&f.begin();try{sm(o,a,o.template,l)}catch(v){throw c&&fm(a,v),v}finally{f.end&&f.end()}}function xv(o,a,l){Yu(0),a(o,l)}function Mv(o){return o[7]||(o[7]=[])}function hb(o){return o.cleanup||(o.cleanup=[])}function fm(o,a){const l=o[9],c=l?l.get(wu,null):null;c&&c.handleError(a)}function Pv(o,a,l,c,f){for(let g=0;g<l.length;){const v=l[g++],E=l[g++],C=a[v],R=o.data[v];null!==R.setInput?R.setInput(C,f,c,E):C[E]=f}}function Lf(o,a,l){let c=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?g=E:1==g?f=Ee(f,E):2==g&&(c=Ee(c,E+": "+a[++v]+";"))}l?o.styles=c:o.stylesWithoutHost=c,l?o.classes=f:o.classesWithoutHost=f}function Na(o,a,l,c,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&c.push(qn(g)),vi(g))for(let E=10;E<g.length;E++){const C=g[E],R=C[1].firstChild;null!==R&&Na(C[1],C,R,c)}const v=l.type;if(8&v)Na(o,a,l.child,c);else if(32&v){const E=dc(l,a);let C;for(;C=E();)c.push(C)}else if(16&v){const E=ky(a,l);if(Array.isArray(E))c.push(...E);else{const C=Il(a[16]);Na(C[1],C,E,c,!0)}}l=f?l.projectionNext:l.next}return c}class Ff{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return Na(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(vi(a)){const l=a[8],c=l?l.indexOf(this):-1;c>-1&&(Sy(a,c),mr(l,c))}this._attachedToViewContainer=!1}J0(this._lView[1],this._lView)}onDestroy(a){ss(this._lView[1],this._lView,null,a)}markForCheck(){dm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){hm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Y0(o,a){pc(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=a}}class fb extends Ff{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;hm(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class Nv extends yu{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=N(a);return new Cc(l,this.ngModule)}}function kv(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class SA{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,c){const f=this.injector.get(a,$g,c);return f!==$g||l===$g?f:this.parentInjector.get(a,l,c)}}class Cc extends LS{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function eA(o){return o.map(XS).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return kv(this.componentDef.inputs)}get outputs(){return kv(this.componentDef.outputs)}create(a,l,c,f){let g=(f=f||this.ngModule)instanceof _u?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new SA(a,g):a,E=v.get(Cf,null);if(null===E)throw new Ae(407,!1);const C=v.get(jS,null),R=E.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",B=c?function rb(o,a,l){return o.selectRootElement(a,l===yt.ShadowDom)}(R,c,this.componentDef.encapsulation):df(R,k,function TA(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(k)),Q=this.componentDef.onPush?288:272,oe=bc(0,null,null,1,0,null,null,null,null,null),Te=_v(null,oe,null,Q,null,null,E,R,C,v,null);let We,Ye;ua(Te);try{const pt=function mb(o,a,l,c,f,g){const v=l[1];l[22]=o;const C=jd(v,22,2,"#host",null),R=C.mergedAttrs=a.hostAttrs;null!==R&&(Lf(C,R,!0),null!==o&&(vs(f,o,R),null!==C.classes&&Pg(f,o,C.classes),null!==C.styles&&Mg(f,o,C.styles)));const k=c.createRenderer(o,a),B=_v(l,nb(a),null,a.onPush?32:16,l[22],C,c,k,g||null,null,null);return v.firstCreatePass&&(Eo(ws(C,l),v,a.type),wA(v,C),Tv(C,l.length,1)),cm(l,B),l[22]=B}(B,this.componentDef,Te,E,R);if(B)if(c)vs(R,B,["ng-version",TI.full]);else{const{attrs:Rt,classes:Oe}=function tA(o){const a=[],l=[];let c=1,f=2;for(;c<o.length;){let g=o[c];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++c]):8===f&&l.push(g);else{if(!Po(f))break;f=g}c++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Rt&&vs(R,B,Rt),Oe&&Oe.length>0&&Pg(R,B,Oe.join(" "))}if(Ye=ra(oe,22),void 0!==l){const Rt=Ye.projection=[];for(let Oe=0;Oe<this.ngContentSelectors.length;Oe++){const Mt=l[Oe];Rt.push(null!=Mt?Array.from(Mt):null)}}We=function AA(o,a,l,c){const f=l[1],g=function sb(o,a,l){const c=fr();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),ab(o,c,a,Nf(o,a,1,null),l),Ev(o,c));const f=Xi(a,o,c.directiveStart,c);_(f,a);const g=Sr(c,a);return g&&_(g,a),f}(f,l,a);if(o[8]=l[8]=g,null!==c)for(const E of c)E(g,a);if(a.contentQueries){const E=fr();a.contentQueries(1,g,E.directiveStart)}const v=fr();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ys(v.index),bv(l[1],v,0,v.directiveStart,v.directiveEnd,a),Dv(a,g)),g}(pt,this.componentDef,Te,[_b]),kf(oe,Te,null)}finally{Bs()}return new gb(this.componentType,We,vu(Ye,Te),Te,Ye)}}class gb extends class II{}{constructor(a,l,c,f,g){super(),this.location=c,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new fb(f),this.componentType=a}setInput(a,l){const c=this._tNode.inputs;let f;if(null!==c&&(f=c[a])){const g=this._rootLView;Pv(g[1],g,f,a,l),_A(g,this._tNode.index)}}get injector(){return new _a(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function _b(){const o=fr();Kl(Ne()[1],o)}function pm(o){let a=function yb(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const c=[o];for(;a;){let f;if(ui(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ae(903,!1);f=a.\u0275dir}if(f){if(l){c.push(f);const v=o;v.inputs=vb(o.inputs),v.declaredInputs=vb(o.declaredInputs),v.outputs=vb(o.outputs);const E=f.hostBindings;E&&RA(o,E);const C=f.viewQuery,R=f.contentQueries;if(C&&Wk(o,C),R&&wb(o,R),ge(o.inputs,f.inputs),ge(o.declaredInputs,f.declaredInputs),ge(o.outputs,f.outputs),ui(f)&&f.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(o),E===pm&&(l=!1)}}a=Object.getPrototypeOf(a)}!function $k(o){let a=0,l=null;for(let c=o.length-1;c>=0;c--){const f=o[c];f.hostVars=a+=f.hostVars,f.hostAttrs=dl(f.hostAttrs,l=dl(l,f.hostAttrs))}}(c)}function vb(o){return o===Wr?{}:o===xt?[]:o}function Wk(o,a){const l=o.viewQuery;o.viewQuery=l?(c,f)=>{a(c,f),l(c,f)}:a}function wb(o,a){const l=o.contentQueries;o.contentQueries=l?(c,f,g)=>{a(c,f,g),l(c,f,g)}:a}function RA(o,a){const l=o.hostBindings;o.hostBindings=l?(c,f)=>{a(c,f),l(c,f)}:a}let Ov=null;function Iu(){if(!Ov){const o=kt.Symbol;if(o&&o.iterator)Ov=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const c=a[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ov=c)}}}return Ov}function gm(o){return!!ko(o)&&(Array.isArray(o)||!(o instanceof Map)&&Iu()in o)}function ko(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function $i(o,a,l){return o[a]=l}function Ai(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function Dc(o,a,l,c){const f=Ai(o,a,l);return Ai(o,a+1,c)||f}function Ds(o,a,l,c,f,g){const v=Dc(o,a,l,c);return Dc(o,a+2,f,g)||v}function _m(o,a,l,c){const f=Ne();return Ai(f,sl(),a)&&(en(),eo(Bn(),f,o,a,l,c)),_m}function kA(o,a,l,c,f,g,v,E){const C=Ne(),R=en(),k=o+22,B=R.firstCreatePass?function Zk(o,a,l,c,f,g,v,E,C){const R=a.consts,k=jd(a,o,4,v||null,bi(R,E));Iv(a,l,k,bi(R,C)),Kl(a,k);const B=k.tViews=bc(2,k,c,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R);return null!==a.queries&&(a.queries.template(a,k),B.queries=a.queries.embeddedTView(k)),k}(k,R,C,a,l,c,f,g,v):R.data[k];ti(B,!1);const Q=C[11].createComment("");Rg(R,C,Q,B),_(Q,C),cm(C,C[k]=cb(Q,C,Q,B)),Ka(B)&&vv(R,C,B),null!=v&&tb(C,B,E)}function os(o){return function Qi(o,a){return o[a]}(function rl(){return Vt.lFrame.contextLView}(),22+o)}function Lo(o,a,l){const c=Ne();return Ai(c,sl(),a)&&function Xs(o,a,l,c,f,g,v,E){const C=Sr(a,l);let k,R=a.inputs;!E&&null!=R&&(k=R[c])?(Pv(o,l,k,c,f),ju(a)&&_A(l,a.index)):3&a.type&&(c=function Fk(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(c),f=null!=v?v(f,a.value||"",c):f,g.setProperty(C,c,f))}(en(),Bn(),c,o,a,c[11],l,!1),Lo}function U(o,a,l,c,f){const v=f?"class":"style";Pv(o,l,a.inputs[v],v,c)}function Wd(o,a,l,c){const f=Ne(),g=en(),v=22+o,E=f[11],C=f[v]=df(E,a,function Xu(){return Vt.lFrame.currentNamespace}()),R=g.firstCreatePass?function Fo(o,a,l,c,f,g,v){const E=a.consts,R=jd(a,o,2,f,bi(E,g));return Iv(a,l,R,bi(E,v)),null!==R.attrs&&Lf(R,R.attrs,!1),null!==R.mergedAttrs&&Lf(R,R.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,R),R}(v,g,f,0,a,l,c):g.data[v];ti(R,!0);const k=R.mergedAttrs;null!==k&&vs(E,C,k);const B=R.classes;null!==B&&Pg(E,C,B);const Q=R.styles;return null!==Q&&Mg(E,C,Q),64!=(64&R.flags)&&Rg(g,f,C,R),0===function el(){return Vt.lFrame.elementDepthCount}()&&_(C,f),function cd(){Vt.lFrame.elementDepthCount++}(),Ka(R)&&(vv(g,f,R),om(g,R,f)),null!==c&&tb(f,R),Wd}function Bf(){let o=fr();ql()?aa():(o=o.parent,ti(o,!1));const a=o;!function tl(){Vt.lFrame.elementDepthCount--}();const l=en();return l.firstCreatePass&&(Kl(l,o),Yo(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Yl(o){return 0!=(16&o.flags)}(a)&&U(l,a,Ne(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ql(o){return 0!=(32&o.flags)}(a)&&U(l,a,Ne(),a.stylesWithoutHost,!1),Bf}function Lv(o,a,l,c){return Wd(o,a,l,c),Bf(),Lv}function ym(o,a,l){const c=Ne(),f=en(),g=o+22,v=f.firstCreatePass?function fi(o,a,l,c,f){const g=a.consts,v=bi(g,c),E=jd(a,o,8,"ng-container",v);return null!==v&&Lf(E,v,!0),Iv(a,l,E,bi(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,c,a,l):f.data[g];ti(v,!0);const E=c[g]=c[11].createComment("");return Rg(f,c,E,v),_(E,c),Ka(v)&&(vv(f,c,v),om(f,v,c)),null!=l&&tb(c,v),ym}function Tc(){let o=fr();const a=en();return ql()?aa():(o=o.parent,ti(o,!1)),a.firstCreatePass&&(Kl(a,o),Yo(o)&&a.queries.elementEnd(o)),Tc}function Hf(o,a,l){return ym(o,a,l),Tc(),Hf}function Rb(){return Ne()}function Fv(o){return!!o&&"function"==typeof o.then}function xb(o){return!!o&&"function"==typeof o.subscribe}const Vv=xb;function Uv(o,a,l,c){const f=Ne(),g=en(),v=fr();return function Pb(o,a,l,c,f,g,v,E){const C=Ka(c),k=o.firstCreatePass&&hb(o),B=a[8],Q=Mv(a);let oe=!0;if(3&c.type||E){const Ye=Sr(c,a),pt=E?E(Ye):Ye,Rt=Q.length,Oe=E?zt=>E(qn(zt[c.index])):c.index;let Mt=null;if(!E&&C&&(Mt=function OA(o,a,l,c){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===c){const E=a[7],C=f[g+2];return E.length>C?E[C]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,c.index)),null!==Mt)(Mt.__ngLastListenerFn__||Mt).__ngNextListenerFn__=g,Mt.__ngLastListenerFn__=g,oe=!1;else{g=jf(c,a,B,g,!1);const zt=l.listen(pt,f,g);Q.push(g,zt),k&&k.push(f,Oe,Rt,Rt+1)}}else g=jf(c,a,B,g,!1);const Te=c.outputs;let We;if(oe&&null!==Te&&(We=Te[f])){const Ye=We.length;if(Ye)for(let pt=0;pt<Ye;pt+=2){const nr=a[We[pt]][We[pt+1]].subscribe(g),Cn=Q.length;Q.push(g,nr),k&&k.push(f,c.index,Cn,-(Cn+1))}}}(g,f,f[11],v,o,a,0,c),Uv}function Ri(o,a,l,c){try{return!1!==l(c)}catch(f){return fm(o,f),!1}}function jf(o,a,l,c,f){return function g(v){if(v===Function)return c;dm(2&o.flags?hn(o.index,a):a);let C=Ri(a,0,c,v),R=g.__ngNextListenerFn__;for(;R;)C=Ri(a,0,R,v)&&C,R=R.__ngNextListenerFn__;return f&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function Bv(o=1){return function Hs(o){return(Vt.lFrame.contextLView=function gd(o,a){for(;o>0;)a=a[15],o--;return a}(o,Vt.lFrame.contextLView))[8]}(o)}function Hv(o,a){let l=null;const c=function Sk(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===c?Tf(o,g,!0):JS(c,g))return f}else l=f}return l}function $f(o){const a=Ne()[16][6];if(!a.projection){const c=a.projection=Do(o?o.length:1,null),f=c.slice();let g=a.child;for(;null!==g;){const v=o?Hv(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:c[v]=g,f[v]=g),g=g.next}}}function vm(o,a=0,l){const c=Ne(),f=en(),g=jd(f,22+o,16,null,l||null);null===g.projection&&(g.projection=a),aa(),64!=(64&g.flags)&&function nS(o,a,l){kd(a[11],0,a,l,X0(o,l,a),My(l.parent||a[6],l,a))}(f,c,g)}function Fb(o,a,l,c,f){const g=o[l+1],v=null===a;let E=c?ri(g):Cs(g),C=!1;for(;0!==E&&(!1===C||v);){const k=o[E+1];Vb(o[E],a)&&(C=!0,o[E+1]=c?Ud(k):$I(k)),E=c?ri(k):Cs(k)}C&&(o[l+1]=c?$I(g):Ud(g))}function Vb(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ns(o,a)>=0}const Mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Gv(o){return o.substring(Mr.key,Mr.keyEnd)}function zd(o,a){const l=Mr.textEnd;return l===a?-1:(a=Mr.keyEnd=function qv(o,a,l){for(;a<l&&o.charCodeAt(a)>32;)a++;return a}(o,Mr.key=a,l),qd(o,a,l))}function qd(o,a,l){for(;a<l&&o.charCodeAt(a)<=32;)a++;return a}function Kd(o,a){return function Uo(o,a,l,c){const f=Ne(),g=en(),v=_s(2);g.firstUpdatePass&&Qv(g,o,v,c),a!==Zt&&Ai(f,v,a)&&zf(g,g.data[Wn()],f,f[11],o,f[v+1]=function ew(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(Aa(o)))),o}(a,l),c,v)}(o,a,null,!0),Kd}function bm(o){!function no(o,a,l,c){const f=en(),g=_s(2);f.firstUpdatePass&&Qv(f,null,g,c);const v=Ne();if(l!==Zt&&Ai(v,g,l)){const E=f.data[Wn()];if(Wb(E,c)&&!Sc(f,g)){let C=c?E.classesWithoutHost:E.stylesWithoutHost;null!==C&&(l=Ee(C,l||"")),U(f,E,v,l,c)}else!function WA(o,a,l,c,f,g,v,E){f===Zt&&(f=xt);let C=0,R=0,k=0<f.length?f[0]:null,B=0<g.length?g[0]:null;for(;null!==k||null!==B;){const Q=C<f.length?f[C+1]:void 0,oe=R<g.length?g[R+1]:void 0;let We,Te=null;k===B?(C+=2,R+=2,Q!==oe&&(Te=B,We=oe)):null===B||null!==k&&k<B?(C+=2,Te=k):(R+=2,Te=B,We=oe),null!==Te&&zf(o,a,l,c,Te,We,v,E),k=C<f.length?f[C]:null,B=R<g.length?g[R]:null}}(f,E,v,v[11],v[g+1],v[g+1]=function $A(o,a,l){if(null==l||""===l)return xt;const c=[],f=Aa(l);if(Array.isArray(f))for(let g=0;g<f.length;g++)o(c,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&o(c,g,f[g]);else"string"==typeof f&&a(c,f);return c}(o,a,l),c,g)}}(at,Vo,o,!0)}function Vo(o,a){for(let l=function Ub(o){return function Im(o){Mr.key=0,Mr.keyEnd=0,Mr.value=0,Mr.valueEnd=0,Mr.textEnd=o.length}(o),zd(o,qd(o,0,Mr.textEnd))}(a);l>=0;l=zd(a,l))at(o,Gv(a),!0)}function Sc(o,a){return a>=o.expandoStartIndex}function Qv(o,a,l,c){const f=o.data;if(null===f[l+1]){const g=f[Wn()],v=Sc(o,l);Wb(g,c)&&null===a&&!v&&(a=!1),a=function UA(o,a,l,c){const f=function Zu(o){const a=Vt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=c?a.residualClasses:a.residualStyles;if(null===f)0===(c?a.classBindings:a.styleBindings)&&(l=Gf(l=Jv(null,o,a,l,c),a.attrs,c),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=Jv(f,o,a,l,c),null===g){let C=function BA(o,a,l){const c=l?a.classBindings:a.styleBindings;if(0!==Cs(c))return o[ri(c)]}(o,a,c);void 0!==C&&Array.isArray(C)&&(C=Jv(null,o,a,C[1],c),C=Gf(C,a.attrs,c),function HA(o,a,l,c){o[ri(l?a.classBindings:a.styleBindings)]=c}(o,a,c,C))}else g=function jA(o,a,l){let c;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)c=Gf(c,o[g].hostAttrs,l);return Gf(c,a.attrs,l)}(o,a,c)}return void 0!==g&&(c?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,c),function LA(o,a,l,c,f,g){let v=g?a.classBindings:a.styleBindings,E=ri(v),C=Cs(v);o[c]=l;let k,R=!1;if(Array.isArray(l)){const B=l;k=B[1],(null===k||ns(B,k)>0)&&(R=!0)}else k=l;if(f)if(0!==C){const Q=ri(o[E+1]);o[c+1]=ni(Q,E),0!==Q&&(o[Q+1]=Af(o[Q+1],c)),o[E+1]=function Mk(o,a){return 131071&o|a<<17}(o[E+1],c)}else o[c+1]=ni(E,0),0!==E&&(o[E+1]=Af(o[E+1],c)),E=c;else o[c+1]=ni(C,0),0===E?E=c:o[C+1]=Af(o[C+1],c),C=c;R&&(o[c+1]=$I(o[c+1])),Fb(o,k,c,!0),Fb(o,k,c,!1),function FA(o,a,l,c,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&ns(g,a)>=0&&(l[c+1]=Ud(l[c+1]))}(a,k,o,c,g),v=ni(E,C),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,c)}}function Jv(o,a,l,c,f){let g=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(g=a[E],c=Gf(c,g.hostAttrs,f),g!==o);)E++;return null!==o&&(l.directiveStylingLast=E),c}function Gf(o,a,l){const c=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===c&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),at(o,v,!!l||a[++g]))}return void 0===o?null:o}function zf(o,a,l,c,f,g,v,E){if(!(3&a.type))return;const C=o.data,R=C[E+1];qf(function Xg(o){return 1==(1&o)}(R)?Xv(C,a,l,f,Cs(R),v):void 0)||(qf(g)||function uv(o){return 2==(2&o)}(R)&&(g=Xv(C,null,l,f,E,v)),function iS(o,a,l,c,f){if(a)f?o.addClass(l,c):o.removeClass(l,c);else{let g=-1===c.indexOf("-")?void 0:is.DashCase;null==f?o.removeStyle(l,c,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=is.Important),o.setStyle(l,c,f,g))}}(c,v,Ui(Wn(),l),f,g))}function Xv(o,a,l,c,f,g){const v=null===a;let E;for(;f>0;){const C=o[f],R=Array.isArray(C),k=R?C[1]:C,B=null===k;let Q=l[f+1];Q===Zt&&(Q=B?xt:void 0);let oe=B?ac(Q,c):k===c?Q:void 0;if(R&&!qf(oe)&&(oe=ac(C,c)),qf(oe)&&(E=oe,v))return E;const Te=o[f+1];f=v?ri(Te):Cs(Te)}if(null!==a){let C=g?a.residualClasses:a.residualStyles;null!=C&&(E=ac(C,c))}return E}function qf(o){return void 0!==o}function Wb(o,a){return 0!=(o.flags&(a?16:32))}function Gb(o,a=""){const l=Ne(),c=en(),f=o+22,g=c.firstCreatePass?jd(c,f,1,a,null):c.data[f],v=l[f]=function Sg(o,a){return o.createText(a)}(l[11],a);Rg(c,l,v,g),ti(g,!1)}function tw(o){return Cm("",o,""),tw}function Cm(o,a,l){const c=Ne(),f=function Qt(o,a,l,c){return Ai(o,sl(),l)?a+Ce(l)+c:Zt}(c,o,a,l);return f!==Zt&&function Pa(o,a,l){const c=Ui(a,o);!function Ty(o,a,l){o.setValue(a,l)}(o[11],c,l)}(c,Wn(),f),Cm}const Rl=void 0;var xm=["en",[["a","p"],["AM","PM"],Rl],[["AM","PM"],Rl,Rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rl,"{1} 'at' {0}",Rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uw(o){const l=Math.floor(Math.abs(o)),c=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Kf={};function gn(o){const a=function iO(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=pi(a);if(l)return l;const c=a.split("-")[0];if(l=pi(c),l)return l;if("en"===c)return xm;throw new Ae(701,!1)}function oR(o){return gn(o)[St.PluralCase]}function pi(o){return o in Kf||(Kf[o]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[o]),Kf[o]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const Zf="en-US";let lR=Zf;function Qd(o,a,l,c,f){if(o=te(o),Array.isArray(o))for(let g=0;g<o.length;g++)Qd(o[g],a,l,c,f);else{const g=en(),v=Ne();let E=mc(o)?o:te(o.provide),C=wI(o);const R=fr(),k=1048575&R.providerIndexes,B=R.directiveStart,Q=R.providerIndexes>>20;if(mc(o)||!o.multi){const oe=new Ci(C,f,Ec),Te=Jd(E,a,f?k:k+Q,B);-1===Te?(Eo(ws(R,v),g,E),Vm(g,o,a.length),a.push(E),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),l.push(oe),v.push(oe)):(l[Te]=oe,v[Te]=oe)}else{const oe=Jd(E,a,k+Q,B),Te=Jd(E,a,k,k+Q),We=oe>=0&&l[oe],Ye=Te>=0&&l[Te];if(f&&!Ye||!f&&!We){Eo(ws(R,v),g,E);const pt=function FR(o,a,l,c,f){const g=new Ci(o,l,Ec);return g.multi=[],g.index=a,g.componentProviders=0,Um(g,f,c&&!l),g}(f?Iw:ka,l.length,f,c,C);!f&&Ye&&(l[Te].providerFactory=pt),Vm(g,o,a.length,0),a.push(E),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),l.push(pt),v.push(pt)}else Vm(g,o,oe>-1?oe:Te,Um(l[f?Te:oe],C,!f&&c));!f&&c&&Ye&&l[Te].componentProviders++}}}function Vm(o,a,l,c){const f=mc(a),g=function xS(o){return!!o.useClass}(a);if(f||g){const C=(g?te(a.useClass):a).prototype.ngOnDestroy;if(C){const R=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const k=R.indexOf(l);-1===k?R.push(l,[c,C]):R[k+1].push(c,C)}else R.push(l,C)}}}function Um(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function Jd(o,a,l,c){for(let f=l;f<c;f++)if(a[f]===o)return f;return-1}function ka(o,a,l,c){return bw(this.multi,[])}function Iw(o,a,l,c){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Xi(l,l[1],this.providerFactory.index,c);g=E.slice(0,v),bw(f,g);for(let C=v;C<E.length;C++)g.push(E[C])}else g=[],bw(f,g);return g}function bw(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function Ac(o,a=[]){return l=>{l.providersResolver=(c,f)=>function LR(o,a,l){const c=en();if(c.firstCreatePass){const f=ui(o);Qd(l,c.data,c.blueprint,f,!0),Qd(a,c.data,c.blueprint,f,!1)}}(c,f?f(o):o,a)}}class Rc{}class Bm{}function cC(o,a){return new Cw(o,a??null)}class Cw extends Rc{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Nv(this);const c=lt(a);this._bootstrapComponents=xa(c.bootstrap),this._r3Injector=OI(a,l,[{provide:Rc,useValue:this},{provide:yu,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Xd extends Bm{constructor(a){super(),this.moduleType=a}create(a){return new Cw(this.moduleType,a)}}class Dw extends Rc{constructor(a,l,c){super(),this.componentFactoryResolver=new Nv(this),this.instance=null;const f=new zy([...a,{provide:Rc,useValue:this},{provide:yu,useValue:this.componentFactoryResolver}],l||bf(),c,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function rp(o,a,l=null){return new Dw(o,a,l).injector}let Tw=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=mI(0,l.type),f=c.length>0?rp([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=ln({token:o,providedIn:"environment",factory:()=>new o(Pn(_u))}),o})();function dC(o){o.getStandaloneInjector=a=>a.get(Tw).getOrCreateStandaloneInjector(o)}function kw(o,a,l,c){return function jm(o,a,l,c,f,g){const v=a+l;return Ai(o,v,f)?$i(o,v+1,g?c.call(g,f):c(f)):xc(o,v+1)}(Ne(),pr(),o,a,l,c)}function Ow(o,a,l,c,f){return function Zr(o,a,l,c,f,g,v){const E=a+l;return Dc(o,E,f,g)?$i(o,E+2,v?c.call(v,f,g):c(f,g)):xc(o,E+2)}(Ne(),pr(),o,a,l,c,f)}function Lw(o,a,l,c,f,g,v){return function op(o,a,l,c,f,g,v,E,C){const R=a+l;return Ds(o,R,f,g,v,E)?$i(o,R+4,C?c.call(C,f,g,v,E):c(f,g,v,E)):xc(o,R+4)}(Ne(),pr(),o,a,l,c,f,g,v)}function Fw(o,a,l,c,f,g,v,E){const C=pr()+o,R=Ne(),k=Ds(R,C,l,c,f,g);return Ai(R,C+4,v)||k?$i(R,C+5,E?a.call(E,l,c,f,g,v):a(l,c,f,g,v)):function bu(o,a){return o[a]}(R,C+5)}function xc(o,a){const l=o[a];return l===Zt?void 0:l}function Hw(o){return a=>{setTimeout(o,void 0,a)}}const As=class vC extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,c){let f=a,g=l||(()=>null),v=c;if(a&&"object"==typeof a){const C=a;f=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=Hw(g),f&&(f=Hw(f)),v&&(v=Hw(v)));const E=super.subscribe({next:f,error:g,complete:v});return a instanceof G.w0&&a.add(E),E}};function jw(){return this._results[Iu()]()}class ap{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Iu(),c=ap.prototype;c[l]||(c[l]=jw)}get changes(){return this._changes||(this._changes=new As)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const c=this;c.dirty=!1;const f=Vn(a);(this._changesDetected=!function pn(o,a,l){if(o.length!==a.length)return!1;for(let c=0;c<o.length;c++){let f=o[c],g=a[c];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let th=(()=>{class o{}return o.__NG_ELEMENT_ID__=wC,o})();const ZR=th,lp=class extends ZR{constructor(a,l,c){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(a,l){const c=this._declarationTContainer.tViews,f=_v(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(c)),kf(c,f,a),new Ff(f)}};function wC(){return up(fr(),Ne())}function up(o,a){return 4&o.type?new lp(a,o,vu(o,a)):null}let cp=(()=>{class o{}return o.__NG_ELEMENT_ID__=Wm,o})();function Wm(){return IC(fr(),Ne())}const YR=cp,EC=class extends YR{constructor(a,l,c){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=c}get element(){return vu(this._hostTNode,this._hostLView)}get injector(){return new _a(this._hostTNode,this._hostLView)}get parentInjector(){const a=fl(this._hostTNode,this._hostLView);if(zh(a)){const l=js(a,this._hostLView),c=gr(a);return new _a(l[1].data[c+8],l)}return new _a(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=Pc(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,c){let f,g;"number"==typeof c?f=c:null!=c&&(f=c.index,g=c.injector);const v=a.createEmbeddedView(l||{},g);return this.insert(v,f),v}createComponent(a,l,c,f,g){const v=a&&!function ts(o){return"function"==typeof o}(a);let E;if(v)E=l;else{const B=l||{};E=B.index,c=B.injector,f=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const C=v?a:new Cc(N(a)),R=c||this.parentInjector;if(!g&&null==C.ngModule){const Q=(v?R:this.parentInjector).get(_u,null);Q&&(g=Q)}const k=C.create(R,f,void 0,g);return this.insert(k.hostView,E),k}insert(a,l){const c=a._lView,f=c[1];if(function qu(o){return vi(o[3])}(c)){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const B=c[3],Q=new EC(B,B[6],B[3]);Q.detach(Q.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function JT(o,a,l,c){const f=10+c,g=l.length;c>0&&(l[f-1][4]=a),c<g-10?(a[4]=l[f],Co(l,10+c,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function XT(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(v,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=64}(f,c,v,g);const E=hf(g,v),C=c[11],R=Ys(C,v[7]);return null!==R&&function Ag(o,a,l,c,f,g){c[0]=f,c[6]=a,pc(o,c,l,1,f,g)}(f,v[6],C,c,R,E),a.attachToViewContainerRef(),Co($w(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=Pc(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),c=Sy(this._lContainer,l);c&&(mr($w(this._lContainer),l),J0(c[1],c))}detach(a){const l=this._adjustIndex(a,-1),c=Sy(this._lContainer,l);return c&&null!=mr($w(this._lContainer),l)?new Ff(c):null}_adjustIndex(a,l=0){return a??this.length+l}};function Pc(o){return o[8]}function $w(o){return o[8]||(o[8]=[])}function IC(o,a){let l;const c=a[o.index];if(vi(c))l=c;else{let f;if(8&o.type)f=qn(c);else{const g=a[11];f=g.createComment("");const v=Sr(o,a);fu(g,Ys(g,v),f,function Nd(o,a){return o.nextSibling(a)}(g,v),!1)}a[o.index]=l=cb(c,a,f,o),cm(a,l)}return new EC(l,o,a)}class Gm{constructor(a){this.queryList=a,this.matches=null}clone(){return new Gm(this.queryList)}setDirty(){this.queryList.setDirty()}}class kc{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const c=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<c;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new kc(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Xm(a,l).matches&&this.queries[l].setDirty()}}class Gw{constructor(a,l,c=null){this.predicate=a,this.flags=l,this.read=c}}class gi{constructor(a=[]){this.queries=a}elementStart(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,g=this.getByIndex(c).embeddedTView(a,f);g&&(g.indexInDeclarationView=c,null!==l?l.push(g):l=[g])}return null!==l?new gi(l):null}template(a,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class zm{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new zm(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const g=c[f];this.matchTNodeWithReadOption(a,l,dp(l,g)),this.matchTNodeWithReadOption(a,l,gl(l,a,g,!1,!1))}else c===th?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,gl(l,a,c,!1,!1))}matchTNodeWithReadOption(a,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===_c||f===cp||f===th&&4&l.type)this.addMatch(l.index,-2);else{const g=gl(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,c)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function dp(o,a){const l=o.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===a)return l[c+1];return null}function CC(o,a,l,c){return-1===l?function qm(o,a){return 11&o.type?vu(o,a):4&o.type?up(o,a):null}(a,o):-2===l?function zw(o,a,l){return l===_c?vu(a,o):l===th?up(a,o):l===cp?IC(a,o):void 0}(o,a,c):Xi(o,o[1],l,a)}function qw(o,a,l,c){const f=a[19].queries[c];if(null===f.matches){const g=o.data,v=l.matches,E=[];for(let C=0;C<v.length;C+=2){const R=v[C];E.push(R<0?null:CC(a,g[R],v[C+1],l.metadata.read))}f.matches=E}return f.matches}function Km(o,a,l,c){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const v=qw(o,a,f,l);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)c.push(v[E/2]);else{const R=g[E+1],k=a[-C];for(let B=10;B<k.length;B++){const Q=k[B];Q[17]===Q[3]&&Km(Q[1],Q,R,c)}if(null!==k[9]){const B=k[9];for(let Q=0;Q<B.length;Q++){const oe=B[Q];Km(oe[1],oe,R,c)}}}}}return c}function nh(o){const a=Ne(),l=en(),c=ol();Yu(c+1);const f=Xm(l,c);if(o.dirty&&function zu(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?Km(l,a,c,[]):qw(l,a,f,c);o.reset(g,US),o.notifyOnChanges()}return!0}return!1}function Zm(o,a,l){const c=en();c.firstCreatePass&&(Kw(c,new Gw(o,a,l),-1),2==(2&a)&&(c.staticViewQueries=!0)),rh(c,Ne(),a)}function Ym(o,a,l,c){const f=en();if(f.firstCreatePass){const g=fr();Kw(f,new Gw(a,l,c),g.index),function QR(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}rh(f,Ne(),l)}function Qm(){return function Jm(o,a){return o[19].queries[a].queryList}(Ne(),ol())}function rh(o,a,l){const c=new ap(4==(4&l));ss(o,a,c,c.destroy),null===a[19]&&(a[19]=new kc),a[19].queries.push(new Gm(c))}function Kw(o,a,l){null===o.queries&&(o.queries=new gi),o.queries.track(new zm(a,l))}function Xm(o,a){return o.queries.getByIndex(a)}function hp(o,a){return up(o,a)}function vp(...o){}const FC=new Fn("Application Initializer");let l_=(()=>{class o{constructor(l){this.appInits=l,this.resolve=vp,this.reject=vp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Fv(g))l.push(g);else if(Vv(g)){const v=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(Pn(FC,8))},o.\u0275prov=ln({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const iE=new Fn("AppId",{providedIn:"root",factory:function sE(){return`${oh()}${oh()}${oh()}`}});function oh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const oE=new Fn("Platform Initializer"),kl=new Fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aE=new Fn("appBootstrapListener"),lE=new Fn("AnimationModuleType");let wp=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ln({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const ah=new Fn("LocaleId",{providedIn:"root",factory:()=>Di(ah,Xe.Optional|Xe.SkipSelf)||function VC(){return typeof $localize<"u"&&$localize.locale||Zf}()}),u_=new Fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class UC{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Ep=(()=>{class o{compileModuleSync(l){return new Xd(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),g=xa(lt(l).declarations).reduce((v,E)=>{const C=N(E);return C&&v.push(new Cc(C)),v},[]);return new UC(c,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ln({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const HC=(()=>Promise.resolve(0))();function Ol(o){typeof Zone>"u"?HC.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Rs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new As(!1),this.onMicrotaskEmpty=new As(!1),this.onStable=new As(!1),this.onError=new As(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function jC(){let o=kt.requestAnimationFrame,a=kt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function xs(o){const a=()=>{!function h_(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(kt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,f_(o),o.isCheckStableRunning=!0,d_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),f_(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,g,v,E)=>{try{return fE(o),l.invokeTask(f,g,v,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),Uc(o)}},onInvoke:(l,c,f,g,v,E,C)=>{try{return fE(o),l.invoke(f,g,v,E,C)}finally{o.shouldCoalesceRunChangeDetection&&a(),Uc(o)}},onHasTask:(l,c,f,g)=>{l.hasTask(f,g),c===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,f_(o),d_(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,c,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rs.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(Rs.isInAngularZone())throw new Ae(909,!1)}run(a,l,c){return this._inner.run(a,l,c)}runTask(a,l,c,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,$C,vp,vp);try{return g.runTask(v,l,c)}finally{g.cancelTask(v)}}runGuarded(a,l,c){return this._inner.runGuarded(a,l,c)}runOutsideAngular(a){return this._outer.run(a)}}const $C={};function d_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function f_(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function fE(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Uc(o){o._nesting--,d_(o)}class cx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new As,this.onMicrotaskEmpty=new As,this.onStable=new As,this.onError=new As}run(a,l,c){return a.apply(l,c)}runGuarded(a,l,c){return a.apply(l,c)}runOutsideAngular(a){return a()}runTask(a,l,c,f){return a.apply(l,c)}}const WC=new Fn(""),p_=new Fn("");let pE,dx=(()=>{class o{constructor(l,c,f){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pE||(function zC(o){pE=o}(f),f.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rs.assertNotInAngularZone(),Ol(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ol(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(Pn(Rs),Pn(GC),Pn(p_))},o.\u0275prov=ln({token:o,factory:o.\u0275fac}),o})(),GC=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return pE?.findTestabilityInTree(this,l,c)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=ln({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Bo=null;const qC=new Fn("AllowMultipleToken"),g_=new Fn("PlatformDestroyListeners");class hx{constructor(a,l){this.name=a,this.token=l}}function dt(o,a,l=[]){const c=`Platform: ${a}`,f=new Fn(c);return(g=[])=>{let v=ye();if(!v||v.injector.get(qC,!1)){const E=[...l,...g,{provide:f,useValue:!0}];o?o(E):function $e(o){if(Bo&&!Bo.get(qC,!1))throw new Ae(400,!1);Bo=o;const a=o.get(Ue);(function Au(o){const a=o.get(oE,null);a&&a.forEach(l=>l())})(o)}(function ZC(o=[],a){return bs.create({name:a,providers:[{provide:Gy,useValue:"platform"},{provide:g_,useValue:new Set([()=>Bo=null])},...o]})}(E,c))}return function Lt(o){const a=ye();if(!a)throw new Ae(401,!1);return a}()}}function ye(){return Bo?.get(Ue)??null}let Ue=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const f=function mE(o,a){let l;return l="noop"===o?new cx:("zone.js"===o?void 0:o)||new Rs(a),l}(c?.ngZone,function $r(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:Rs,useValue:f}];return f.run(()=>{const v=bs.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(v),C=E.injector.get(wu,null);if(!C)throw new Ae(402,!1);return f.runOutsideAngular(()=>{const R=f.onError.subscribe({next:k=>{C.handleError(k)}});E.onDestroy(()=>{__(this._modules,E),R.unsubscribe()})}),function YC(o,a,l){try{const c=l();return Fv(c)?c.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):c}catch(c){throw a.runOutsideAngular(()=>o.handleError(c)),c}}(C,f,()=>{const R=E.injector.get(l_);return R.runInitializers(),R.donePromise.then(()=>(function hw(o){Kt(o,"Expected localeId to be defined"),"string"==typeof o&&(lR=o.toLowerCase().replace(/_/g,"-"))}(E.injector.get(ah,Zf)||Zf),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,c=[]){const f=QC({},c);return function lh(o,a,l){const c=new Xd(l);return Promise.resolve(c)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const c=l.injector.get(m_);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Ae(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(g_,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(Pn(bs))},o.\u0275prov=ln({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function QC(o,a){return Array.isArray(a)?a.reduce(QC,o):{...o,...a}}let m_=(()=>{class o{constructor(l,c,f){this._zone=l,this._injector=c,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Rs.assertNotInAngularZone(),Ol(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Rs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),R.unsubscribe()}});this.isStable=(0,le.T)(g,v.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const f=l instanceof LS;if(!this._injector.get(l_).done)throw!f&&Fe(l),new Ae(405,false);let v;v=f?l:this._injector.get(yu).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const E=function gE(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Rc),R=v.create(bs.NULL,[],c||v.selector,E),k=R.location.nativeElement,B=R.injector.get(WC,null);return B?.registerApplication(k),R.onDestroy(()=>{this.detachView(R.hostView),__(this.components,R),B?.unregisterApplication(k)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;__(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(aE,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>__(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ae(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(Pn(Rs),Pn(_u),Pn(wu))},o.\u0275prov=ln({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function __(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let eD=!0,fx=!1;function px(){return fx=!0,eD}function tD(){if(fx)throw new Error("Cannot enable prod mode after platform setup.");eD=!1}let tr=(()=>{class o{}return o.__NG_ELEMENT_ID__=Ft,o})();function Ft(o){return function bp(o,a,l){if(ju(o)&&!l){const c=hn(o.index,a);return new Ff(c,c)}return 47&o.type?new Ff(a[16],a):null}(fr(),Ne(),16==(16&o))}class iD{constructor(){}supports(a){return gm(a)}create(a){return new Ru(a)}}const Cp=(o,a)=>a;class Ru{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Cp}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,c=this._removalsHead,f=0,g=null;for(;l||c;){const v=!c||l&&l.currentIndex<I_(c,f,g)?l:c,E=I_(v,f,g),C=v.currentIndex;if(v===c)f--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const R=E-f,k=C-f;if(R!=k){for(let Q=0;Q<R;Q++){const oe=Q<g.length?g[Q]:g[Q]=0,Te=oe+Q;k<=Te&&Te<R&&(g[Q]=oe+1)}g[v.previousIndex]=k-R}}E!==C&&a(v,E,C)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!gm(a))throw new Ae(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],v=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,g,v,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,E),c=!0),l=l._next}else f=0,function qk(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Iu()]();let c;for(;!(c=l.next()).done;)a(c.value)}}(a,E=>{v=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,E,v,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,c,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new mx(l,c),g,f),a}_verifyReinsertion(a,l,c,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,c),this._addToMoves(a,c),a}_moveAfter(a,l,c){return this._unlink(a),this._insertAfter(a,l,c),this._addToMoves(a,c),a}_addAfter(a,l,c){return this._insertAfter(a,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,c){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new bE),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,c=a._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class mx{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Hc{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const l=a._prevDup,c=a._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class bE{constructor(){this.map=new Map}put(a){const l=a.trackById;let c=this.map.get(l);c||(c=new Hc,this.map.set(l,c)),c.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function I_(o,a,l){const c=o.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+a+f}class sD{constructor(){}supports(a){return a instanceof Map||ko(a)}create(){return new _x}}class _x{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||ko(a)))throw new Ae(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const c=a._prev;return l._next=a,l._prev=c,a._prev=l,c&&(c._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const c=new as(a);return this._records.set(a,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(c=>l(a[c],c))}}class as{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function CE(){return new Ll([new iD])}let Ll=(()=>{class o{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:c=>o.create(l,c||CE()),deps:[[o,new vt,new be]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new Ae(901,!1)}}return o.\u0275prov=ln({token:o,providedIn:"root",factory:CE}),o})();function vr(){return new uh([new sD])}let uh=(()=>{class o{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:c=>o.create(l,c||vr()),deps:[[o,new vt,new be]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(c)return c;throw new Ae(901,!1)}}return o.\u0275prov=ln({token:o,providedIn:"root",factory:vr}),o})();const Ms=dt(null,"core",[]);let wx=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(Pn(m_))},o.\u0275mod=sn({type:o}),o.\u0275inj=$t({}),o})();function Yr(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(gt,xe,V)=>{V.d(xe,{Z:()=>Ae});var h=V(2090),G=V(4859),O=V(9681),le=V(1877);class he{constructor(Ce,ve){this._delegate=Ce,this.firebase=ve,(0,O._addComponent)(Ce,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ce,ve=O._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const Je=this._delegate.container.getProvider(Ce);return!Je.isInitialized()&&"EXPLICIT"===(null===(nt=Je.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&Je.initialize(),Je.getImmediate({identifier:ve})}_removeServiceInstance(Ce,ve=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(ve)}_addComponent(Ce){(0,O._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,O._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function Ee(){const ot=function me(ot){const Ce={},ve={__esModule:!0,initializeApp:function Ve(ae,fe={}){const Ie=O.initializeApp(ae,fe);if((0,h.r3)(Ce,Ie.name))return Ce[Ie.name];const ee=new ot(Ie,ve);return Ce[Ie.name]=ee,ee},app:Je,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Se(ae){const fe=ae.name,Ie=fe.replace("-compat","");if(O._registerComponent(ae)&&"PUBLIC"===ae.type){const ee=(re=Je())=>{if("function"!=typeof re[Ie])throw ge.create("invalid-app-argument",{appName:fe});return re[Ie]()};void 0!==ae.serviceProps&&(0,h.ZB)(ee,ae.serviceProps),ve[Ie]=ee,ot.prototype[Ie]=function(...re){return this._getService.bind(this,fe).apply(this,ae.multipleInstances?re:[])}}return"PUBLIC"===ae.type?ve[Ie]:null},removeApp:function nt(ae){delete Ce[ae]},useAsService:function Ke(ae,fe){return"serverAuth"===fe?null:fe},modularAPIs:O}};function Je(ae){if(!(0,h.r3)(Ce,ae=ae||O._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:ae});return Ce[ae]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function ke(){return Object.keys(Ce).map(ae=>Ce[ae])}}),Je.App=ot,ve}(he);return ot.INTERNAL=Object.assign(Object.assign({},ot.INTERNAL),{createFirebaseNamespace:Ee,extendNamespace:function Ce(ve){(0,h.ZB)(ot,ve)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ot}(),q=new le.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ot=self.firebase.SDK_VERSION;ot&&ot.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=Y;!function Le(ot){(0,O.registerVersion)("@firebase/app-compat","0.1.39",ot)}()},9681:(gt,xe,V)=>{V.r(xe),V.d(xe,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Zi,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>an,_addOrOverwriteComponent:()=>ln,_apps:()=>En,_clearComponents:()=>qi,_components:()=>kn,_getProvider:()=>$t,_registerComponent:()=>Jt,_removeServiceInstance:()=>Ur,deleteApp:()=>Yi,getApp:()=>Zn,getApps:()=>Vi,initializeApp:()=>Xr,onLog:()=>ir,registerVersion:()=>dr,setLogLevel:()=>xn});var h=V(5861),G=V(4859),O=V(1877),le=V(2090),he=V(8766);class we{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(it=>{if(function ge(rt){return"VERSION"===rt.getComponent()?.type}(it)){const Dt=it.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(it=>it).join(" ")}}const me="@firebase/app",Y=new O.Yd("@firebase/app"),Kt="[DEFAULT]",Ze={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},En=new Map,kn=new Map;function an(rt,Re){try{rt.container.addComponent(Re)}catch(it){Y.debug(`Component ${Re.name} failed to register with FirebaseApp ${rt.name}`,it)}}function ln(rt,Re){rt.container.addOrOverwriteComponent(Re)}function Jt(rt){const Re=rt.name;if(kn.has(Re))return Y.debug(`There were multiple attempts to register component ${Re}.`),!1;kn.set(Re,rt);for(const it of En.values())an(it,rt);return!0}function $t(rt,Re){const it=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return it&&it.triggerHeartbeat(),rt.container.getProvider(Re)}function Ur(rt,Re,it=Kt){$t(rt,Re).clearInstance(it)}function qi(){kn.clear()}const Gn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ki{constructor(Re,it,Dt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},it),this._name=it.name,this._automaticDataCollectionEnabled=it.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}const Zi="9.14.0";function Xr(rt,Re={}){let it=rt;"object"!=typeof Re&&(Re={name:Re});const Dt=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},Re),Tt=Dt.name;if("string"!=typeof Tt||!Tt)throw Gn.create("bad-app-name",{appName:String(Tt)});if(it||(it=(0,le.aH)()),!it)throw Gn.create("no-options");const sn=En.get(Tt);if(sn){if((0,le.vZ)(it,sn.options)&&(0,le.vZ)(Dt,sn.config))return sn;throw Gn.create("duplicate-app",{appName:Tt})}const K=new G.H0(Tt);for(const J of kn.values())K.addComponent(J);const z=new Ki(it,Dt,K);return En.set(Tt,z),z}function Zn(rt=Kt){const Re=En.get(rt);if(!Re&&rt===Kt)return Xr();if(!Re)throw Gn.create("no-app",{appName:rt});return Re}function Vi(){return Array.from(En.values())}function Yi(rt){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,h.Z)(function*(rt){const Re=rt.name;En.has(Re)&&(En.delete(Re),yield Promise.all(rt.container.getProviders().map(it=>it.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function dr(rt,Re,it){var Dt;let Tt=null!==(Dt=Ze[rt])&&void 0!==Dt?Dt:rt;it&&(Tt+=`-${it}`);const sn=Tt.match(/\s|\//),K=Re.match(/\s|\//);if(sn||K){const z=[`Unable to register library "${Tt}" with version "${Re}":`];return sn&&z.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),sn&&K&&z.push("and"),K&&z.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void Y.warn(z.join(" "))}Jt(new G.wA(`${Tt}-version`,()=>({library:Tt,version:Re}),"VERSION"))}function ir(rt,Re){if(null!==rt&&"function"!=typeof rt)throw Gn.create("invalid-log-argument");(0,O.Am)(rt,Re)}function xn(rt){(0,O.Ub)(rt)}const Mn="firebase-heartbeat-store";let On=null;function Tn(){return On||(On=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(rt,Re)=>{0===Re&&rt.createObjectStore(Mn)}}).catch(rt=>{throw Gn.create("idb-open",{originalErrorMessage:rt.message})})),On}function yt(){return(yt=(0,h.Z)(function*(rt){var Re;try{return(yield Tn()).transaction(Mn).objectStore(Mn).get(sr(rt))}catch(it){if(it instanceof le.ZR)Y.warn(it.message);else{const Dt=Gn.create("idb-get",{originalErrorMessage:null===(Re=it)||void 0===Re?void 0:Re.message});Y.warn(Dt.message)}}})).apply(this,arguments)}function kt(rt,Re){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(rt,Re){var it;try{const Tt=(yield Tn()).transaction(Mn,"readwrite");return yield Tt.objectStore(Mn).put(Re,sr(rt)),Tt.done}catch(Dt){if(Dt instanceof le.ZR)Y.warn(Dt.message);else{const Tt=Gn.create("idb-set",{originalErrorMessage:null===(it=Dt)||void 0===it?void 0:it.message});Y.warn(Tt.message)}}})).apply(this,arguments)}function sr(rt){return`${rt.name}!${rt.options.appId}`}class Gr{constructor(Re){this.container=Re,this._heartbeatsCache=null;const it=this.container.getProvider("app").getImmediate();this._storage=new nn(it),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var Re=this;return(0,h.Z)(function*(){const Dt=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Bt();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!Re._heartbeatsCache.heartbeats.some(sn=>sn.date===Tt))return Re._heartbeatsCache.heartbeats.push({date:Tt,agent:Dt}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(sn=>{const K=new Date(sn.date).valueOf();return Date.now()-K<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,h.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const it=Bt(),{heartbeatsToSend:Dt,unsentEntries:Tt}=function ai(rt,Re=1024){const it=[];let Dt=rt.slice();for(const Tt of rt){const sn=it.find(K=>K.agent===Tt.agent);if(sn){if(sn.dates.push(Tt.date),Ir(it)>Re){sn.dates.pop();break}}else if(it.push({agent:Tt.agent,dates:[Tt.date]}),Ir(it)>Re){it.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:it,unsentEntries:Dt}}(Re._heartbeatsCache.heartbeats),sn=(0,le.L)(JSON.stringify({version:2,heartbeats:Dt}));return Re._heartbeatsCache.lastSentHeartbeatDate=it,Tt.length>0?(Re._heartbeatsCache.heartbeats=Tt,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),sn})()}}function Bt(){return(new Date).toISOString().substring(0,10)}class nn{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,h.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function _t(rt){return yt.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var it=this;return(0,h.Z)(function*(){var Dt;if(yield it._canUseIndexedDBPromise){const sn=yield it.read();return kt(it.app,{lastSentHeartbeatDate:null!==(Dt=Re.lastSentHeartbeatDate)&&void 0!==Dt?Dt:sn.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var it=this;return(0,h.Z)(function*(){var Dt;if(yield it._canUseIndexedDBPromise){const sn=yield it.read();return kt(it.app,{lastSentHeartbeatDate:null!==(Dt=Re.lastSentHeartbeatDate)&&void 0!==Dt?Dt:sn.lastSentHeartbeatDate,heartbeats:[...sn.heartbeats,...Re.heartbeats]})}})()}}function Ir(rt){return(0,le.L)(JSON.stringify({version:2,heartbeats:rt})).length}!function Un(rt){Jt(new G.wA("platform-logger",Re=>new we(Re),"PRIVATE")),Jt(new G.wA("heartbeat",Re=>new Gr(Re),"PRIVATE")),dr(me,"0.8.4",rt),dr(me,"0.8.4","esm2017"),dr("fire-js","")}("")},4859:(gt,xe,V)=>{V.d(xe,{H0:()=>me,wA:()=>O,zt:()=>he});var h=V(5861),G=V(2090);class O{constructor(Y,q,te){this.name=Y,this.instanceFactory=q,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const le="[DEFAULT]";class he{constructor(Y,q){this.name=Y,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const q=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(q)){const te=new G.BH;if(this.instancesDeferred.set(q,te),this.isInitialized(q)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:q});Ge&&te.resolve(Ge)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(Y){var q;const te=this.normalizeInstanceIdentifier(Y?.identifier),Ge=null!==(q=Y?.optional)&&void 0!==q&&q;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Le){if(Ge)return null;throw Le}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function ge(Ee){return"EAGER"===Ee.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[q,te]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(q);try{const Le=this.getOrInitializeService({instanceIdentifier:Ge});te.resolve(Le)}catch{}}}}clearInstance(Y=le){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,h.Z)(function*(){const q=Array.from(Y.instances.values());yield Promise.all([...q.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...q.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=le){return this.instances.has(Y)}getOptions(Y=le){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:q={}}=Y,te=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:te,options:q});for(const[Le,Ae]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Le)&&Ae.resolve(Ge);return Ge}onInit(Y,q){var te;const Ge=this.normalizeInstanceIdentifier(q),Le=null!==(te=this.onInitCallbacks.get(Ge))&&void 0!==te?te:new Set;Le.add(Y),this.onInitCallbacks.set(Ge,Le);const Ae=this.instances.get(Ge);return Ae&&Y(Ae,Ge),()=>{Le.delete(Y)}}invokeOnInitCallbacks(Y,q){const te=this.onInitCallbacks.get(q);if(te)for(const Ge of te)try{Ge(Y,q)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:q={}}){let te=this.instances.get(Y);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(Ee=Y,Ee===le?void 0:Ee),options:q}),this.instances.set(Y,te),this.instancesOptions.set(Y,q),this.invokeOnInitCallbacks(te,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,te)}catch{}var Ee;return te||null}normalizeInstanceIdentifier(Y=le){return this.component?this.component.multipleInstances?Y:le:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const q=this.getProvider(Y.name);if(q.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);q.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const q=new he(Y,this);return this.providers.set(Y,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,xe,V)=>{V.d(xe,{Am:()=>Ee,Ub:()=>me,Yd:()=>ge,in:()=>G});const h=[];var G=(()=>{return(Y=G||(G={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",G;var Y})();const O={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},le=G.INFO,he={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},we=(Y,q,...te)=>{if(q<Y.logLevel)return;const Ge=(new Date).toISOString(),Le=he[q];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Le](`[${Ge}]  ${Y.name}:`,...te)};class ge{constructor(q){this.name=q,this._logLevel=le,this._logHandler=we,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in G))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?O[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...q),this._logHandler(this,G.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...q),this._logHandler(this,G.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,G.INFO,...q),this._logHandler(this,G.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,G.WARN,...q),this._logHandler(this,G.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...q),this._logHandler(this,G.ERROR,...q)}}function me(Y){h.forEach(q=>{q.setLogLevel(Y)})}function Ee(Y,q){for(const te of h){let Ge=null;q&&q.level&&(Ge=O[q.level]),te.userLogHandler=null===Y?null:(Le,Ae,...ot)=>{const Ce=ot.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch{return null}}).filter(ve=>ve).join(" ");Ae>=(Ge??Le.logLevel)&&Y({level:G[Ae].toLowerCase(),message:Ce,args:ot,type:Le.name})}}}},8766:(gt,xe,V)=>{V.d(xe,{Lj:()=>Ve,X3:()=>Je});var h=V(5861);let O,le;const ge=new WeakMap,me=new WeakMap,Ee=new WeakMap,Y=new WeakMap,q=new WeakMap;let Le={get(fe,Ie,ee){if(fe instanceof IDBTransaction){if("done"===Ie)return me.get(fe);if("objectStoreNames"===Ie)return fe.objectStoreNames||Ee.get(fe);if("store"===Ie)return ee.objectStoreNames[1]?void 0:ee.objectStore(ee.objectStoreNames[0])}return ve(fe[Ie])},set:(fe,Ie,ee)=>(fe[Ie]=ee,!0),has:(fe,Ie)=>fe instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in fe};function Ce(fe){return"function"==typeof fe?function ot(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...Ie){return fe.apply(nt(this),Ie),ve(ge.get(this))}:function(...Ie){return ve(fe.apply(nt(this),Ie))}:function(Ie,...ee){const re=fe.call(nt(this),Ie,...ee);return Ee.set(re,Ie.sort?Ie.sort():[Ie]),ve(re)}}(fe):(fe instanceof IDBTransaction&&function Ge(fe){if(me.has(fe))return;const Ie=new Promise((ee,re)=>{const _e=()=>{fe.removeEventListener("complete",ue),fe.removeEventListener("error",He),fe.removeEventListener("abort",He)},ue=()=>{ee(),_e()},He=()=>{re(fe.error||new DOMException("AbortError","AbortError")),_e()};fe.addEventListener("complete",ue),fe.addEventListener("error",He),fe.addEventListener("abort",He)});me.set(fe,Ie)}(fe),((fe,Ie)=>Ie.some(ee=>fe instanceof ee))(fe,function he(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,Le):fe)}function ve(fe){if(fe instanceof IDBRequest)return function te(fe){const Ie=new Promise((ee,re)=>{const _e=()=>{fe.removeEventListener("success",ue),fe.removeEventListener("error",He)},ue=()=>{ee(ve(fe.result)),_e()},He=()=>{re(fe.error),_e()};fe.addEventListener("success",ue),fe.addEventListener("error",He)});return Ie.then(ee=>{ee instanceof IDBCursor&&ge.set(ee,fe)}).catch(()=>{}),q.set(Ie,fe),Ie}(fe);if(Y.has(fe))return Y.get(fe);const Ie=Ce(fe);return Ie!==fe&&(Y.set(fe,Ie),q.set(Ie,fe)),Ie}const nt=fe=>q.get(fe);function Je(fe,Ie,{blocked:ee,upgrade:re,blocking:_e,terminated:ue}={}){const He=indexedDB.open(fe,Ie),je=ve(He);return re&&He.addEventListener("upgradeneeded",mt=>{re(ve(He.result),mt.oldVersion,mt.newVersion,ve(He.transaction))}),ee&&He.addEventListener("blocked",()=>ee()),je.then(mt=>{ue&&mt.addEventListener("close",()=>ue()),_e&&mt.addEventListener("versionchange",()=>_e())}).catch(()=>{}),je}function Ve(fe,{blocked:Ie}={}){const ee=indexedDB.deleteDatabase(fe);return Ie&&ee.addEventListener("blocked",()=>Ie()),ve(ee).then(()=>{})}const ke=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],Ke=new Map;function ae(fe,Ie){if(!(fe instanceof IDBDatabase)||Ie in fe||"string"!=typeof Ie)return;if(Ke.get(Ie))return Ke.get(Ie);const ee=Ie.replace(/FromIndex$/,""),re=Ie!==ee,_e=Se.includes(ee);if(!(ee in(re?IDBIndex:IDBObjectStore).prototype)||!_e&&!ke.includes(ee))return;const ue=function(){var He=(0,h.Z)(function*(je,...mt){const dn=this.transaction(je,_e?"readwrite":"readonly");let Kt=dn.store;return re&&(Kt=Kt.index(mt.shift())),(yield Promise.all([Kt[ee](...mt),_e&&dn.done]))[0]});return function(mt){return He.apply(this,arguments)}}();return Ke.set(Ie,ue),ue}!function Ae(fe){Le=fe(Le)}(fe=>({...fe,get:(Ie,ee,re)=>ae(Ie,ee)||fe.get(Ie,ee,re),has:(Ie,ee)=>!!ae(Ie,ee)||fe.has(Ie,ee)}))},5861:(gt,xe,V)=>{function h(O,le,he,we,ge,me,Ee){try{var Y=O[me](Ee),q=Y.value}catch(te){return void he(te)}Y.done?le(q):Promise.resolve(q).then(we,ge)}function G(O){return function(){var le=this,he=arguments;return new Promise(function(we,ge){var me=O.apply(le,he);function Ee(q){h(me,we,ge,Ee,Y,"next",q)}function Y(q){h(me,we,ge,Ee,Y,"throw",q)}Ee(void 0)})}}V.d(xe,{Z:()=>G})}},gt=>{gt(gt.s=6770)}]);